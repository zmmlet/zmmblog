<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.51">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="shortcut icon" href="/favicons/favicon.ico" type="image/x-icon" sizes="16x16"><meta name="referrer" content="no-referrer"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=8"><meta name="application-name" content="我睡着的时候不困唉"><meta name="apple-mobile-web-app-title" content="我睡着的时候不困唉"><meta name="msapplication-TileColor" content="#3eaf7c"><meta name="theme-color" content="#3eaf7c"><title>OpenCV 笔记 | 我睡着的时候不困唉</title><meta name="description" content="记录学习笔记">
    <link rel="modulepreload" href="/zmmblog/assets/app.b74d2e03.js"><link rel="modulepreload" href="/zmmblog/assets/OpenCV笔记.html.1610a8c7.js"><link rel="modulepreload" href="/zmmblog/assets/OpenCV笔记.html.6bc4f8d9.js"><link rel="prefetch" href="/zmmblog/assets/index.html.b24779ff.js"><link rel="prefetch" href="/zmmblog/assets/01vuePress初始化项目.html.822ae89a.js"><link rel="prefetch" href="/zmmblog/assets/02基础配置.html.e4de5608.js"><link rel="prefetch" href="/zmmblog/assets/03插件使用.html.21e27fd3.js"><link rel="prefetch" href="/zmmblog/assets/04github部署.html.4074d5f9.js"><link rel="prefetch" href="/zmmblog/assets/monorepo.html.93bf69a8.js"><link rel="prefetch" href="/zmmblog/assets/CSS.html.fd9aaf64.js"><link rel="prefetch" href="/zmmblog/assets/HTML.html.801e3910.js"><link rel="prefetch" href="/zmmblog/assets/javaScript.html.c1cf870d.js"><link rel="prefetch" href="/zmmblog/assets/links.html.4ae02c75.js"><link rel="prefetch" href="/zmmblog/assets/RBAC权限模型.html.ac08bae7.js"><link rel="prefetch" href="/zmmblog/assets/web程序性能优化.html.7ca98815.js"><link rel="prefetch" href="/zmmblog/assets/后台管理UI规范.html.b0ca2d5a.js"><link rel="prefetch" href="/zmmblog/assets/代码整洁的JavaScript.html.3472f171.js"><link rel="prefetch" href="/zmmblog/assets/C__基础语法.html.77b0a159.js"><link rel="prefetch" href="/zmmblog/assets/C__核心编程.html.b94da3ab.js"><link rel="prefetch" href="/zmmblog/assets/Qt.html.a38b18b5.js"><link rel="prefetch" href="/zmmblog/assets/java基础.html.fcfe77dd.js"><link rel="prefetch" href="/zmmblog/assets/sql语法.html.dbc00a4e.js"><link rel="prefetch" href="/zmmblog/assets/Spring5.html.56fbd65c.js"><link rel="prefetch" href="/zmmblog/assets/SpringBoot.html.a1817336.js"><link rel="prefetch" href="/zmmblog/assets/SpringMVC.html.865f9631.js"><link rel="prefetch" href="/zmmblog/assets/canvas基础.html.a968828e.js"><link rel="prefetch" href="/zmmblog/assets/PixiJS.html.069c95cd.js"><link rel="prefetch" href="/zmmblog/assets/CSS伪类与伪元素.html.3a6f4519.js"><link rel="prefetch" href="/zmmblog/assets/purgeCSS.html.ac532706.js"><link rel="prefetch" href="/zmmblog/assets/SCSS.html.3ab55211.js"><link rel="prefetch" href="/zmmblog/assets/ECMAScript6.html.de5eb789.js"><link rel="prefetch" href="/zmmblog/assets/ES6.html.93924d6c.js"><link rel="prefetch" href="/zmmblog/assets/javaSciptUtils.html.84c2585f.js"><link rel="prefetch" href="/zmmblog/assets/网络请求.html.89e81264.js"><link rel="prefetch" href="/zmmblog/assets/fullcalendar_会议预约.html.e81a181b.js"><link rel="prefetch" href="/zmmblog/assets/vueCLI项目升级CSS预处理.html.09a69e65.js"><link rel="prefetch" href="/zmmblog/assets/React原理.html.6abdef15.js"><link rel="prefetch" href="/zmmblog/assets/React基础.html.396c46d4.js"><link rel="prefetch" href="/zmmblog/assets/React组件基础.html.12ff8270.js"><link rel="prefetch" href="/zmmblog/assets/React组件生命周期.html.bd854840.js"><link rel="prefetch" href="/zmmblog/assets/React组件通讯.html.2a2a279e.js"><link rel="prefetch" href="/zmmblog/assets/React路由.html.538da866.js"><link rel="prefetch" href="/zmmblog/assets/React项目框架.html.68b26356.js"><link rel="prefetch" href="/zmmblog/assets/Redux.html.27c8d78f.js"><link rel="prefetch" href="/zmmblog/assets/uniapp微信小程序分包.html.5a8dc2a7.js"><link rel="prefetch" href="/zmmblog/assets/uniapp微信小程序获取手机号登录.html.f0fa44c6.js"><link rel="prefetch" href="/zmmblog/assets/uniapp结合高德地图实现微信小程序定位.html.e56536df.js"><link rel="prefetch" href="/zmmblog/assets/electron_Vue使用总结.html.acec5fe4.js"><link rel="prefetch" href="/zmmblog/assets/Vite项目初始化配(Vue3).html.65138774.js"><link rel="prefetch" href="/zmmblog/assets/vue_threejs web可视化搭建.html.68dbdccf.js"><link rel="prefetch" href="/zmmblog/assets/vue3源码.html.87ea32d3.js"><link rel="prefetch" href="/zmmblog/assets/Vue3笔记.html.334f1ee4.js"><link rel="prefetch" href="/zmmblog/assets/VueCLI项目初始化配置(Vue3_TS).html.a19ead49.js"><link rel="prefetch" href="/zmmblog/assets/VueRouter.html.28f5e0f2.js"><link rel="prefetch" href="/zmmblog/assets/404.html.c3e557d0.js"><link rel="prefetch" href="/zmmblog/assets/index.html.74548073.js"><link rel="prefetch" href="/zmmblog/assets/01vuePress初始化项目.html.ebd5772b.js"><link rel="prefetch" href="/zmmblog/assets/02基础配置.html.d3042860.js"><link rel="prefetch" href="/zmmblog/assets/03插件使用.html.82628e2a.js"><link rel="prefetch" href="/zmmblog/assets/04github部署.html.0628c941.js"><link rel="prefetch" href="/zmmblog/assets/monorepo.html.9fe3981d.js"><link rel="prefetch" href="/zmmblog/assets/CSS.html.66637163.js"><link rel="prefetch" href="/zmmblog/assets/HTML.html.f5541d23.js"><link rel="prefetch" href="/zmmblog/assets/javaScript.html.323cd077.js"><link rel="prefetch" href="/zmmblog/assets/links.html.39eb85b6.js"><link rel="prefetch" href="/zmmblog/assets/RBAC权限模型.html.ec444162.js"><link rel="prefetch" href="/zmmblog/assets/web程序性能优化.html.89332ee0.js"><link rel="prefetch" href="/zmmblog/assets/后台管理UI规范.html.02ec88c9.js"><link rel="prefetch" href="/zmmblog/assets/代码整洁的JavaScript.html.977b3674.js"><link rel="prefetch" href="/zmmblog/assets/C__基础语法.html.0d7d2d8b.js"><link rel="prefetch" href="/zmmblog/assets/C__核心编程.html.9595938a.js"><link rel="prefetch" href="/zmmblog/assets/Qt.html.64c4123e.js"><link rel="prefetch" href="/zmmblog/assets/java基础.html.5e720f16.js"><link rel="prefetch" href="/zmmblog/assets/sql语法.html.332381f2.js"><link rel="prefetch" href="/zmmblog/assets/Spring5.html.c4db2156.js"><link rel="prefetch" href="/zmmblog/assets/SpringBoot.html.47a4dcec.js"><link rel="prefetch" href="/zmmblog/assets/SpringMVC.html.3fe65086.js"><link rel="prefetch" href="/zmmblog/assets/canvas基础.html.5eeae399.js"><link rel="prefetch" href="/zmmblog/assets/PixiJS.html.ab326ff8.js"><link rel="prefetch" href="/zmmblog/assets/CSS伪类与伪元素.html.6eaad315.js"><link rel="prefetch" href="/zmmblog/assets/purgeCSS.html.59fc54e9.js"><link rel="prefetch" href="/zmmblog/assets/SCSS.html.4c559438.js"><link rel="prefetch" href="/zmmblog/assets/ECMAScript6.html.a70f4795.js"><link rel="prefetch" href="/zmmblog/assets/ES6.html.d28c9efa.js"><link rel="prefetch" href="/zmmblog/assets/javaSciptUtils.html.c0962eb9.js"><link rel="prefetch" href="/zmmblog/assets/网络请求.html.0642d075.js"><link rel="prefetch" href="/zmmblog/assets/fullcalendar_会议预约.html.db072a9b.js"><link rel="prefetch" href="/zmmblog/assets/vueCLI项目升级CSS预处理.html.81c9c3ea.js"><link rel="prefetch" href="/zmmblog/assets/React原理.html.8f359496.js"><link rel="prefetch" href="/zmmblog/assets/React基础.html.6068e1e9.js"><link rel="prefetch" href="/zmmblog/assets/React组件基础.html.cdc2a08d.js"><link rel="prefetch" href="/zmmblog/assets/React组件生命周期.html.e65acb0a.js"><link rel="prefetch" href="/zmmblog/assets/React组件通讯.html.e877a53e.js"><link rel="prefetch" href="/zmmblog/assets/React路由.html.2caa9db1.js"><link rel="prefetch" href="/zmmblog/assets/React项目框架.html.c332d27e.js"><link rel="prefetch" href="/zmmblog/assets/Redux.html.4625e2e0.js"><link rel="prefetch" href="/zmmblog/assets/uniapp微信小程序分包.html.04ccd21d.js"><link rel="prefetch" href="/zmmblog/assets/uniapp微信小程序获取手机号登录.html.dd44905f.js"><link rel="prefetch" href="/zmmblog/assets/uniapp结合高德地图实现微信小程序定位.html.8c87f83c.js"><link rel="prefetch" href="/zmmblog/assets/electron_Vue使用总结.html.e2abcc08.js"><link rel="prefetch" href="/zmmblog/assets/Vite项目初始化配(Vue3).html.20752b29.js"><link rel="prefetch" href="/zmmblog/assets/vue_threejs web可视化搭建.html.fff4040d.js"><link rel="prefetch" href="/zmmblog/assets/vue3源码.html.2c78cc72.js"><link rel="prefetch" href="/zmmblog/assets/Vue3笔记.html.729690c1.js"><link rel="prefetch" href="/zmmblog/assets/VueCLI项目初始化配置(Vue3_TS).html.a1a4adce.js"><link rel="prefetch" href="/zmmblog/assets/VueRouter.html.024d7721.js"><link rel="prefetch" href="/zmmblog/assets/404.html.3d44672b.js">
    <link rel="stylesheet" href="/zmmblog/assets/style.f955f7a8.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/zmmblog/" class=""><img class="logo" src="/zmmblog/images/logo.svg" alt="我睡着的时候不困唉"><span class="site-name can-hide">我睡着的时候不困唉</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/zmmblog/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="站外链接"><span class="title">站外链接</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="站外链接"><span class="title">站外链接</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://gitee.com/zmmlet" rel="noopener noreferrer" target="_blank" aria-label="gitee"><!--[--><!--]--> gitee <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://juejin.cn/user/114004940306909" rel="noopener noreferrer" target="_blank" aria-label="掘金"><!--[--><!--]--> 掘金 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/zmmblog/links/links.md" class="" aria-label="常用链接"><!--[--><!--]--> 常用链接 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="博客搭建"><span class="title">博客搭建</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="博客搭建"><span class="title">博客搭建</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/zmmblog/blogbuilding/01vuePress%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%B9%E7%9B%AE.html" class="" aria-label="项目初始化"><!--[--><!--]--> 项目初始化 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zmmblog/blogbuilding/02%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE.html" class="" aria-label="基础配置"><!--[--><!--]--> 基础配置 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zmmblog/blogbuilding/03%E6%8F%92%E4%BB%B6%E4%BD%BF%E7%94%A8.html" class="" aria-label="插件使用"><!--[--><!--]--> 插件使用 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zmmblog/blogbuilding/04github%E9%83%A8%E7%BD%B2.html" class="" aria-label="github 部署"><!--[--><!--]--> github 部署 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端"><span class="title">前端</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端"><span class="title">前端</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>CSS</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/css/CSS%E4%BC%AA%E7%B1%BB%E4%B8%8E%E4%BC%AA%E5%85%83%E7%B4%A0.html" class="" aria-label="伪类和伪元素"><!--[--><!--]--> 伪类和伪元素 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/css/SCSS.html" class="" aria-label="SCSS 语法"><!--[--><!--]--> SCSS 语法 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/css/purgeCSS.html" class="" aria-label="PurgeCSS"><!--[--><!--]--> PurgeCSS <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>javaScript</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/javaScript/ES6.html" class="" aria-label="ES6 学习笔记"><!--[--><!--]--> ES6 学习笔记 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/javaScript/javaSciptUtils.html" class="" aria-label="javascript 常用工具类"><!--[--><!--]--> javascript 常用工具类 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/javaScript/%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82.html" class="" aria-label="网络请求"><!--[--><!--]--> 网络请求 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>uniapp</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/uniapp/uniapp%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E8%8E%B7%E5%8F%96%E6%89%8B%E6%9C%BA%E5%8F%B7%E7%99%BB%E5%BD%95.html" class="" aria-label="微信小程序获取手机号登录"><!--[--><!--]--> 微信小程序获取手机号登录 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/uniapp/uniapp%E7%BB%93%E5%90%88%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE%E5%AE%9E%E7%8E%B0%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AE%9A%E4%BD%8D.html" class="" aria-label="结合高德地图实现微信小程序定位"><!--[--><!--]--> 结合高德地图实现微信小程序定位 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Vue</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/vue/electron+Vue%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93.html" class="" aria-label="electron(vue)桌面端"><!--[--><!--]--> electron(vue)桌面端 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/vue/VueRouter.html" class="" aria-label="Vue Router 笔记(Vue2)"><!--[--><!--]--> Vue Router 笔记(Vue2) <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/vue/Vue3%E7%AC%94%E8%AE%B0.html" class="" aria-label="Vue3 笔记"><!--[--><!--]--> Vue3 笔记 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/vue/VueCLI%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96%E9%85%8D%E7%BD%AE(Vue3+TS).html" class="" aria-label="VueCLI 项目初始化配置(Vue3+TS)"><!--[--><!--]--> VueCLI 项目初始化配置(Vue3+TS) <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/vue/Vite%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96%E9%85%8D(Vue3).html" class="" aria-label="Vite 项目初始化配(Vue3)"><!--[--><!--]--> Vite 项目初始化配(Vue3) <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/vue/vue+threejs%20web%E5%8F%AF%E8%A7%86%E5%8C%96%E6%90%AD%E5%BB%BA.html" class="" aria-label="Vue + Threejs Web 可视化搭建"><!--[--><!--]--> Vue + Threejs Web 可视化搭建 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>React</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/react/React%E5%9F%BA%E7%A1%80.html" class="" aria-label="React 基础"><!--[--><!--]--> React 基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/react/React%E7%BB%84%E4%BB%B6%E5%9F%BA%E7%A1%80.html" class="" aria-label="React 组件基础"><!--[--><!--]--> React 组件基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/react/React%E7%BB%84%E4%BB%B6%E9%80%9A%E8%AE%AF.html" class="" aria-label="React 组件通讯"><!--[--><!--]--> React 组件通讯 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/react/React%E7%BB%84%E4%BB%B6%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.html" class="" aria-label="React组件生命周期"><!--[--><!--]--> React组件生命周期 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/react/React%E5%8E%9F%E7%90%86.html" class="" aria-label="React原理"><!--[--><!--]--> React原理 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/react/React%E8%B7%AF%E7%94%B1.html" class="" aria-label="React路由"><!--[--><!--]--> React路由 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>plugins/components</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/plugins/fullcalendar_%E4%BC%9A%E8%AE%AE%E9%A2%84%E7%BA%A6.html" class="" aria-label="fullcalendar_会议预约"><!--[--><!--]--> fullcalendar_会议预约 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="图形/可视化"><span class="title">图形/可视化</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="图形/可视化"><span class="title">图形/可视化</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Canvas</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/canvas/canvas%E5%9F%BA%E7%A1%80.html" class="" aria-label="canvas基础"><!--[--><!--]--> canvas基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/canvas/PixiJS.html" class="" aria-label="PixiJS"><!--[--><!--]--> PixiJS <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>SVG</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Echarts</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="配置/升级"><span class="title">配置/升级</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="配置/升级"><span class="title">配置/升级</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Node</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/setting/vueCLI%E9%A1%B9%E7%9B%AE%E5%8D%87%E7%BA%A7CSS%E9%A2%84%E5%A4%84%E7%90%86.html" class="" aria-label="Node升级导致 node-sass 项目依赖报错"><!--[--><!--]--> Node升级导致 node-sass 项目依赖报错 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="后端"><span class="title">后端</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="后端"><span class="title">后端</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>java</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zmmblog/backend/java/java%E5%9F%BA%E7%A1%80.html" class="" aria-label="JAVA 基础"><!--[--><!--]--> JAVA 基础 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>C++</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zmmblog/backend/c++/C++%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95.html" class="" aria-label="C++基础语法"><!--[--><!--]--> C++基础语法 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zmmblog/backend/c++/C++%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B.html" class="" aria-label="C++核心编程"><!--[--><!--]--> C++核心编程 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a aria-current="page" href="/zmmblog/backend/c++/OpenCV%E7%AC%94%E8%AE%B0.html" class="router-link-active router-link-exact-active router-link-active" aria-label="OpenCV 笔记"><!--[--><!--]--> OpenCV 笔记 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>SQL</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zmmblog/backend/mysql/sql%E8%AF%AD%E6%B3%95.html" class="" aria-label="SQL 基础语法"><!--[--><!--]--> SQL 基础语法 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Spring</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zmmblog/backend/spring/Spring5.html" class="" aria-label="Spring 5"><!--[--><!--]--> Spring 5 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zmmblog/backend/spring/SpringMVC.html" class="" aria-label="SpringMVC"><!--[--><!--]--> SpringMVC <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="面试"><span class="title">面试</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="面试"><span class="title">面试</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/zmmblog/interview/HTML.html" class="" aria-label="HTML面试题"><!--[--><!--]--> HTML面试题 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zmmblog/interview/CSS.html" class="" aria-label="CSS面试题"><!--[--><!--]--> CSS面试题 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zmmblog/interview/javaScript.html" class="" aria-label="javaScript面试题"><!--[--><!--]--> javaScript面试题 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="项目"><span class="title">项目</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="项目"><span class="title">项目</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/zmmblog/project/web%E7%A8%8B%E5%BA%8F%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html" class="" aria-label="web 性能优化"><!--[--><!--]--> web 性能优化 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zmmblog/project/%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86UI%E8%A7%84%E8%8C%83.html" class="" aria-label="后台管理 UI 规范"><!--[--><!--]--> 后台管理 UI 规范 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zmmblog/project/RBAC%E6%9D%83%E9%99%90%E6%A8%A1%E5%9E%8B.html" class="" aria-label="RBAC 权限模型"><!--[--><!--]--> RBAC 权限模型 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="阅读"><span class="title">阅读</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="阅读"><span class="title">阅读</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/zmmblog/read/%E4%BB%A3%E7%A0%81%E6%95%B4%E6%B4%81%E7%9A%84JavaScript.html" class="" aria-label="代码整洁的 JavaScript"><!--[--><!--]--> 代码整洁的 JavaScript <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="搜索" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/zmmblog/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="站外链接"><span class="title">站外链接</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="站外链接"><span class="title">站外链接</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://gitee.com/zmmlet" rel="noopener noreferrer" target="_blank" aria-label="gitee"><!--[--><!--]--> gitee <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://juejin.cn/user/114004940306909" rel="noopener noreferrer" target="_blank" aria-label="掘金"><!--[--><!--]--> 掘金 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/zmmblog/links/links.md" class="" aria-label="常用链接"><!--[--><!--]--> 常用链接 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="博客搭建"><span class="title">博客搭建</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="博客搭建"><span class="title">博客搭建</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/zmmblog/blogbuilding/01vuePress%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%B9%E7%9B%AE.html" class="" aria-label="项目初始化"><!--[--><!--]--> 项目初始化 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zmmblog/blogbuilding/02%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE.html" class="" aria-label="基础配置"><!--[--><!--]--> 基础配置 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zmmblog/blogbuilding/03%E6%8F%92%E4%BB%B6%E4%BD%BF%E7%94%A8.html" class="" aria-label="插件使用"><!--[--><!--]--> 插件使用 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zmmblog/blogbuilding/04github%E9%83%A8%E7%BD%B2.html" class="" aria-label="github 部署"><!--[--><!--]--> github 部署 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端"><span class="title">前端</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端"><span class="title">前端</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>CSS</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/css/CSS%E4%BC%AA%E7%B1%BB%E4%B8%8E%E4%BC%AA%E5%85%83%E7%B4%A0.html" class="" aria-label="伪类和伪元素"><!--[--><!--]--> 伪类和伪元素 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/css/SCSS.html" class="" aria-label="SCSS 语法"><!--[--><!--]--> SCSS 语法 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/css/purgeCSS.html" class="" aria-label="PurgeCSS"><!--[--><!--]--> PurgeCSS <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>javaScript</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/javaScript/ES6.html" class="" aria-label="ES6 学习笔记"><!--[--><!--]--> ES6 学习笔记 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/javaScript/javaSciptUtils.html" class="" aria-label="javascript 常用工具类"><!--[--><!--]--> javascript 常用工具类 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/javaScript/%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82.html" class="" aria-label="网络请求"><!--[--><!--]--> 网络请求 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>uniapp</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/uniapp/uniapp%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E8%8E%B7%E5%8F%96%E6%89%8B%E6%9C%BA%E5%8F%B7%E7%99%BB%E5%BD%95.html" class="" aria-label="微信小程序获取手机号登录"><!--[--><!--]--> 微信小程序获取手机号登录 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/uniapp/uniapp%E7%BB%93%E5%90%88%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE%E5%AE%9E%E7%8E%B0%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AE%9A%E4%BD%8D.html" class="" aria-label="结合高德地图实现微信小程序定位"><!--[--><!--]--> 结合高德地图实现微信小程序定位 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Vue</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/vue/electron+Vue%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93.html" class="" aria-label="electron(vue)桌面端"><!--[--><!--]--> electron(vue)桌面端 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/vue/VueRouter.html" class="" aria-label="Vue Router 笔记(Vue2)"><!--[--><!--]--> Vue Router 笔记(Vue2) <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/vue/Vue3%E7%AC%94%E8%AE%B0.html" class="" aria-label="Vue3 笔记"><!--[--><!--]--> Vue3 笔记 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/vue/VueCLI%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96%E9%85%8D%E7%BD%AE(Vue3+TS).html" class="" aria-label="VueCLI 项目初始化配置(Vue3+TS)"><!--[--><!--]--> VueCLI 项目初始化配置(Vue3+TS) <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/vue/Vite%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96%E9%85%8D(Vue3).html" class="" aria-label="Vite 项目初始化配(Vue3)"><!--[--><!--]--> Vite 项目初始化配(Vue3) <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/vue/vue+threejs%20web%E5%8F%AF%E8%A7%86%E5%8C%96%E6%90%AD%E5%BB%BA.html" class="" aria-label="Vue + Threejs Web 可视化搭建"><!--[--><!--]--> Vue + Threejs Web 可视化搭建 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>React</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/react/React%E5%9F%BA%E7%A1%80.html" class="" aria-label="React 基础"><!--[--><!--]--> React 基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/react/React%E7%BB%84%E4%BB%B6%E5%9F%BA%E7%A1%80.html" class="" aria-label="React 组件基础"><!--[--><!--]--> React 组件基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/react/React%E7%BB%84%E4%BB%B6%E9%80%9A%E8%AE%AF.html" class="" aria-label="React 组件通讯"><!--[--><!--]--> React 组件通讯 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/react/React%E7%BB%84%E4%BB%B6%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.html" class="" aria-label="React组件生命周期"><!--[--><!--]--> React组件生命周期 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/react/React%E5%8E%9F%E7%90%86.html" class="" aria-label="React原理"><!--[--><!--]--> React原理 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/react/React%E8%B7%AF%E7%94%B1.html" class="" aria-label="React路由"><!--[--><!--]--> React路由 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>plugins/components</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/plugins/fullcalendar_%E4%BC%9A%E8%AE%AE%E9%A2%84%E7%BA%A6.html" class="" aria-label="fullcalendar_会议预约"><!--[--><!--]--> fullcalendar_会议预约 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="图形/可视化"><span class="title">图形/可视化</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="图形/可视化"><span class="title">图形/可视化</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Canvas</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/canvas/canvas%E5%9F%BA%E7%A1%80.html" class="" aria-label="canvas基础"><!--[--><!--]--> canvas基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/canvas/PixiJS.html" class="" aria-label="PixiJS"><!--[--><!--]--> PixiJS <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>SVG</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Echarts</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="配置/升级"><span class="title">配置/升级</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="配置/升级"><span class="title">配置/升级</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Node</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zmmblog/frontend/setting/vueCLI%E9%A1%B9%E7%9B%AE%E5%8D%87%E7%BA%A7CSS%E9%A2%84%E5%A4%84%E7%90%86.html" class="" aria-label="Node升级导致 node-sass 项目依赖报错"><!--[--><!--]--> Node升级导致 node-sass 项目依赖报错 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="后端"><span class="title">后端</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="后端"><span class="title">后端</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>java</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zmmblog/backend/java/java%E5%9F%BA%E7%A1%80.html" class="" aria-label="JAVA 基础"><!--[--><!--]--> JAVA 基础 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>C++</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zmmblog/backend/c++/C++%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95.html" class="" aria-label="C++基础语法"><!--[--><!--]--> C++基础语法 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zmmblog/backend/c++/C++%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B.html" class="" aria-label="C++核心编程"><!--[--><!--]--> C++核心编程 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a aria-current="page" href="/zmmblog/backend/c++/OpenCV%E7%AC%94%E8%AE%B0.html" class="router-link-active router-link-exact-active router-link-active" aria-label="OpenCV 笔记"><!--[--><!--]--> OpenCV 笔记 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>SQL</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zmmblog/backend/mysql/sql%E8%AF%AD%E6%B3%95.html" class="" aria-label="SQL 基础语法"><!--[--><!--]--> SQL 基础语法 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Spring</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/zmmblog/backend/spring/Spring5.html" class="" aria-label="Spring 5"><!--[--><!--]--> Spring 5 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/zmmblog/backend/spring/SpringMVC.html" class="" aria-label="SpringMVC"><!--[--><!--]--> SpringMVC <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="面试"><span class="title">面试</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="面试"><span class="title">面试</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/zmmblog/interview/HTML.html" class="" aria-label="HTML面试题"><!--[--><!--]--> HTML面试题 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zmmblog/interview/CSS.html" class="" aria-label="CSS面试题"><!--[--><!--]--> CSS面试题 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zmmblog/interview/javaScript.html" class="" aria-label="javaScript面试题"><!--[--><!--]--> javaScript面试题 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="项目"><span class="title">项目</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="项目"><span class="title">项目</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/zmmblog/project/web%E7%A8%8B%E5%BA%8F%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html" class="" aria-label="web 性能优化"><!--[--><!--]--> web 性能优化 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zmmblog/project/%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86UI%E8%A7%84%E8%8C%83.html" class="" aria-label="后台管理 UI 规范"><!--[--><!--]--> 后台管理 UI 规范 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zmmblog/project/RBAC%E6%9D%83%E9%99%90%E6%A8%A1%E5%9E%8B.html" class="" aria-label="RBAC 权限模型"><!--[--><!--]--> RBAC 权限模型 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="阅读"><span class="title">阅读</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="阅读"><span class="title">阅读</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/zmmblog/read/%E4%BB%A3%E7%A0%81%E6%95%B4%E6%B4%81%E7%9A%84JavaScript.html" class="" aria-label="代码整洁的 JavaScript"><!--[--><!--]--> 代码整洁的 JavaScript <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">java <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/zmmblog/backend/java/java%E5%9F%BA%E7%A1%80.html" class="sidebar-item" aria-label="JAVA 基础"><!--[--><!--]--> JAVA 基础 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading active collapsible">C++ <span class="down arrow"></span></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/zmmblog/backend/c++/C++%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95.html" class="sidebar-item" aria-label="C++基础语法"><!--[--><!--]--> C++基础语法 <!--[--><!--]--></a><!----></li><li><a href="/zmmblog/backend/c++/C++%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B.html" class="sidebar-item" aria-label="C++核心编程"><!--[--><!--]--> C++核心编程 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zmmblog/backend/c++/OpenCV%E7%AC%94%E8%AE%B0.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="OpenCV 笔记"><!--[--><!--]--> OpenCV 笔记 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zmmblog/backend/c++/OpenCV%E7%AC%94%E8%AE%B0.html#环境搭建" class="router-link-active router-link-exact-active sidebar-item" aria-label="环境搭建"><!--[--><!--]--> 环境搭建 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zmmblog/backend/c++/OpenCV%E7%AC%94%E8%AE%B0.html#环境介绍" class="router-link-active router-link-exact-active sidebar-item" aria-label="环境介绍"><!--[--><!--]--> 环境介绍 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zmmblog/backend/c++/OpenCV%E7%AC%94%E8%AE%B0.html#环境配置" class="router-link-active router-link-exact-active sidebar-item" aria-label="环境配置"><!--[--><!--]--> 环境配置 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zmmblog/backend/c++/OpenCV%E7%AC%94%E8%AE%B0.html#使用-vs-创建一个空项目和项目配置" class="router-link-active router-link-exact-active sidebar-item" aria-label="使用 vs 创建一个空项目和项目配置"><!--[--><!--]--> 使用 vs 创建一个空项目和项目配置 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zmmblog/backend/c++/OpenCV%E7%AC%94%E8%AE%B0.html#opencv-contrib-模块" class="router-link-active router-link-exact-active sidebar-item" aria-label="opencv_contrib 模块"><!--[--><!--]--> opencv_contrib 模块 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/zmmblog/backend/c++/OpenCV%E7%AC%94%E8%AE%B0.html#程序和测试" class="router-link-active router-link-exact-active sidebar-item" aria-label="程序和测试"><!--[--><!--]--> 程序和测试 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zmmblog/backend/c++/OpenCV%E7%AC%94%E8%AE%B0.html#测试项目配置" class="router-link-active router-link-exact-active sidebar-item" aria-label="测试项目配置"><!--[--><!--]--> 测试项目配置 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zmmblog/backend/c++/OpenCV%E7%AC%94%E8%AE%B0.html#图像、视频、网络摄像头" class="router-link-active router-link-exact-active sidebar-item" aria-label="图像、视频、网络摄像头"><!--[--><!--]--> 图像、视频、网络摄像头 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zmmblog/backend/c++/OpenCV%E7%AC%94%E8%AE%B0.html#图像基本功能" class="router-link-active router-link-exact-active sidebar-item" aria-label="图像基本功能"><!--[--><!--]--> 图像基本功能 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zmmblog/backend/c++/OpenCV%E7%AC%94%E8%AE%B0.html#调整大小并裁剪图像大小" class="router-link-active router-link-exact-active sidebar-item" aria-label="调整大小并裁剪图像大小"><!--[--><!--]--> 调整大小并裁剪图像大小 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zmmblog/backend/c++/OpenCV%E7%AC%94%E8%AE%B0.html#图形形状和文本" class="router-link-active router-link-exact-active sidebar-item" aria-label="图形形状和文本"><!--[--><!--]--> 图形形状和文本 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zmmblog/backend/c++/OpenCV%E7%AC%94%E8%AE%B0.html#扭曲和透视" class="router-link-active router-link-exact-active sidebar-item" aria-label="扭曲和透视"><!--[--><!--]--> 扭曲和透视 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zmmblog/backend/c++/OpenCV%E7%AC%94%E8%AE%B0.html#颜色检测" class="router-link-active router-link-exact-active sidebar-item" aria-label="颜色检测"><!--[--><!--]--> 颜色检测 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zmmblog/backend/c++/OpenCV%E7%AC%94%E8%AE%B0.html#形状轮廓检测" class="router-link-active router-link-exact-active sidebar-item" aria-label="形状轮廓检测"><!--[--><!--]--> 形状轮廓检测 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zmmblog/backend/c++/OpenCV%E7%AC%94%E8%AE%B0.html#人脸检测" class="router-link-active router-link-exact-active sidebar-item" aria-label="人脸检测"><!--[--><!--]--> 人脸检测 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zmmblog/backend/c++/OpenCV%E7%AC%94%E8%AE%B0.html#检测物体轮廓" class="router-link-active router-link-exact-active sidebar-item" aria-label="检测物体轮廓"><!--[--><!--]--> 检测物体轮廓 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zmmblog/backend/c++/OpenCV%E7%AC%94%E8%AE%B0.html#文件扫描仪" class="router-link-active router-link-exact-active sidebar-item" aria-label="文件扫描仪"><!--[--><!--]--> 文件扫描仪 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zmmblog/backend/c++/OpenCV%E7%AC%94%E8%AE%B0.html#车牌检测器" class="router-link-active router-link-exact-active sidebar-item" aria-label="车牌检测器"><!--[--><!--]--> 车牌检测器 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zmmblog/backend/c++/OpenCV%E7%AC%94%E8%AE%B0.html#口罩识别" class="router-link-active router-link-exact-active sidebar-item" aria-label="口罩识别"><!--[--><!--]--> 口罩识别 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zmmblog/backend/c++/OpenCV%E7%AC%94%E8%AE%B0.html#去除票据印章及通道分离" class="router-link-active router-link-exact-active sidebar-item" aria-label="去除票据印章及通道分离"><!--[--><!--]--> 去除票据印章及通道分离 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zmmblog/backend/c++/OpenCV%E7%AC%94%E8%AE%B0.html#图像增强与图像去噪-图像分割之边缘检测" class="router-link-active router-link-exact-active sidebar-item" aria-label="图像增强与图像去噪，图像分割之边缘检测"><!--[--><!--]--> 图像增强与图像去噪，图像分割之边缘检测 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zmmblog/backend/c++/OpenCV%E7%AC%94%E8%AE%B0.html#图像噪声" class="router-link-active router-link-exact-active sidebar-item" aria-label="图像噪声"><!--[--><!--]--> 图像噪声 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zmmblog/backend/c++/OpenCV%E7%AC%94%E8%AE%B0.html#视频运动目标捕捉" class="router-link-active router-link-exact-active sidebar-item" aria-label="视频运动目标捕捉"><!--[--><!--]--> 视频运动目标捕捉 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zmmblog/backend/c++/OpenCV%E7%AC%94%E8%AE%B0.html#马赛克原理之简单提高图像算法性能" class="router-link-active router-link-exact-active sidebar-item" aria-label="马赛克原理之简单提高图像算法性能"><!--[--><!--]--> 马赛克原理之简单提高图像算法性能 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zmmblog/backend/c++/OpenCV%E7%AC%94%E8%AE%B0.html#图像处理之线性滤波" class="router-link-active router-link-exact-active sidebar-item" aria-label="图像处理之线性滤波"><!--[--><!--]--> 图像处理之线性滤波 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">SQL <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/zmmblog/backend/mysql/sql%E8%AF%AD%E6%B3%95.html" class="sidebar-item" aria-label="SQL 基础语法"><!--[--><!--]--> SQL 基础语法 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Spring <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/zmmblog/backend/spring/Spring5.html" class="sidebar-item" aria-label="Spring 5"><!--[--><!--]--> Spring 5 <!--[--><!--]--></a><!----></li><li><a href="/zmmblog/backend/spring/SpringMVC.html" class="sidebar-item" aria-label="SpringMVC"><!--[--><!--]--> SpringMVC <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="opencv-笔记" tabindex="-1"><a class="header-anchor" href="#opencv-笔记" aria-hidden="true">#</a> OpenCV 笔记</h1><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>注意所有 C++ 源文件使用 Visual Studio 2019 编辑器打开否则会出现中文注释乱码</p></div><h2 id="环境搭建" tabindex="-1"><a class="header-anchor" href="#环境搭建" aria-hidden="true">#</a> 环境搭建</h2><h3 id="环境介绍" tabindex="-1"><a class="header-anchor" href="#环境介绍" aria-hidden="true">#</a> 环境介绍</h3><ul><li>操作系统 windows11</li><li>visualStudio 2019 下载</li><li><a href="https://github.com/opencv/opencv/releases/tag/4.5.4" target="_blank" rel="noopener noreferrer">opencv4.5<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 和 对应文档下载</li></ul><p><img src="https://gitee.com/zmmlet/study-note/raw/master/images/Snipaste_2022-10-08_11-23-57.png" alt=""></p><p>下载后安装,安装完成共有两个文件夹，一个是编译后的一个是源码</p><p><img src="https://gitee.com/zmmlet/study-note/raw/master/images/Snipaste_2022-10-08_11-29-36.png" alt=""></p><h3 id="环境配置" tabindex="-1"><a class="header-anchor" href="#环境配置" aria-hidden="true">#</a> 环境配置</h3><p><code>D:\localProgram\opencv\opencv\build\x64\vc15\bin</code> 安装目录文件路径，配置到电脑环境变量，然后重启项目</p><h3 id="使用-vs-创建一个空项目和项目配置" tabindex="-1"><a class="header-anchor" href="#使用-vs-创建一个空项目和项目配置" aria-hidden="true">#</a> 使用 vs 创建一个空项目和项目配置</h3><h4 id="创建完成项目如果编译器是-x86-改成如下" tabindex="-1"><a class="header-anchor" href="#创建完成项目如果编译器是-x86-改成如下" aria-hidden="true">#</a> 创建完成项目如果编译器是 x86 改成如下</h4><p><img src="https://gitee.com/zmmlet/study-note/raw/master/images/Snipaste_2022-10-08_15-12-02.png" alt=""> 然后为项目添加目录和 opencv 库做为依赖，点击项目，选择属性</p><p><img src="https://gitee.com/zmmlet/study-note/raw/master/images/Snipaste_2022-10-08_15-12-53.png" alt=""></p><h4 id="分别添加-添加生成目录-添加库目录-如下" tabindex="-1"><a class="header-anchor" href="#分别添加-添加生成目录-添加库目录-如下" aria-hidden="true">#</a> 分别添加 添加生成目录，添加库目录 如下：</h4><ul><li><p>添加生成目录 D:\localProgram\opencv\opencv\build\include</p></li><li><p>添加库目录 D:\localProgram\opencv\opencv\build\x64\vc15\lib</p></li></ul><p><img src="https://gitee.com/zmmlet/study-note/raw/master/images/Snipaste_2022-10-08_15-13-44.png" alt=""></p><h4 id="配置附加依赖项" tabindex="-1"><a class="header-anchor" href="#配置附加依赖项" aria-hidden="true">#</a> 配置附加依赖项：</h4><p>在 <code>D:\localProgram\opencv\opencv\build\x64\vc15\lib</code> 下的文件夹中 <code>opencv_world454d.lib</code>文件用于调试。 <code>opencv_world454.lib</code>文件用于正式发布，在属性如图中进行配置。 <strong>注：两个文件的区别在于是否带 d，带 d 的用于调试环境，不带 d 用于发布环境。vs 编辑器 2017 以前使用 vc14。vs2017 以后版本编辑器使用 vc15</strong></p><p><img src="https://gitee.com/zmmlet/study-note/raw/master/images/Snipaste_2022-10-08_15-15-01.png" alt=""></p><h3 id="opencv-contrib-模块" tabindex="-1"><a class="header-anchor" href="#opencv-contrib-模块" aria-hidden="true">#</a> opencv_contrib 模块</h3><p>为人脸模型训练模块在 opencv_contrib 模块中，因此想要训练人脸模型必须使用 opencv_contrib 模块，opencv_contrib 模块版本必须与 opencv 库版本相对应 人脸模型训练模块 <a href="https://github.com/opencv/opencv_contrib/tags" target="_blank" rel="noopener noreferrer">https://github.com/opencv/opencv_contrib/tags<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><img src="https://gitee.com/zmmlet/study-note/raw/master/images/Snipaste_2022-10-08_15-16-35.png" alt=""></p><p>Cmaker 编译工具 <a href="https://cmake.org/download/" target="_blank" rel="noopener noreferrer">https://cmake.org/download/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><img src="https://gitee.com/zmmlet/study-note/raw/master/images/Snipaste_2022-10-08_15-19-44.png" alt=""> Cmaker 编译工具 下载后解压找到目录 <code>D:\download\tool\cmake-3.22.1-windows-x86_64\bin</code> 运行 <code>.exe</code> 程序选择 <code>opencv</code> 源码目录，<strong>点击 configure</strong> 按钮</p><p><img src="https://gitee.com/zmmlet/study-note/raw/master/images/Snipaste_2022-10-08_15-20-31.png" alt=""></p><p>编译报错，无法从远程下载文件，，重新点击 confifure 按钮 在 CMake 中，Where is the source code 添加 opencv 文件夹，即<code>/Opencv/opencv-4.5.4</code>（注意：如果<code>/Opencv/opencv-4.5.4</code> 下还有一层文件夹 <code>opencv-4.5.4</code>，请用<code>/Opencv/opencv-4.5.4/opencv-4.5.4</code>）；</p><p>在 CMake 中，Where to build the binaries 添加 build 文件夹，即<code>/Opencv/build</code></p><p>点击 configure，选择你使用的 <code>Visual Studio</code> 版本，选择平台（一般是 x64）</p><p>注意：如果这里版本选错，点击 <code>File &gt; DeleteCache</code>。再点击 <code>Configure</code> 重新选择。</p><p>点击 finish；</p><p>再次点击 configure，等待（过程中有文件下载，请先搭好梯子）</p><p>完成后，在编译选项中进行勾选。BUILD_CUDA_STUBS、OPENCV_DNN_CUDA、WITH_CUDA、OPENCV_ENABLE_NONFREE、build_opencv_world 打勾</p><p>找到编译选项 OPENCV_EXTRA_MODULES_PATH ，将 Value 设置为<code>/Opencv/opencv_contrib-4.5.4/modules</code>（即<code>/Opencv/opencv_contrib-4.5.4</code> 中的 <code>modules</code> 目录，注意中间有没有多一层文件夹）；</p><p>点击 configure，等待至出现 configuring done；</p><p>注：若报错，先查报错并修改后重试；若多次重试，仍报同一个错误，建议新建 build1。修改 Where to build the binaries 为<code>/Opencv/build1</code>；点击 <code>File &gt; DeleteCache</code>。再点击 Configure 重新开始。</p><p>点击 generate，等待至出现 generating done；</p><p>点击 open project。</p><p><img src="https://gitee.com/zmmlet/study-note/raw/master/images/Snipaste_2022-10-08_15-26-31.png" alt=""> 对照报错和日志文件可以看出，日志中提示我们手动下载缺失文件</p><p><img src="https://gitee.com/zmmlet/study-note/raw/master/images/Snipaste_2022-10-08_15-25-27.png" alt=""> 手动下载后修改文件命名，MD5 值+&#39;-&#39;+下载的文件名。比如 <code>opencv_videoio_ffmpeg_64.dll</code> 这个文件下载后凡在<code>.cache</code> 下的 <code>ffmpeg</code> 下，然后改名为 <code>b8120c07962d591e2e9071a1bf566fd0-opencv_videoio_ffmpeg_64.dll</code> 替换原来 <code>0KB</code> 的那个文件</p><p><code>ffmpeg_version.cmake</code> 文件访问后，另存为 <code>txt</code> 文本，然后修改文件名称和后缀。</p><p><img src="https://gitee.com/zmmlet/study-note/raw/master/images/Snipaste_2022-10-08_15-24-42.png" alt=""><strong>下载失败文件搞定后，重新点击 configure，等待至出现 configuring done</strong></p><h2 id="程序和测试" tabindex="-1"><a class="header-anchor" href="#程序和测试" aria-hidden="true">#</a> 程序和测试</h2><h3 id="测试项目配置" tabindex="-1"><a class="header-anchor" href="#测试项目配置" aria-hidden="true">#</a> 测试项目配置</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgcodecs.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/highgui.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgproc.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token comment">//测试opencv 项目配置</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	string path <span class="token operator">=</span> <span class="token string">&quot;Resources/test.png&quot;</span><span class="token punctuation">;</span>
	Mat img <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image&quot;</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="图像、视频、网络摄像头" tabindex="-1"><a class="header-anchor" href="#图像、视频、网络摄像头" aria-hidden="true">#</a> 图像、视频、网络摄像头</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgcodecs.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/highgui.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgproc.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>


<span class="token comment">// 一、阅读图像、视频和网络摄像头</span>
<span class="token comment">// 1.加载图形</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	string path <span class="token operator">=</span> <span class="token string">&quot;Resources/test.png&quot;</span><span class="token punctuation">;</span>
	<span class="token comment">// Mat 基于 opencv 引用的矩阵数据类型</span>
	Mat img <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>


	<span class="token comment">// imshow 用于显示图像</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image&quot;</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 由于显示图像后会立刻关闭，所以waitKey(0) 表示无穷大 这样打开了不会关闭</span>
	<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>



<span class="token comment">// 2.加载视频:视频播放完成后，会出现一个错误，错误原因是没有可播放的图片了</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	string path <span class="token operator">=</span> <span class="token string">&quot;Resources/test_video.mp4&quot;</span><span class="token punctuation">;</span>
	<span class="token comment">// 视频捕获</span>
	VideoCapture <span class="token function">cap</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
	Mat img<span class="token punctuation">;</span>
	<span class="token comment">// 由于视频由一系列的图片组成，所以使用循环</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// 视频每一帧图片的渲染</span>
		cap<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// imshow 用于显示图像</span>
		<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image&quot;</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 由于显示图像后会立刻关闭，所以waitKey(0) 表示无穷大 这样打开了不会关闭</span>
		<span class="token comment">// waitKey() 数值越大播放越慢</span>
		<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>


<span class="token comment">// 3.加载网络摄像头</span>

<span class="token keyword">void</span> <span class="token function">mainVoid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// cap(1) 标识摄像头id</span>
	VideoCapture <span class="token function">cap</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Mat img<span class="token punctuation">;</span>
	由于视频由一系列的图片组成，所以使用循环
	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// 视频每一帧图片的渲染</span>
		cap<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// imshow 用于显示图像</span>
		<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image&quot;</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// waitKey() 数值越大播放越慢</span>
		<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="图像基本功能" tabindex="-1"><a class="header-anchor" href="#图像基本功能" aria-hidden="true">#</a> 图像基本功能</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgcodecs.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/highgui.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgproc.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>

<span class="token comment">// 转换图像颜色、高斯模糊、检测图像边缘、扩大图像、侵蚀图像</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	string path <span class="token operator">=</span> <span class="token string">&quot;Resources/test.png&quot;</span><span class="token punctuation">;</span>
	Mat img <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
	Mat imgGray<span class="token punctuation">,</span> imgBlur<span class="token punctuation">,</span> imgCanny<span class="token punctuation">,</span> imgDia<span class="token punctuation">,</span> imgErode<span class="token punctuation">;</span>
	<span class="token comment">// 转换图像颜色</span>
	<span class="token function">cvtColor</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> imgGray<span class="token punctuation">,</span> COLOR_BGR2GRAY<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 添加图像模糊-高斯模糊</span>
	<span class="token function">GaussianBlur</span><span class="token punctuation">(</span>imgGray<span class="token punctuation">,</span> imgBlur<span class="token punctuation">,</span> <span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// canny 图像边缘检测器</span>
	<span class="token function">Canny</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> imgCanny<span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// 扩大图像（加粗图像检查测边缘线条）</span>
	Mat kernel <span class="token operator">=</span> <span class="token function">getStructuringElement</span><span class="token punctuation">(</span>MORPH_RECT<span class="token punctuation">,</span> <span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">dilate</span><span class="token punctuation">(</span>imgCanny<span class="token punctuation">,</span> imgDia<span class="token punctuation">,</span> kernel<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// 侵蚀</span>
	<span class="token function">erode</span><span class="token punctuation">(</span>imgDia<span class="token punctuation">,</span> imgErode<span class="token punctuation">,</span> kernel<span class="token punctuation">)</span><span class="token punctuation">;</span>


	<span class="token comment">// 显示图像为正常颜色</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image&quot;</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 显示图像为灰色</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image Gray&quot;</span><span class="token punctuation">,</span> imgGray<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 显示高斯模糊图像</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image Blur&quot;</span><span class="token punctuation">,</span> imgBlur<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 显示检测图像边缘</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image Canny&quot;</span><span class="token punctuation">,</span> imgCanny<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 扩大图像（加粗图像检查测边缘线条）</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image Dilataion&quot;</span><span class="token punctuation">,</span> imgDia<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 侵蚀图像</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image Erode&quot;</span><span class="token punctuation">,</span> imgErode<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="调整大小并裁剪图像大小" tabindex="-1"><a class="header-anchor" href="#调整大小并裁剪图像大小" aria-hidden="true">#</a> 调整大小并裁剪图像大小</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgcodecs.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/highgui.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgproc.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	string path <span class="token operator">=</span> <span class="token string">&quot;Resources/test.png&quot;</span><span class="token punctuation">;</span>
	Mat img <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
	Mat imgResize<span class="token punctuation">,</span> imgCrop<span class="token punctuation">;</span>

	<span class="token comment">// 打印图像大小</span>
	cout <span class="token operator">&lt;&lt;</span> img<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	<span class="token comment">// 1.调整图像大小 -- 指定大小缩放</span>
	<span class="token comment">// resize(img, imgResize, Size(301,306));</span>
	<span class="token comment">// 调整图像大小 -- 按照百分比缩放，原图像为1</span>
	 <span class="token function">resize</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> imgResize<span class="token punctuation">,</span> <span class="token function">Size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	 <span class="token comment">//2.裁剪图像</span>
	 Rect <span class="token function">roi</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">250</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	 imgCrop <span class="token operator">=</span> <span class="token function">img</span><span class="token punctuation">(</span>roi<span class="token punctuation">)</span><span class="token punctuation">;</span>


	<span class="token comment">// 原图像大小</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image&quot;</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 调整后的图像大小</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image Resize&quot;</span><span class="token punctuation">,</span> imgResize<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 裁剪图像</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image Crop&quot;</span><span class="token punctuation">,</span> imgCrop<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="图形形状和文本" tabindex="-1"><a class="header-anchor" href="#图形形状和文本" aria-hidden="true">#</a> 图形形状和文本</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgcodecs.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/highgui.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgproc.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 创建空白图片</span>
	Mat <span class="token function">img</span><span class="token punctuation">(</span><span class="token number">521</span><span class="token punctuation">,</span><span class="token number">521</span><span class="token punctuation">,</span> CV_8UC3<span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 创建一个圆-边框厚度为10</span>
	<span class="token comment">//circle(img, Point(256, 256), 155, Scalar(255, 98, 0), 10);</span>


	<span class="token comment">// 创建一个圆-完全填充颜色</span>
	<span class="token function">circle</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">155</span><span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">98</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> FILLED<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 长方形</span>
	<span class="token function">rectangle</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">130</span><span class="token punctuation">,</span><span class="token number">226</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">283</span><span class="token punctuation">,</span><span class="token number">286</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> FILLED<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 创建一根线</span>
	<span class="token function">line</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">130</span><span class="token punctuation">,</span> <span class="token number">296</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">382</span><span class="token punctuation">,</span> <span class="token number">296</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 存放文本</span>
	<span class="token function">putText</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token string">&quot;workShopText&quot;</span><span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">137</span><span class="token punctuation">,</span> <span class="token number">262</span><span class="token punctuation">)</span><span class="token punctuation">,</span> FONT_HERSHEY_DUPLEX<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span><span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image&quot;</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="扭曲和透视" tabindex="-1"><a class="header-anchor" href="#扭曲和透视" aria-hidden="true">#</a> 扭曲和透视</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgcodecs.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/highgui.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgproc.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>

<span class="token keyword">float</span> w <span class="token operator">=</span> <span class="token number">250</span><span class="token punctuation">,</span> h <span class="token operator">=</span> <span class="token number">350</span><span class="token punctuation">;</span><span class="token comment">//图片大小</span>
Mat matrix<span class="token punctuation">,</span> imgWarp<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">//图片用画图打开，在屏幕左下角会显示点的坐标</span>
	string path <span class="token operator">=</span> <span class="token string">&quot;Resources/cards.jpg&quot;</span><span class="token punctuation">;</span>
	Mat img<span class="token operator">=</span><span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//matrix data type 由opencv引入来处理图像</span>
	Point2f src<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">{</span><span class="token number">529</span><span class="token punctuation">,</span><span class="token number">142</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">771</span><span class="token punctuation">,</span><span class="token number">190</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">405</span><span class="token punctuation">,</span><span class="token number">395</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">674</span><span class="token punctuation">,</span><span class="token number">457</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//Point2f表示浮点数</span>
	Point2f dst<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">{</span><span class="token number">0.0f</span><span class="token punctuation">,</span><span class="token number">0.0f</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>w<span class="token punctuation">,</span><span class="token number">0.0f</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0.0f</span><span class="token punctuation">,</span>h<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>w<span class="token punctuation">,</span>h<span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//Point2f表示浮点数</span>

	matrix <span class="token operator">=</span> <span class="token function">getPerspectiveTransform</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> dst<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">warpPerspective</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> imgWarp<span class="token punctuation">,</span> matrix<span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span>h<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//确定src坐标是否正确</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">circle</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> src<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> FILLED<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image&quot;</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image Warp&quot;</span><span class="token punctuation">,</span> imgWarp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//增加延时，0表示无穷</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="颜色检测" tabindex="-1"><a class="header-anchor" href="#颜色检测" aria-hidden="true">#</a> 颜色检测</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgcodecs.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/highgui.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgproc.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>

Mat imgHSV<span class="token punctuation">,</span> mask<span class="token punctuation">;</span>
<span class="token keyword">int</span> hmin <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> smin <span class="token operator">=</span> <span class="token number">110</span><span class="token punctuation">,</span> vmin <span class="token operator">=</span> <span class="token number">153</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> hmax <span class="token operator">=</span> <span class="token number">19</span><span class="token punctuation">,</span> smax <span class="token operator">=</span> <span class="token number">240</span><span class="token punctuation">,</span> vmax <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span> <span class="token comment">// 如何确定这6个值，每次都更改所有这些再次运行很痛苦 --&gt;创建跟踪栏（使我们可以实时更改这些值）</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	string path <span class="token operator">=</span> <span class="token string">&quot;Resources/shapes.png&quot;</span><span class="token punctuation">;</span>
	Mat img <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 转换图像到HSV空间，在其中查找颜色更加容易</span>
	<span class="token function">cvtColor</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> imgHSV<span class="token punctuation">,</span> COLOR_BGR2HSV<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// 创建控制窗口</span>
	<span class="token function">namedWindow</span><span class="token punctuation">(</span><span class="token string">&quot;Trackbars&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">640</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// 控制图现象显示 运行时，把3个min的都移到最小值，把3个max的都移到最大值，然后移动使其保持为白色</span>
	<span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">&quot;Hue Min&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Trackbars&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>hmin<span class="token punctuation">,</span> <span class="token number">179</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 对于hue色相饱和度最大180,对于另外两个色相饱和度最大255</span>
	<span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">&quot;Hue Max&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Trackbars&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>hmax<span class="token punctuation">,</span> <span class="token number">179</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">&quot;Sat Min&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Trackbars&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>smin<span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">&quot;Sat Max&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Trackbars&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>smax<span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">&quot;Val Min&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Trackbars&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>vmin<span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">&quot;Val Max&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Trackbars&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>vmax<span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token comment">//检查数组元素是否位于其他两个数组的元素之间。</span>
		Scalar <span class="token function">lower</span><span class="token punctuation">(</span>hmin<span class="token punctuation">,</span> smin<span class="token punctuation">,</span> vmin<span class="token punctuation">)</span><span class="token punctuation">;</span>
		Scalar <span class="token function">upper</span><span class="token punctuation">(</span>hmax<span class="token punctuation">,</span> smax<span class="token punctuation">,</span> vmax<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// imgHSV为输入图像，mask为输出图像</span>
		<span class="token function">inRange</span><span class="token punctuation">(</span>imgHSV<span class="token punctuation">,</span> lower<span class="token punctuation">,</span> upper<span class="token punctuation">,</span> mask<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image&quot;</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image HSV&quot;</span><span class="token punctuation">,</span> imgHSV<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image HSV&quot;</span><span class="token punctuation">,</span> imgHSV<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image Mask&quot;</span><span class="token punctuation">,</span> mask<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="形状轮廓检测" tabindex="-1"><a class="header-anchor" href="#形状轮廓检测" aria-hidden="true">#</a> 形状轮廓检测</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgcodecs.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/highgui.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgproc.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>

<span class="token comment">// 接收图像 Mat 数据类型在 opencv 中是矩阵数据</span>
Mat imgGray<span class="token punctuation">,</span> imgBlur<span class="token punctuation">,</span> imgCanny<span class="token punctuation">,</span> imgDil<span class="token punctuation">,</span> imgErode<span class="token punctuation">;</span>


<span class="token comment">//imgDil是传入的扩张边缘的图像用来查找轮廓，img是要在其上绘制轮廓的图像</span>
<span class="token keyword">void</span> <span class="token function">getContours</span><span class="token punctuation">(</span>Mat imgDil<span class="token punctuation">,</span> Mat img<span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">/*{
		{Point(20,30),Point(50,60)},
		{},
		{}
	}*/</span>
	<span class="token comment">// 轮廓检测到的轮廓。每个轮廓线存储为一个点的向量</span>
	vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span>Point<span class="token operator">&gt;&gt;</span> contours<span class="token punctuation">;</span>
	<span class="token comment">// 包含关于映像拓扑的信息  typedef Vec&lt;int, 4&gt; Vec4i;具有4个整数值</span>
	vector<span class="token operator">&lt;</span>Vec4i<span class="token operator">&gt;</span> hierarchy<span class="token punctuation">;</span>
	<span class="token comment">// 在二值图像中查找轮廓。该函数利用该算法从二值图像中提取轮廓</span>
	<span class="token function">findContours</span><span class="token punctuation">(</span>imgDil<span class="token punctuation">,</span> contours<span class="token punctuation">,</span> hierarchy<span class="token punctuation">,</span> RETR_EXTERNAL<span class="token punctuation">,</span> CHAIN_APPROX_SIMPLE<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// img：要绘制轮廓在什么图片上，contours：要绘制的轮廓，-1定义要绘制的轮廓号（-1表示所有轮廓），Saclar表示轮廓颜色，2表示厚度</span>
	<span class="token comment">// drawContours(img, contours, -1, Scalar(255, 0, 255), 4);</span>

	vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span>Point<span class="token operator">&gt;&gt;</span> <span class="token function">conPoly</span><span class="token punctuation">(</span>contours<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//conploy的数量应小于contours</span>
	vector<span class="token operator">&lt;</span>Rect<span class="token operator">&gt;</span> <span class="token function">boundRect</span><span class="token punctuation">(</span>contours<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//过滤器：通过轮廓面积来过滤噪声</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> contours<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//遍历检测到的轮廓</span>
		<span class="token keyword">int</span> area <span class="token operator">=</span> <span class="token function">contourArea</span><span class="token punctuation">(</span>contours<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;area:&quot;</span> <span class="token operator">&lt;&lt;</span> area <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

		string objectType<span class="token punctuation">;</span>
		<span class="token comment">// 轮廓面积＞1000才绘制</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>area <span class="token operator">&gt;</span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">//计算轮廓周长或凹坑长度。该函数计算了曲线长度和封闭的周长。</span>
			<span class="token keyword">float</span> peri <span class="token operator">=</span> <span class="token function">arcLength</span><span class="token punctuation">(</span>contours<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//计算封闭轮廓周长</span>
			<span class="token comment">// 以指定的精度近似多边形曲线。第二个参数conPloy[i]存储近似的结果，是输出。</span>

			<span class="token comment">/*
				approxPolyDP()函数是opencv中对指定的点集进行多边形逼近的函数，其逼近的精度可通过参数设置。
				第三个参数double epsilon：指定的精度，也即是原始曲线与近似曲线之间的最大距离。
				第四个参数bool closed：若为true，则说明近似曲线是闭合的；反之，若为false，则断开
			*/</span>
			<span class="token function">approxPolyDP</span><span class="token punctuation">(</span>contours<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> conPoly<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0.02</span> <span class="token operator">*</span> peri<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//计算边界矩形</span>
			boundRect<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">boundingRect</span><span class="token punctuation">(</span>conPoly<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//找近似多边形的角点,三角形有3个角点，矩形/正方形有4个角点，圆形&gt;4个角点</span>
			<span class="token keyword">int</span> objCor <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>conPoly<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;图形存在几个顶点：&quot;</span> <span class="token operator">&lt;&lt;</span> objCor <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
			<span class="token comment">// 为不同顶点的图形添加类型</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>objCor <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> objectType <span class="token operator">=</span> <span class="token string">&quot;Tri&quot;</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
			<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>objCor <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">//宽高比</span>
				<span class="token keyword">float</span> aspRatio <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span>boundRect<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span>boundRect<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>height<span class="token punctuation">;</span>
				<span class="token comment">//矩形的宽高比不会正好等于1</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>aspRatio <span class="token operator">&gt;</span> <span class="token number">0.95</span> <span class="token operator">&amp;&amp;</span> aspRatio <span class="token operator">&lt;</span> <span class="token number">1.05</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					objectType <span class="token operator">=</span> <span class="token string">&quot;Square&quot;</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token keyword">else</span> objectType <span class="token operator">=</span> <span class="token string">&quot;Rect&quot;</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>objCor <span class="token operator">&gt;</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> objectType <span class="token operator">=</span> <span class="token string">&quot;Circle&quot;</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

			<span class="token function">drawContours</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> conPoly<span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			rectangle<span class="token comment">/*绘制边界矩形*/</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> boundRect<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">tl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">/*tl()：topleft矩形左上角坐标*/</span><span class="token punctuation">,</span> boundRect<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">br</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">/*br()：bottom right矩形右下角坐标*/</span><span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">putText</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> objectType<span class="token punctuation">,</span> <span class="token punctuation">{</span> boundRect<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span>boundRect<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">-</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token comment">/*文字坐标*/</span><span class="token punctuation">,</span> FONT_HERSHEY_PLAIN<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">69</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	string path <span class="token operator">=</span> <span class="token string">&quot;Resources/shapes.png&quot;</span><span class="token punctuation">;</span>
	Mat img <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">/* 图像经过处理称为：预处理 */</span>
	<span class="token comment">// 转换图像颜色</span>
	<span class="token function">cvtColor</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> imgGray<span class="token punctuation">,</span> COLOR_BGR2GRAY<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 添加图像模糊-高斯模糊</span>
	<span class="token function">GaussianBlur</span><span class="token punctuation">(</span>imgGray<span class="token punctuation">,</span> imgBlur<span class="token punctuation">,</span> <span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// canny 图像边缘检测器</span>
	<span class="token function">Canny</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> imgCanny<span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 扩大图像（加粗图像检查测边缘线条）创建一个核，增加Size（只能是奇数）会扩张/侵蚀更多</span>
	Mat kernel <span class="token operator">=</span> <span class="token function">getStructuringElement</span><span class="token punctuation">(</span>MORPH_RECT<span class="token punctuation">,</span> <span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">dilate</span><span class="token punctuation">(</span>imgCanny<span class="token punctuation">,</span> imgDil<span class="token punctuation">,</span> kernel<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//img是在其上绘轮廓的图片</span>
	<span class="token function">getContours</span><span class="token punctuation">(</span>imgDil<span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>


	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image&quot;</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//imshow(&quot;Image Gray&quot;, imgGray);</span>
	<span class="token comment">//imshow(&quot;Image Blur&quot;, imgBlur);</span>
	<span class="token comment">//imshow(&quot;Image Canny&quot;, imgCanny);</span>
	<span class="token comment">//imshow(&quot;Image Dil&quot;, imgDil);</span>
	<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="人脸检测" tabindex="-1"><a class="header-anchor" href="#人脸检测" aria-hidden="true">#</a> 人脸检测</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgcodecs.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/highgui.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgproc.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/objdetect.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	string path <span class="token operator">=</span> <span class="token string">&quot;Resources/test.png&quot;</span><span class="token punctuation">;</span>
	Mat img <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// 加载人脸检测训练模型</span>
	CascadeClassifier faceCascade<span class="token punctuation">;</span>
	faceCascade<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">&quot;Resources/haarcascade_frontalface_default.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 判断是否为空</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>faceCascade<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;XML文件未加载&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token punctuation">}</span>
	<span class="token comment">// 创建矩形变量，用于标识人脸</span>
	vector<span class="token operator">&lt;</span>Rect<span class="token operator">&gt;</span> faces<span class="token punctuation">;</span>
	<span class="token comment">// 使用人脸级连点检测多尺度方法</span>
	faceCascade<span class="token punctuation">.</span><span class="token function">detectMultiScale</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> faces<span class="token punctuation">,</span> <span class="token number">1.1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 遍历人脸</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> faces<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">/*
		rectangle 绘制边界矩形
			tl()：topleft矩形左上角坐标
			br()：bottom right矩形右下角坐标
		*/</span>
		<span class="token function">rectangle</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> faces<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">tl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> faces<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">br</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image&quot;</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="检测物体轮廓" tabindex="-1"><a class="header-anchor" href="#检测物体轮廓" aria-hidden="true">#</a> 检测物体轮廓</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;opencv2/imgcodecs.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;opencv2/highgui.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;opencv2/imgproc.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>


<span class="token comment">/// &lt;summary&gt;</span>
<span class="token comment">/// Project 1</span>
<span class="token comment">/// 使用HSV空间检测颜色、找到轮廓所在位置、取轮廓的位置然后创建一个圆</span>
<span class="token comment">/// &lt;/summary&gt;</span>

Mat img<span class="token punctuation">;</span>
vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span> newPoints<span class="token punctuation">;</span>

vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span> myColors<span class="token punctuation">{</span> <span class="token punctuation">{</span><span class="token number">98</span><span class="token punctuation">,</span><span class="token number">109</span><span class="token punctuation">,</span><span class="token number">54</span><span class="token punctuation">,</span><span class="token number">127</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token comment">//蓝色（hmin smin vmin hmax smax vmax）</span>
								<span class="token punctuation">{</span><span class="token number">35</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">77</span><span class="token punctuation">,</span><span class="token number">245</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//绿色（hmin smin vmin hmax smax vmax）</span>

vector<span class="token operator">&lt;</span>Scalar<span class="token operator">&gt;</span> myColorValues<span class="token punctuation">{</span> <span class="token punctuation">{</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token comment">//蓝色</span>
								<span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//绿色</span>

<span class="token comment">//! 获取轮廓</span>
Point <span class="token function">getContours</span><span class="token punctuation">(</span>Mat imgDil<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//imgDil是传入的扩张边缘的图像用来查找轮廓，img是要在其上绘制轮廓的图像</span>
	vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span>Point<span class="token operator">&gt;&gt;</span> contours<span class="token punctuation">;</span><span class="token comment">//轮廓检测到的轮廓。每个轮廓线存储为一个点的向量</span>

	vector<span class="token operator">&lt;</span>Vec4i<span class="token operator">&gt;</span> hierarchy<span class="token punctuation">;</span><span class="token comment">//包含关于映像拓扑的信息  typedef Vec&lt;int, 4&gt; Vec4i;具有4个整数值</span>

	<span class="token comment">//在二值图像中查找轮廓。该函数利用该算法从二值图像中提取轮廓</span>
	<span class="token function">findContours</span><span class="token punctuation">(</span>imgDil<span class="token punctuation">,</span> contours<span class="token punctuation">,</span> hierarchy<span class="token punctuation">,</span> RETR_EXTERNAL<span class="token punctuation">,</span> CHAIN_APPROX_SIMPLE<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//drawContours(img, contours, -1, Scalar(255, 0, 255), 2);//img：要绘制轮廓在什么图片上，contours：要绘制的轮廓，-1定义要绘制的轮廓号（-1表示所有轮廓），Saclar表示轮廓颜色，2表示厚度</span>

	vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span>Point<span class="token operator">&gt;&gt;</span> <span class="token function">conPoly</span><span class="token punctuation">(</span>contours<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//conploy的数量应小于contours</span>
	vector<span class="token operator">&lt;</span>Rect<span class="token operator">&gt;</span> <span class="token function">boundRect</span><span class="token punctuation">(</span>contours<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	Point <span class="token function">myPoint</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//过滤器：通过轮廓面积来过滤噪声</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> contours<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//遍历检测到的轮廓</span>
		<span class="token keyword">int</span> area <span class="token operator">=</span> <span class="token function">contourArea</span><span class="token punctuation">(</span>contours<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">//cout &lt;&lt; area &lt;&lt; endl;</span>

		string objectType<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>area <span class="token operator">&gt;</span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//轮廓面积＞1000才绘制</span>
			<span class="token comment">//计算轮廓周长或凹坑长度。该函数计算了曲线长度和封闭的周长。</span>
			<span class="token keyword">float</span> peri <span class="token operator">=</span> <span class="token function">arcLength</span><span class="token punctuation">(</span>contours<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//计算封闭轮廓周长</span>
			<span class="token function">approxPolyDP</span><span class="token punctuation">(</span>contours<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> conPoly<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0.02</span> <span class="token operator">*</span> peri<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//以指定的精度近似多边形曲线。第二个参数conPloy[i]存储近似的结果，是输出。</span>

			boundRect<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">boundingRect</span><span class="token punctuation">(</span>conPoly<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//计算边界矩形</span>

			myPoint<span class="token punctuation">.</span>x <span class="token operator">=</span> boundRect<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">+</span> boundRect<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
			myPoint<span class="token punctuation">.</span>y <span class="token operator">=</span> boundRect<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">;</span>

			rectangle<span class="token comment">/*绘制边界矩形*/</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> boundRect<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">tl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">/*tl()：topleft矩形左上角坐标*/</span><span class="token punctuation">,</span> boundRect<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">br</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">/*br()：bottom right矩形右下角坐标*/</span><span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">drawContours</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> conPoly<span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> myPoint<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span> <span class="token function">findColor</span><span class="token punctuation">(</span>Mat img<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	Mat imgHSV<span class="token punctuation">;</span>
	<span class="token function">cvtColor</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> imgHSV<span class="token punctuation">,</span> COLOR_BGR2HSV<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//转换图像到HSV空间，在其中查找颜色更加容易</span>

	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> myColors<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		Scalar <span class="token function">lower</span><span class="token punctuation">(</span>myColors<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> myColors<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> myColors<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		Scalar <span class="token function">upper</span><span class="token punctuation">(</span>myColors<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> myColors<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> myColors<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		Mat mask<span class="token punctuation">;</span>
		<span class="token function">inRange</span><span class="token punctuation">(</span>imgHSV<span class="token punctuation">,</span> lower<span class="token punctuation">,</span> upper<span class="token punctuation">,</span> mask<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//定义颜色下限和上限，因为由于照明和不同的阴影，颜色的值将不完全相同，会是一个值的范围</span>
		<span class="token comment">//imshow(to_string(i), mask);</span>
		Point myPoint<span class="token operator">=</span><span class="token function">getContours</span><span class="token punctuation">(</span>mask<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>myPoint<span class="token punctuation">.</span>x <span class="token operator">!=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> myPoint<span class="token punctuation">.</span>y <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//没检测到东西的时候就不加入新点</span>
			newPoints<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token punctuation">{</span> myPoint<span class="token punctuation">.</span>x<span class="token punctuation">,</span>myPoint<span class="token punctuation">.</span>y<span class="token punctuation">,</span>i <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//i为颜色索引</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> newPoints<span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">drawOnCanvas</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span> newPoints<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span>Scalar<span class="token operator">&gt;</span> myColorValues<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> newPoints<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">circle</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span>newPoints<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> newPoints<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span>myColorValues<span class="token punctuation">[</span>newPoints<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>FILLED<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">// 捕捉图像边框</span>
<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	VideoCapture <span class="token function">cap</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//相机id=0</span>


	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		cap<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>

		newPoints<span class="token operator">=</span><span class="token function">findColor</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">drawOnCanvas</span><span class="token punctuation">(</span>newPoints<span class="token punctuation">,</span>myColorValues<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image&quot;</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//增加延时 1ms，以免太慢</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="文件扫描仪" tabindex="-1"><a class="header-anchor" href="#文件扫描仪" aria-hidden="true">#</a> 文件扫描仪</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;opencv2/imgcodecs.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;opencv2/highgui.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;opencv2/imgproc.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>

<span class="token comment">/// &lt;summary&gt;</span>
<span class="token comment">/// Project 2 – Document Scanner</span>
<span class="token comment">/// 图像预处理：转换为灰度、添加模糊、使用Canny边缘检测器找到边缘（知道纸张在哪里）、基于纸张的坐标提取四个角得到顶视图</span>
<span class="token comment">/// &lt;/summary&gt;</span>

Mat imgOriginal<span class="token punctuation">,</span> imgGray<span class="token punctuation">,</span> imgBlur<span class="token punctuation">,</span> imgCanny<span class="token punctuation">,</span> imgDil<span class="token punctuation">,</span> imgErode<span class="token punctuation">,</span> imgThre<span class="token punctuation">,</span> imgWarp<span class="token punctuation">,</span> imgCrop<span class="token punctuation">;</span>
vector<span class="token operator">&lt;</span>Point<span class="token operator">&gt;</span> initialPoints<span class="token punctuation">,</span>docPoints<span class="token punctuation">;</span>
<span class="token keyword">float</span> w <span class="token operator">=</span> <span class="token number">420</span><span class="token punctuation">,</span> h <span class="token operator">=</span> <span class="token number">596</span><span class="token punctuation">;</span>
Mat <span class="token function">preProcessing</span><span class="token punctuation">(</span>Mat img<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">cvtColor</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> imgGray<span class="token punctuation">,</span> COLOR_BGR2GRAY<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//cvt是convert的缩写，将图像从一种颜色空间转换为另一种颜色空间。</span>
	<span class="token function">GaussianBlur</span><span class="token punctuation">(</span>imgGray<span class="token punctuation">,</span> imgBlur<span class="token punctuation">,</span><span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//使用高斯滤波器模糊图像。该函数将源图像与指定的高斯核进行卷积,Size(7,7)是核大小,数字越大越模糊</span>
	<span class="token function">Canny</span><span class="token punctuation">(</span>imgBlur<span class="token punctuation">,</span> imgCanny<span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">75</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//边缘检测，阈值1，2可调，目的：显示更多的边缘</span>

	Mat kernel <span class="token operator">=</span> <span class="token function">getStructuringElement</span><span class="token punctuation">(</span>MORPH_RECT<span class="token punctuation">,</span> <span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//创建一个核，增加Size（只能是奇数）会扩张/侵蚀更多</span>
	<span class="token function">dilate</span><span class="token punctuation">(</span>imgCanny<span class="token punctuation">,</span> imgDil<span class="token punctuation">,</span> kernel<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//扩张边缘（增加边缘厚度）</span>
	<span class="token comment">//erode(imgDil, imgErode, kernel);//侵蚀边缘（减小边缘厚度）</span>
	<span class="token keyword">return</span> imgDil<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

vector<span class="token operator">&lt;</span>Point<span class="token operator">&gt;</span><span class="token comment">/*返回纸张的4个角点*/</span> <span class="token function">getContours</span><span class="token punctuation">(</span>Mat imgDil<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//imgDil是传入的扩张边缘的图像用来查找轮廓，img是要在其上绘制轮廓的图像</span>
	vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span>Point<span class="token operator">&gt;&gt;</span> contours<span class="token punctuation">;</span><span class="token comment">//轮廓检测到的轮廓。每个轮廓线存储为一个点的向量</span>

	vector<span class="token operator">&lt;</span>Vec4i<span class="token operator">&gt;</span> hierarchy<span class="token punctuation">;</span><span class="token comment">//包含关于映像拓扑的信息  typedef Vec&lt;int, 4&gt; Vec4i;具有4个整数值</span>

	<span class="token comment">//在二值图像中查找轮廓。该函数利用该算法从二值图像中提取轮廓</span>
	<span class="token function">findContours</span><span class="token punctuation">(</span>imgDil<span class="token punctuation">,</span> contours<span class="token punctuation">,</span> hierarchy<span class="token punctuation">,</span> RETR_EXTERNAL<span class="token punctuation">,</span> CHAIN_APPROX_SIMPLE<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//drawContours(img, contours, -1, Scalar(255, 0, 255), 2);//img：要绘制轮廓在什么图片上，contours：要绘制的轮廓，-1定义要绘制的轮廓号（-1表示所有轮廓），Saclar表示轮廓颜色，2表示厚度</span>

	vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span>Point<span class="token operator">&gt;&gt;</span> <span class="token function">conPoly</span><span class="token punctuation">(</span>contours<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//conploy的数量应小于contours</span>
	vector<span class="token operator">&lt;</span>Rect<span class="token operator">&gt;</span> <span class="token function">boundRect</span><span class="token punctuation">(</span>contours<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	vector<span class="token operator">&lt;</span>Point<span class="token operator">&gt;</span> biggest<span class="token punctuation">;</span>
	<span class="token keyword">int</span> maxArea <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

	<span class="token comment">//过滤器：通过轮廓面积来过滤噪声</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> contours<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//遍历检测到的轮廓</span>
		<span class="token keyword">int</span> area <span class="token operator">=</span> <span class="token function">contourArea</span><span class="token punctuation">(</span>contours<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">//cout &lt;&lt; area &lt;&lt; endl;</span>

		string objectType<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>area <span class="token operator">&gt;</span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//轮廓面积＞1000才绘制</span>
			<span class="token comment">//计算轮廓周长或凹坑长度。该函数计算了曲线长度和封闭的周长。</span>
			<span class="token keyword">float</span> peri <span class="token operator">=</span> <span class="token function">arcLength</span><span class="token punctuation">(</span>contours<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//计算封闭轮廓周长</span>
			<span class="token function">approxPolyDP</span><span class="token punctuation">(</span>contours<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> conPoly<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0.02</span> <span class="token operator">*</span> peri<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//以指定的精度近似多边形曲线。第二个参数conPloy[i]存储近似的结果，是输出。</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>area <span class="token operator">&gt;</span> maxArea<span class="token operator">&amp;&amp;</span>conPoly<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				biggest <span class="token operator">=</span> <span class="token punctuation">{</span> conPoly<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>conPoly<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>conPoly<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>conPoly<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
				maxArea <span class="token operator">=</span> area<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">//rectangle/*绘制边界矩形*/(imgOriginal, boundRect[i].tl()/*tl()：topleft矩形左上角坐标*/, boundRect[i].br()/*br()：bottom right矩形右下角坐标*/, Scalar(0, 255, 0), 5);</span>
			<span class="token comment">//drawContours(imgOriginal, conPoly, i, Scalar(255, 0, 255), 2);</span>

		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> biggest<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">drawPoints</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>Point<span class="token operator">&gt;</span> points<span class="token punctuation">,</span> Scalar color<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> points<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">circle</span><span class="token punctuation">(</span>imgOriginal<span class="token punctuation">,</span> points<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> color<span class="token punctuation">,</span> FILLED<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">putText</span><span class="token punctuation">(</span>imgOriginal<span class="token punctuation">,</span> <span class="token function">to_string</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> points<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> FONT_HERSHEY_PLAIN<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> color<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

vector<span class="token operator">&lt;</span>Point<span class="token operator">&gt;</span> <span class="token function">reorder</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>Point<span class="token operator">&gt;</span> points<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//标记点的顺序会变，要确定一个顺序 0 1</span>
											<span class="token comment">//								 2 3</span>
	vector<span class="token operator">&lt;</span>Point<span class="token operator">&gt;</span> newPoints<span class="token punctuation">;</span>
	vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span>  sumPoints<span class="token punctuation">,</span> subPoints<span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		sumPoints<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>points<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">+</span> points<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
		subPoints<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>points<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">-</span> points<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	newPoints<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>points<span class="token punctuation">[</span>min_element<span class="token comment">/* find smallest element*/</span><span class="token punctuation">(</span>sumPoints<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> sumPoints<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">-</span>sumPoints<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	newPoints<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>points<span class="token punctuation">[</span>max_element<span class="token comment">/* find largest element*/</span><span class="token punctuation">(</span>subPoints<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> subPoints<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> subPoints<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	newPoints<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>points<span class="token punctuation">[</span>min_element<span class="token comment">/* find smallest element*/</span><span class="token punctuation">(</span>subPoints<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> subPoints<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> subPoints<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	newPoints<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>points<span class="token punctuation">[</span>max_element<span class="token comment">/* find largest element*/</span><span class="token punctuation">(</span>sumPoints<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> sumPoints<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> sumPoints<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> newPoints<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

Mat <span class="token function">getWarp</span><span class="token punctuation">(</span>Mat img<span class="token punctuation">,</span>vector<span class="token operator">&lt;</span>Point<span class="token operator">&gt;</span> points<span class="token punctuation">,</span><span class="token keyword">float</span> w<span class="token punctuation">,</span><span class="token keyword">float</span> h<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	Point2f src<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> points<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>points<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>points<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>points<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//Point2f表示浮点数</span>
	Point2f dst<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">{</span><span class="token number">0.0f</span><span class="token punctuation">,</span><span class="token number">0.0f</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>w<span class="token punctuation">,</span><span class="token number">0.0f</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0.0f</span><span class="token punctuation">,</span>h<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>w<span class="token punctuation">,</span>h<span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//Point2f表示浮点数</span>

	Mat matrix <span class="token operator">=</span> <span class="token function">getPerspectiveTransform</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> dst<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">warpPerspective</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> imgWarp<span class="token punctuation">,</span> matrix<span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span>h<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> imgWarp<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	string path <span class="token operator">=</span> <span class="token string">&quot;Resources/paper.jpg&quot;</span><span class="token punctuation">;</span>
	imgOriginal<span class="token operator">=</span><span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//resize(imgOriginal/*source*/, imgOriginal/*destination*/, Size()/*不定义尺寸*/, 0.5/*定义比例*/, 0.5/*定义比例*/);</span>

	<span class="token comment">//预处理</span>
	imgThre <span class="token operator">=</span> <span class="token function">preProcessing</span><span class="token punctuation">(</span>imgOriginal<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//获得轮廓--获得最大矩形</span>
	initialPoints<span class="token operator">=</span><span class="token function">getContours</span><span class="token punctuation">(</span>imgThre<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//drawPoints(initialPoints, Scalar(0, 0, 255));</span>
	docPoints <span class="token operator">=</span> <span class="token function">reorder</span><span class="token punctuation">(</span>initialPoints<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//drawPoints(docPoints, Scalar(0, 255, 0));</span>
	<span class="token comment">//扭曲</span>
	imgWarp <span class="token operator">=</span> <span class="token function">getWarp</span><span class="token punctuation">(</span>imgOriginal<span class="token punctuation">,</span> docPoints<span class="token punctuation">,</span> w<span class="token punctuation">,</span> h<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//裁剪多余的边--通过创建一个矩形</span>
	<span class="token keyword">int</span> cropValue <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
	Rect <span class="token function">roi</span><span class="token punctuation">(</span>cropValue<span class="token comment">/*每条边要减去的像素*/</span><span class="token punctuation">,</span> cropValue<span class="token punctuation">,</span> w <span class="token operator">-</span> <span class="token number">2</span> <span class="token operator">*</span> cropValue<span class="token comment">/*宽度*/</span><span class="token punctuation">,</span> h <span class="token operator">-</span> <span class="token number">2</span> <span class="token operator">*</span> cropValue<span class="token comment">/*高度*/</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	imgCrop <span class="token operator">=</span> <span class="token function">imgWarp</span><span class="token punctuation">(</span>roi<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image&quot;</span><span class="token punctuation">,</span> imgOriginal<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image Dilation&quot;</span><span class="token punctuation">,</span> imgThre<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image Warp&quot;</span><span class="token punctuation">,</span> imgWarp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image Crop&quot;</span><span class="token punctuation">,</span> imgCrop<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="车牌检测器" tabindex="-1"><a class="header-anchor" href="#车牌检测器" aria-hidden="true">#</a> 车牌检测器</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;opencv2/imgcodecs.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;opencv2/highgui.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;opencv2/imgproc.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;opencv2/objdetect.hpp&gt;</span><span class="token comment">//对象检测头文件</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>
<span class="token comment">/// &lt;summary&gt;</span>
<span class="token comment">/// Project 3 – License Plate(车牌) Detector 学习如何检测车牌和如何裁剪并保存这些区域</span>
<span class="token comment">/// &lt;/summary&gt;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	VideoCapture <span class="token function">cap</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//相机id=0</span>
	Mat img<span class="token punctuation">;</span>

	<span class="token comment">//加载模型</span>
	CascadeClassifier plateCascade<span class="token punctuation">;</span><span class="token comment">/*用于对象检测的级联分类器类*/</span>
	plateCascade<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">&quot;Resources/haarcascade_russian_plate_number.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//从文件加载分类器(已经训练好的模型)</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>plateCascade<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;XML file not loaded&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token comment">//检测文件是否加载成功</span>

	vector<span class="token operator">&lt;</span>Rect<span class="token operator">&gt;</span> plates<span class="token punctuation">;</span>

	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		cap<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//可以更改比例因子和最小邻居来调整检测成功率</span>
		plateCascade<span class="token punctuation">.</span><span class="token function">detectMultiScale</span><span class="token punctuation">(</span>img<span class="token comment">/*输入*/</span><span class="token punctuation">,</span> plates<span class="token comment">/*输出*/</span><span class="token punctuation">,</span> <span class="token number">1.1</span><span class="token comment">/*比例因子*/</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token comment">/*最小邻居*/</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//在输入图像中检测不同大小的对象。检测到的对象将以矩形列表的形式返回。</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> plates<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			Mat imgCrop <span class="token operator">=</span> <span class="token function">img</span><span class="token punctuation">(</span>plates<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//plates是矩形列表，plates[i]是矩形</span>
			<span class="token comment">//imshow(to_string(i), imgCrop);</span>
		<span class="token function">imwrite</span><span class="token punctuation">(</span><span class="token string">&quot;Resources/Plates/&quot;</span> <span class="token operator">+</span> <span class="token function">to_string</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;.png&quot;</span><span class="token punctuation">,</span> imgCrop<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">rectangle</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> plates<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">tl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> plates<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">br</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//绘制矩形</span>
		<span class="token punctuation">}</span>

		<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image&quot;</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//增加延时，0表示无穷</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="口罩识别" tabindex="-1"><a class="header-anchor" href="#口罩识别" aria-hidden="true">#</a> 口罩识别</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgcodecs.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/highgui.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgproc.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/objdetect.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// 创建摄像头连接 如果是只连接一个摄像头则默认0（包括笔记本电脑自带的摄像头），其余的外接可能需要更换数字</span>
	VideoCapture <span class="token function">cap</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Mat frame<span class="token punctuation">;</span> <span class="token comment">// 摄像头对象读取数据;</span>

	CascadeClassifier face_cascade<span class="token punctuation">,</span> nose_cascade<span class="token punctuation">,</span> mask_detector<span class="token punctuation">;</span>
	<span class="token comment">// 加载人脸检测训练模型</span>
	face_cascade<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">&quot;Resources/haarcascade_frontalface_alt2.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 加载人脸鼻子模型</span>
	nose_cascade<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">&quot;Resources/haarcascade_mcs_nose.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 加载口罩模型</span>
	mask_detector<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">&quot;Resources/mask.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 判断是否为空</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>face_cascade<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;人脸模型XML文件未加载&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token punctuation">}</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>nose_cascade<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;人脸鼻子模型XML文件未加载&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token punctuation">}</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>mask_detector<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;口罩模型XML文件未加载&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token punctuation">}</span>

	<span class="token comment">/*
	detectMultiScale函数。它可以检测出图片中所有的人脸，并将人脸用vector保存各个人脸的坐标、大小（用矩形表示），函数由分类器对象调用：
	void detectMultiScale(
		const Mat&amp; image,
		CV_OUT vector&lt;Rect&gt;&amp; objects,
		double scaleFactor = 1.1,
		int minNeighbors = 3,
		int flags = 0,
		Size minSize = Size(),
		Size maxSize = Size()
	);
	函数介绍：
	参数1：image--待检测图片，一般为灰度图像加快检测速度；
	参数2：objects--被检测物体的矩形框向量组；
	参数3：scaleFactor--表示在前后两次相继的扫描中，搜索窗口的比例系数。默认为1.1即每次搜索窗口依次扩大10%;
	参数4：minNeighbors--表示构成检测目标的相邻矩形的最小个数(默认为3个)。
			如果组成检测目标的小矩形的个数和小于 min_neighbors - 1 都会被排除。
			如果min_neighbors 为 0, 则函数不做任何操作就返回所有的被检候选矩形框，
			这种设定值一般用在用户自定义对检测结果的组合程序上；
	参数5：flags--要么使用默认值，要么使用CV_HAAR_DO_CANNY_PRUNING，如果设置为
			CV_HAAR_DO_CANNY_PRUNING，那么函数将会使用Canny边缘检测来排除边缘过多或过少的区域，
			因此这些区域通常不会是人脸所在区域；
	参数6、7：minSize和maxSize用来限制得到的目标区域的范围。
	*/</span>
	<span class="token comment">// 创建矩形并用于标识人脸</span>
	vector<span class="token operator">&lt;</span>Rect<span class="token operator">&gt;</span> faces<span class="token punctuation">,</span> masks<span class="token punctuation">,</span> noses<span class="token punctuation">;</span>

	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// 获取图片每一帧的数据</span>
		cap<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>frame<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 转换图像颜色</span>
		<span class="token comment">/*cvtColor(img, frame, COLOR_BGR2GRAY);*/</span>
		<span class="token comment">// 检测人脸，并转换为人脸参数</span>
		face_cascade<span class="token punctuation">.</span><span class="token function">detectMultiScale</span><span class="token punctuation">(</span>frame<span class="token punctuation">,</span> faces<span class="token punctuation">,</span> <span class="token number">1.2</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		mask_detector<span class="token punctuation">.</span><span class="token function">detectMultiScale</span><span class="token punctuation">(</span>frame<span class="token punctuation">,</span> masks<span class="token punctuation">,</span> <span class="token number">1.03</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		nose_cascade<span class="token punctuation">.</span><span class="token function">detectMultiScale</span><span class="token punctuation">(</span>frame<span class="token punctuation">,</span> noses<span class="token punctuation">,</span> <span class="token number">1.2</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 搜索人脸</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> faces<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
		<span class="token punctuation">{</span>
			<span class="token comment">/*
			rectangle 绘制边界矩形
				tl()：topleft矩形左上角坐标
				br()：bottom right矩形右下角坐标
			*/</span>
			<span class="token function">rectangle</span><span class="token punctuation">(</span>frame<span class="token punctuation">,</span> faces<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">tl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> faces<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">br</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 存放文本 TODO:Point() 坐标应该修改为动态</span>
			<span class="token function">putText</span><span class="token punctuation">(</span>frame<span class="token punctuation">,</span> <span class="token string">&quot;no_mask&quot;</span><span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">137</span><span class="token punctuation">,</span> <span class="token number">262</span><span class="token punctuation">)</span><span class="token punctuation">,</span> FONT_HERSHEY_DUPLEX<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// 搜索人脸鼻子</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> noses<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
		<span class="token punctuation">{</span>
			<span class="token function">rectangle</span><span class="token punctuation">(</span>frame<span class="token punctuation">,</span> noses<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">tl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> noses<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">br</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">putText</span><span class="token punctuation">(</span>frame<span class="token punctuation">,</span> <span class="token string">&quot;no_mask&quot;</span><span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">137</span><span class="token punctuation">,</span> <span class="token number">262</span><span class="token punctuation">)</span><span class="token punctuation">,</span> FONT_HERSHEY_DUPLEX<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// 搜索口罩</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> masks<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
		<span class="token punctuation">{</span>
			<span class="token function">rectangle</span><span class="token punctuation">(</span>frame<span class="token punctuation">,</span> masks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">tl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> masks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">br</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">putText</span><span class="token punctuation">(</span>frame<span class="token punctuation">,</span> <span class="token string">&quot;have_mask&quot;</span><span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">137</span><span class="token punctuation">,</span> <span class="token number">262</span><span class="token punctuation">)</span><span class="token punctuation">,</span> FONT_HERSHEY_DUPLEX<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// imshow 用于显示图像</span>
		<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image&quot;</span><span class="token punctuation">,</span> frame<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// waitKey() 数值越大播放越慢</span>
		<span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="去除票据印章及通道分离" tabindex="-1"><a class="header-anchor" href="#去除票据印章及通道分离" aria-hidden="true">#</a> 去除票据印章及通道分离</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/core/core.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/highgui/highgui.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgproc/imgproc.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">//定义相关变量</span>
	Mat srcImage<span class="token punctuation">,</span> newImage<span class="token punctuation">;</span>
	Mat srcImage_B<span class="token punctuation">,</span> srcImage_G<span class="token punctuation">,</span> srcImage_R<span class="token punctuation">;</span>
	<span class="token comment">//存放Mat的数组vector</span>
	vector<span class="token operator">&lt;</span>Mat<span class="token operator">&gt;</span> channels_BGR<span class="token punctuation">;</span>
	<span class="token comment">//读取原始图像并检查图像是否读取成功</span>
	string path <span class="token operator">=</span> <span class="token string">&quot;Resources/voucher.jfif&quot;</span><span class="token punctuation">;</span>
	srcImage <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>srcImage<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;读取图像有误，请重新输入正确路径！\n&quot;</span><span class="token punctuation">;</span>
		<span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;src原图像&quot;</span><span class="token punctuation">,</span> srcImage<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//在窗口显示原图像</span>
   <span class="token comment">//对加载的原图像进行通道分离，即把一个3通道图像转换成为3个单通道图像</span>
	<span class="token function">split</span><span class="token punctuation">(</span>srcImage<span class="token punctuation">,</span> channels_BGR<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//从数组中取出3种颜色,0通道为B分量，1通道为G分量，2通道为R分量。</span>
	srcImage_B <span class="token operator">=</span> channels_BGR<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	srcImage_G <span class="token operator">=</span> channels_BGR<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	srcImage_R <span class="token operator">=</span> channels_BGR<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;srcImage_B通道&quot;</span><span class="token punctuation">,</span> srcImage_B<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//分别显示R，G，B各个通道图像</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;srcImage_G通道&quot;</span><span class="token punctuation">,</span> srcImage_G<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;srcImage_R通道&quot;</span><span class="token punctuation">,</span> srcImage_R<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 全局二值化</span>
	Mat gray<span class="token punctuation">;</span>
	<span class="token function">cvtColor</span><span class="token punctuation">(</span>srcImage<span class="token punctuation">,</span> gray<span class="token punctuation">,</span> COLOR_BGR2GRAY<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> th <span class="token operator">=</span> <span class="token number">170</span><span class="token punctuation">;</span> <span class="token comment">//阈值要根据实际情况调整</span>
	Mat binary<span class="token punctuation">;</span>
	<span class="token comment">//CV_THRESH_BINARY代表阈值其中一种模式，下期会讲起阈值</span>
	<span class="token function">threshold</span><span class="token punctuation">(</span>gray<span class="token punctuation">,</span> binary<span class="token punctuation">,</span> th<span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> THRESH_BINARY<span class="token punctuation">)</span><span class="token punctuation">;</span>
	Mat red_binary<span class="token punctuation">;</span>
	<span class="token function">threshold</span><span class="token punctuation">(</span>srcImage_R<span class="token punctuation">,</span> red_binary<span class="token punctuation">,</span> th<span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> THRESH_BINARY<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;灰色图 + 阈值处理 &quot;</span><span class="token punctuation">,</span> binary<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;R通道+阈值处理&quot;</span><span class="token punctuation">,</span> red_binary<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 将3个单通道重新合并成一个三通道图像</span>
	<span class="token function">merge</span><span class="token punctuation">(</span>channels_BGR<span class="token punctuation">,</span> newImage<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;将R，G，B通道合并后的图像&quot;</span><span class="token punctuation">,</span> newImage<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="图像增强与图像去噪-图像分割之边缘检测" tabindex="-1"><a class="header-anchor" href="#图像增强与图像去噪-图像分割之边缘检测" aria-hidden="true">#</a> 图像增强与图像去噪，图像分割之边缘检测</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;opencv2/core/core.hpp&quot;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;opencv2/imgproc/imgproc.hpp&quot;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;opencv2/highgui/highgui.hpp&quot;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">//【1】以灰度模式读取原始图像并显示</span>
    string path <span class="token operator">=</span> <span class="token string">&quot;Resources/test.png&quot;</span><span class="token punctuation">;</span>
    Mat srcImage <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>srcImage<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;读取图片错误，请确定目录下是否有imread函数指定图片存在~！&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;原始图像&quot;</span><span class="token punctuation">,</span> srcImage<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//【2】将输入图像延扩到最佳的尺寸，边界用0补充</span>
    <span class="token comment">//离散傅里叶变换的运行速度与图片的尺寸有很大关系。</span>
    <span class="token comment">//当图像尺寸是2，3，5整数倍时，计算速度最快。getOptimalDFTSize就是获取最佳尺寸</span>
    <span class="token keyword">int</span> m <span class="token operator">=</span> <span class="token function">getOptimalDFTSize</span><span class="token punctuation">(</span>srcImage<span class="token punctuation">.</span>rows<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token function">getOptimalDFTSize</span><span class="token punctuation">(</span>srcImage<span class="token punctuation">.</span>cols<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//将添加的像素初始化为0.</span>
    Mat padded<span class="token punctuation">;</span>
    <span class="token comment">//copyMakeBorder（）函数的作用是扩充图像边界</span>
    <span class="token function">copyMakeBorder</span><span class="token punctuation">(</span>srcImage<span class="token punctuation">,</span> padded<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> m <span class="token operator">-</span> srcImage<span class="token punctuation">.</span>rows<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> n <span class="token operator">-</span> srcImage<span class="token punctuation">.</span>cols<span class="token punctuation">,</span> BORDER_CONSTANT<span class="token punctuation">,</span> <span class="token class-name">Scalar</span><span class="token double-colon punctuation">::</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//【3】为傅立叶变换的结果（复数）(实部和虚部)分配存储空间。</span>
    <span class="token comment">//将planes数组组合合并成一个多通道的数组complexI</span>
    <span class="token comment">//1.傅里叶结果是复数，这就是说对于每个原图像值，结果会有两个图像值</span>
    <span class="token comment">//2.频域值范围远远超过空间值范围，因此要将频域存储再float格式中。并多加一个通道储存复数部分</span>
    <span class="token comment">//3.什么是通道？请翻开第四篇文章谢谢，关注一下小嗷的公众号：aoxiaoji</span>
    Mat planes<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token generic-function"><span class="token function">Mat_</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>padded<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Mat</span><span class="token double-colon punctuation">::</span><span class="token function">zeros</span><span class="token punctuation">(</span>padded<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> CV_32F<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    Mat complexI<span class="token punctuation">;</span>
    <span class="token function">merge</span><span class="token punctuation">(</span>planes<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> complexI<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//【4】进行就地离散傅里叶变换</span>
    <span class="token function">dft</span><span class="token punctuation">(</span>complexI<span class="token punctuation">,</span> complexI<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//【5】将复数转换为幅值，即=&gt; log(1 + sqrt(Re(DFT(I))^2 + Im(DFT(I))^2))</span>
    <span class="token comment">//请翻开第四篇文章有讲通道分离split。谢谢，关注一下小嗷的公众号：aoxiaoji</span>
    <span class="token function">split</span><span class="token punctuation">(</span>complexI<span class="token punctuation">,</span> planes<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将多通道数组complexI分离成几个单通道数组，planes[0] = Re(DFT(I), planes[1] = Im(DFT(I))</span>
    <span class="token comment">//计算二维矢量的幅值</span>
    <span class="token function">magnitude</span><span class="token punctuation">(</span>planes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> planes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> planes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// planes[0] = magnitude</span>
    Mat magnitudeImage <span class="token operator">=</span> planes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">//【6】进行对数尺度(logarithmic scale)缩放</span>
    <span class="token comment">//将复数转换为幅值范围太大。高值显示为白点，而低值为黑点，高低值的变化无法有效分辨。为了在屏幕上凹显出高低变化的连续性，用对数尺度替代线性尺度</span>
    magnitudeImage <span class="token operator">+=</span> <span class="token class-name">Scalar</span><span class="token double-colon punctuation">::</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span>magnitudeImage<span class="token punctuation">,</span> magnitudeImage<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//求自然对数</span>
    <span class="token comment">//【7】剪切和重分布幅度图象限</span>
    <span class="token comment">//若有奇数行或奇数列，进行频谱裁剪</span>
    <span class="token comment">//第二步，为了提高处理速度延扩了图像，现在是剔除添加的像素。</span>
    <span class="token comment">//为了方便显示，也可以重新分布幅度图像象限位置，</span>
    <span class="token comment">//（注：将第五步得到的幅度图从中间划开，得到4张1/4子图象，将每张子图堪称幅度图的一个象限，重新分布，即将4个角点重叠到图片中心）</span>
    <span class="token comment">//这样的话原点（0，0）就位移到图像中心了</span>
    magnitudeImage <span class="token operator">=</span> <span class="token function">magnitudeImage</span><span class="token punctuation">(</span><span class="token function">Rect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> magnitudeImage<span class="token punctuation">.</span>cols <span class="token operator">&amp;</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> magnitudeImage<span class="token punctuation">.</span>rows <span class="token operator">&amp;</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//重新排列傅立叶图像中的象限，使得原点位于图像中心</span>
    <span class="token keyword">int</span> cx <span class="token operator">=</span> magnitudeImage<span class="token punctuation">.</span>cols <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> cy <span class="token operator">=</span> magnitudeImage<span class="token punctuation">.</span>rows <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
    Mat <span class="token function">q0</span><span class="token punctuation">(</span>magnitudeImage<span class="token punctuation">,</span> <span class="token function">Rect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> cx<span class="token punctuation">,</span> cy<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// ROI区域的左上</span>
    Mat <span class="token function">q1</span><span class="token punctuation">(</span>magnitudeImage<span class="token punctuation">,</span> <span class="token function">Rect</span><span class="token punctuation">(</span>cx<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> cx<span class="token punctuation">,</span> cy<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ROI区域的右上</span>
    Mat <span class="token function">q2</span><span class="token punctuation">(</span>magnitudeImage<span class="token punctuation">,</span> <span class="token function">Rect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> cy<span class="token punctuation">,</span> cx<span class="token punctuation">,</span> cy<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ROI区域的左下</span>
    Mat <span class="token function">q3</span><span class="token punctuation">(</span>magnitudeImage<span class="token punctuation">,</span> <span class="token function">Rect</span><span class="token punctuation">(</span>cx<span class="token punctuation">,</span> cy<span class="token punctuation">,</span> cx<span class="token punctuation">,</span> cy<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ROI区域的右下</span>
                                                  <span class="token comment">//交换象限（左上与右下进行交换）</span>
    Mat tmp<span class="token punctuation">;</span>
    q0<span class="token punctuation">.</span><span class="token function">copyTo</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    q3<span class="token punctuation">.</span><span class="token function">copyTo</span><span class="token punctuation">(</span>q0<span class="token punctuation">)</span><span class="token punctuation">;</span>
    tmp<span class="token punctuation">.</span><span class="token function">copyTo</span><span class="token punctuation">(</span>q3<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//交换象限（右上与左下进行交换）</span>
    q1<span class="token punctuation">.</span><span class="token function">copyTo</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    q2<span class="token punctuation">.</span><span class="token function">copyTo</span><span class="token punctuation">(</span>q1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    tmp<span class="token punctuation">.</span><span class="token function">copyTo</span><span class="token punctuation">(</span>q2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//【8】归一化，用0到1之间的浮点值将矩阵变换为可视的图像格式（部分幅度值仍然超过可显示范围[0,1].幅度归一化到可显示范围）</span>
    <span class="token comment">//此句代码的OpenCV2版为：</span>
    <span class="token comment">//normalize(magnitudeImage, magnitudeImage, 0, 1, CV_MINMAX);</span>
    <span class="token comment">//此句代码的OpenCV3版为:</span>
    <span class="token function">normalize</span><span class="token punctuation">(</span>magnitudeImage<span class="token punctuation">,</span> magnitudeImage<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> NORM_MINMAX<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//【9】显示效果图</span>
    <span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;频谱幅值&quot;</span><span class="token punctuation">,</span> magnitudeImage<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="图像噪声" tabindex="-1"><a class="header-anchor" href="#图像噪声" aria-hidden="true">#</a> 图像噪声</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cstdlib&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2\core\core.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2\highgui\highgui.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2\imgproc\imgproc.hpp&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
Mat <span class="token function">addSaltNoise</span><span class="token punctuation">(</span><span class="token keyword">const</span> Mat srcImage<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    string path <span class="token operator">=</span> <span class="token string">&quot;Resources/test.png&quot;</span><span class="token punctuation">;</span>
    Mat srcImage <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>srcImage<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;读入图像有误！&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">&quot;pause&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;原图像&quot;</span><span class="token punctuation">,</span> srcImage<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Mat dstImage <span class="token operator">=</span> <span class="token function">addSaltNoise</span><span class="token punctuation">(</span>srcImage<span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;添加椒盐噪声的图像&quot;</span><span class="token punctuation">,</span> dstImage<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//存储图像</span>
    <span class="token comment">//imwrite(&quot;salt_pepper_Image.jpg&quot;, dstImage);</span>
    <span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
Mat <span class="token function">addSaltNoise</span><span class="token punctuation">(</span><span class="token keyword">const</span> Mat srcImage<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">//克隆一张一摸一样的图</span>
    Mat dstImage <span class="token operator">=</span> srcImage<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//随机取值行</span>
        <span class="token comment">//rand()是伪随机数生成函数，%是模运算，这个表达式的作用是随机生成012三个数字中的一个。</span>
        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> dstImage<span class="token punctuation">.</span>rows<span class="token punctuation">;</span>
        <span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> dstImage<span class="token punctuation">.</span>cols<span class="token punctuation">;</span>
        <span class="token comment">//图像通道判定</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>dstImage<span class="token punctuation">.</span><span class="token function">channels</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token comment">// at类中的at方法对于获取图像矩阵某点的RGB值或者改变某点的值很方便</span>
            <span class="token comment">//对于单通道的图像，则可以使用：</span>
            <span class="token comment">//    如：XXX.at&lt;uchar&gt;(i, j) = 255（因为单通道（灰度图），由黑到白）</span>
            <span class="token comment">//    （坐标(i, j)上，像素点的值为白色）</span>
            <span class="token comment">//    对于多通道的图像（BGR），如</span>

            <span class="token comment">//    img.at&lt;Vec3b&gt;(14, 25)[0] = 25;//B</span>
            <span class="token comment">//img.at&lt; Vec3b &gt;(14, 25)[1] = 25;//G</span>
            <span class="token comment">//img.at&lt; Vec3b &gt;(14, 25[2] = 25;//R</span>
            dstImage<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span>       <span class="token comment">//盐噪声</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span>
        <span class="token punctuation">{</span>
            dstImage<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span>
            dstImage<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span>
            dstImage<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//随机取值行列</span>
        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> dstImage<span class="token punctuation">.</span>rows<span class="token punctuation">;</span>
        <span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> dstImage<span class="token punctuation">.</span>cols<span class="token punctuation">;</span>
        <span class="token comment">//图像通道判定</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>dstImage<span class="token punctuation">.</span><span class="token function">channels</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            dstImage<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>     <span class="token comment">//椒噪声</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span>
        <span class="token punctuation">{</span>
            dstImage<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            dstImage<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            dstImage<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> dstImage<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="视频运动目标捕捉" tabindex="-1"><a class="header-anchor" href="#视频运动目标捕捉" aria-hidden="true">#</a> 视频运动目标捕捉</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/opencv.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/highgui.hpp&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

Mat <span class="token function">moveCheck</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> frontFrame<span class="token punctuation">,</span> Mat<span class="token operator">&amp;</span> afterFrame<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Mat frontGray<span class="token punctuation">,</span> afterGray<span class="token punctuation">,</span> diff<span class="token punctuation">;</span>
    Mat resFrame <span class="token operator">=</span> afterFrame<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//灰度处理,节省运算时间</span>
    <span class="token function">cvtColor</span><span class="token punctuation">(</span>frontFrame<span class="token punctuation">,</span> frontGray<span class="token punctuation">,</span> COLOR_BGR2GRAY<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">cvtColor</span><span class="token punctuation">(</span>afterFrame<span class="token punctuation">,</span> afterGray<span class="token punctuation">,</span> COLOR_BGR2GRAY<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//帧差处理  找到两帧之间运动物体差异</span>
    <span class="token comment">//缺点:会捕捉所有运动的物体,没办法专门捕捉某个目标</span>
    <span class="token function">absdiff</span><span class="token punctuation">(</span>frontGray<span class="token punctuation">,</span> afterGray<span class="token punctuation">,</span> diff<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//二值化: 使其变得更加黑白分明,便于计算,会产生噪点</span>
    <span class="token function">threshold</span><span class="token punctuation">(</span>diff<span class="token punctuation">,</span> diff<span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> THRESH_BINARY<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//腐蚀处理:去除大部分的白色噪点</span>
    Mat element <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">getStructuringElement</span><span class="token punctuation">(</span>MORPH_RECT<span class="token punctuation">,</span> <span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//小于4*4方块的白色噪点都会被腐蚀</span>
    <span class="token function">erode</span><span class="token punctuation">(</span>diff<span class="token punctuation">,</span> diff<span class="token punctuation">,</span> element<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//膨胀处理:将白色区域变&quot;胖&quot;,便于识别</span>
    Mat element2 <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">getStructuringElement</span><span class="token punctuation">(</span>MORPH_RECT<span class="token punctuation">,</span> <span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">dilate</span><span class="token punctuation">(</span>diff<span class="token punctuation">,</span> diff<span class="token punctuation">,</span> element2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//动态物体标记</span>
    vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span>Point<span class="token operator">&gt;&gt;</span>contours<span class="token punctuation">;</span><span class="token comment">//用于保存关键点</span>
    <span class="token comment">//findContours 第四个参数 CHAIN_APPROX_SIMPLE  用于压缩水平、垂直和对角线段，只留下它们的端点。例如，一个直立的矩形轮廓用 4 个点进行编码。</span>
    <span class="token function">findContours</span><span class="token punctuation">(</span>diff<span class="token punctuation">,</span> contours<span class="token punctuation">,</span> RETR_EXTERNAL<span class="token punctuation">,</span> CHAIN_APPROX_SIMPLE<span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//提取关键点</span>
    vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span>Point<span class="token operator">&gt;&gt;</span><span class="token function">contours_poly</span><span class="token punctuation">(</span>contours<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    vector<span class="token operator">&lt;</span>Rect<span class="token operator">&gt;</span><span class="token function">boundRect</span><span class="token punctuation">(</span>contours<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> w<span class="token punctuation">,</span> h<span class="token punctuation">;</span>
    <span class="token keyword">int</span> num <span class="token operator">=</span> contours<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> num<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">approxPolyDP</span><span class="token punctuation">(</span><span class="token function">Mat</span><span class="token punctuation">(</span>contours<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> contours_poly<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        boundRect<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">boundingRect</span><span class="token punctuation">(</span><span class="token function">Mat</span><span class="token punctuation">(</span>contours_poly<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        x <span class="token operator">=</span> boundRect<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">;</span>
        y <span class="token operator">=</span> boundRect<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">;</span>
        w <span class="token operator">=</span> boundRect<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>width<span class="token punctuation">;</span>
        h <span class="token operator">=</span> boundRect<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>height<span class="token punctuation">;</span>
        <span class="token comment">//绘制</span>
        <span class="token function">rectangle</span><span class="token punctuation">(</span>resFrame<span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span>x <span class="token operator">+</span> w<span class="token punctuation">,</span> y <span class="token operator">+</span> h<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> resFrame<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Mat frame<span class="token punctuation">;</span>

    Mat temp<span class="token punctuation">;</span>
    Mat res<span class="token punctuation">;</span>
    <span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    VideoCapture <span class="token function">cap</span><span class="token punctuation">(</span><span class="token string">&quot;Resources/test_video.mp4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>cap<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>frame<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        num<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span><span class="token comment">//如果为第一帧则把当前帧传入(即不产生效果)</span>

            res <span class="token operator">=</span> <span class="token function">moveCheck</span><span class="token punctuation">(</span>frame<span class="token punctuation">,</span> frame<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span>
        <span class="token punctuation">{</span><span class="token comment">//从第二帧开始才有差帧</span>
            res <span class="token operator">=</span> <span class="token function">moveCheck</span><span class="token punctuation">(</span>temp<span class="token punctuation">,</span> frame<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>
        temp <span class="token operator">=</span> frame<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//此处注意要调用.clone深拷贝,否则会出现两个画面一样的情况</span>
        <span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;frame&quot;</span><span class="token punctuation">,</span> frame<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;res&quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="马赛克原理之简单提高图像算法性能" tabindex="-1"><a class="header-anchor" href="#马赛克原理之简单提高图像算法性能" aria-hidden="true">#</a> 马赛克原理之简单提高图像算法性能</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">//      程序描述：来自一本国外OpenCV2书籍的示例-遍历图像像素的14种方法</span>
<span class="token comment">//------------------------------------------------------------------------------------------------</span>

<span class="token comment">/*------------------------------------------------------------------------------------------*\
This file contains material supporting chapter 2 of the cookbook:
Computer Vision Programming using the OpenCV Library.
by Robert Laganiere, Packt Publishing, 2011.

This program is free software; permission is hereby granted to use, copy, modify,
and distribute this source code, or portions thereof, for any purpose, without fee,
subject to the restriction that the copyright notice may not be removed
or altered from any source or altered source distribution.
The software is released on an as-is basis and without any warranties of any kind.
In particular, the software is not guaranteed to be fault-tolerant or free from failure.
The author disclaims all warranties with regard to this software, any use,
and any consequent failure, is purely the responsibility of the user.

Copyright (C) 2010-2011 Robert Laganiere, www.laganiere.name
\*------------------------------------------------------------------------------------------*/</span>

<span class="token comment">//---------------------------------【头文件、命名空间包含部分】-----------------------------</span>
<span class="token comment">//      描述：包含程序所使用的头文件和命名空间</span>
<span class="token comment">//-------------------------------------------------------------------------------------------------</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/core/core.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/highgui/highgui.hpp&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token comment">//---------------------------------【宏定义部分】---------------------------------------------</span>
<span class="token comment">//      描述：包含程序所使用宏定义</span>
<span class="token comment">//-------------------------------------------------------------------------------------------------</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">NTESTS</span> <span class="token expression"><span class="token number">14</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">NITERATIONS</span> <span class="token expression"><span class="token number">20</span></span></span>

<span class="token comment">//----------------------------------------- 【方法一】-------------------------------------------</span>
<span class="token comment">//      说明：利用.ptr 和 []</span>
<span class="token comment">//-------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> <span class="token function">colorReduce0</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> image<span class="token punctuation">,</span> <span class="token keyword">int</span> div <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">int</span> nl <span class="token operator">=</span> image<span class="token punctuation">.</span>rows<span class="token punctuation">;</span> <span class="token comment">//行数</span>
    <span class="token keyword">int</span> nc <span class="token operator">=</span> image<span class="token punctuation">.</span>cols <span class="token operator">*</span> image<span class="token punctuation">.</span><span class="token function">channels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//每行元素的总元素数量</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> nl<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>

        uchar<span class="token operator">*</span> data <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">ptr</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nc<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>

            <span class="token comment">//-------------开始处理每个像素-------------------</span>

            data<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">/</span> div <span class="token operator">*</span> div <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>

            <span class="token comment">//-------------结束像素处理------------------------</span>

        <span class="token punctuation">}</span> <span class="token comment">//单行处理结束</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//-----------------------------------【方法二】-------------------------------------------------</span>
<span class="token comment">//      说明：利用 .ptr 和 * ++</span>
<span class="token comment">//-------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> <span class="token function">colorReduce1</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> image<span class="token punctuation">,</span> <span class="token keyword">int</span> div <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">int</span> nl <span class="token operator">=</span> image<span class="token punctuation">.</span>rows<span class="token punctuation">;</span> <span class="token comment">//行数</span>
    <span class="token keyword">int</span> nc <span class="token operator">=</span> image<span class="token punctuation">.</span>cols <span class="token operator">*</span> image<span class="token punctuation">.</span><span class="token function">channels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//每行元素的总元素数量</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> nl<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>

        uchar<span class="token operator">*</span> data <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">ptr</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nc<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>

            <span class="token comment">//-------------开始处理每个像素-------------------</span>

            <span class="token operator">*</span>data<span class="token operator">++</span> <span class="token operator">=</span> <span class="token operator">*</span>data <span class="token operator">/</span> div <span class="token operator">*</span> div <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>

            <span class="token comment">//-------------结束像素处理------------------------</span>

        <span class="token punctuation">}</span> <span class="token comment">//单行处理结束</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//-----------------------------------------【方法三】-------------------------------------------</span>
<span class="token comment">//      说明：利用.ptr 和 * ++ 以及模操作</span>
<span class="token comment">//-------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> <span class="token function">colorReduce2</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> image<span class="token punctuation">,</span> <span class="token keyword">int</span> div <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">int</span> nl <span class="token operator">=</span> image<span class="token punctuation">.</span>rows<span class="token punctuation">;</span> <span class="token comment">//行数</span>
    <span class="token keyword">int</span> nc <span class="token operator">=</span> image<span class="token punctuation">.</span>cols <span class="token operator">*</span> image<span class="token punctuation">.</span><span class="token function">channels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//每行元素的总元素数量</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> nl<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>

        uchar<span class="token operator">*</span> data <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">ptr</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nc<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>

            <span class="token comment">//-------------开始处理每个像素-------------------</span>

            <span class="token keyword">int</span> v <span class="token operator">=</span> <span class="token operator">*</span>data<span class="token punctuation">;</span>
            <span class="token operator">*</span>data<span class="token operator">++</span> <span class="token operator">=</span> v <span class="token operator">-</span> v <span class="token operator">%</span> div <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>

            <span class="token comment">//-------------结束像素处理------------------------</span>

        <span class="token punctuation">}</span> <span class="token comment">//单行处理结束</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//----------------------------------------【方法四】---------------------------------------------</span>
<span class="token comment">//      说明：利用.ptr 和 * ++ 以及位操作</span>
<span class="token comment">//----------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> <span class="token function">colorReduce3</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> image<span class="token punctuation">,</span> <span class="token keyword">int</span> div <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">int</span> nl <span class="token operator">=</span> image<span class="token punctuation">.</span>rows<span class="token punctuation">;</span> <span class="token comment">//行数</span>
    <span class="token keyword">int</span> nc <span class="token operator">=</span> image<span class="token punctuation">.</span>cols <span class="token operator">*</span> image<span class="token punctuation">.</span><span class="token function">channels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//每行元素的总元素数量</span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//掩码值</span>
    uchar mask <span class="token operator">=</span> <span class="token number">0xFF</span> <span class="token operator">&lt;&lt;</span> n<span class="token punctuation">;</span> <span class="token comment">// e.g. 对于 div=16, mask= 0xF0</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> nl<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        uchar<span class="token operator">*</span> data <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">ptr</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nc<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token comment">//------------开始处理每个像素-------------------</span>

            <span class="token operator">*</span>data<span class="token operator">++</span> <span class="token operator">=</span> <span class="token operator">*</span>data <span class="token operator">&amp;</span> mask <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>

            <span class="token comment">//-------------结束像素处理------------------------</span>
        <span class="token punctuation">}</span>  <span class="token comment">//单行处理结束</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//----------------------------------------【方法五】----------------------------------------------</span>
<span class="token comment">//      说明：利用指针算术运算</span>
<span class="token comment">//---------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> <span class="token function">colorReduce4</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> image<span class="token punctuation">,</span> <span class="token keyword">int</span> div <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">int</span> nl <span class="token operator">=</span> image<span class="token punctuation">.</span>rows<span class="token punctuation">;</span> <span class="token comment">//行数</span>
    <span class="token keyword">int</span> nc <span class="token operator">=</span> image<span class="token punctuation">.</span>cols <span class="token operator">*</span> image<span class="token punctuation">.</span><span class="token function">channels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//每行元素的总元素数量</span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> step <span class="token operator">=</span> image<span class="token punctuation">.</span>step<span class="token punctuation">;</span> <span class="token comment">//有效宽度</span>
                           <span class="token comment">//掩码值</span>
    uchar mask <span class="token operator">=</span> <span class="token number">0xFF</span> <span class="token operator">&lt;&lt;</span> n<span class="token punctuation">;</span> <span class="token comment">// e.g. 对于 div=16, mask= 0xF0</span>

                            <span class="token comment">//获取指向图像缓冲区的指针</span>
    uchar<span class="token operator">*</span> data <span class="token operator">=</span> image<span class="token punctuation">.</span>data<span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> nl<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nc<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>

            <span class="token comment">//-------------开始处理每个像素-------------------</span>

            <span class="token operator">*</span><span class="token punctuation">(</span>data <span class="token operator">+</span> i<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token operator">*</span>data <span class="token operator">&amp;</span> mask <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>

            <span class="token comment">//-------------结束像素处理------------------------</span>

        <span class="token punctuation">}</span> <span class="token comment">//单行处理结束</span>

        data <span class="token operator">+=</span> step<span class="token punctuation">;</span>  <span class="token comment">// next line</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//---------------------------------------【方法六】----------------------------------------------</span>
<span class="token comment">//      说明：利用 .ptr 和 * ++以及位运算、image.cols * image.channels()</span>
<span class="token comment">//-------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> <span class="token function">colorReduce5</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> image<span class="token punctuation">,</span> <span class="token keyword">int</span> div <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">int</span> nl <span class="token operator">=</span> image<span class="token punctuation">.</span>rows<span class="token punctuation">;</span> <span class="token comment">//行数</span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//掩码值</span>
    uchar mask <span class="token operator">=</span> <span class="token number">0xFF</span> <span class="token operator">&lt;&lt;</span> n<span class="token punctuation">;</span> <span class="token comment">// e.g. 例如div=16, mask= 0xF0</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> nl<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>

        uchar<span class="token operator">*</span> data <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">ptr</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> image<span class="token punctuation">.</span>cols <span class="token operator">*</span> image<span class="token punctuation">.</span><span class="token function">channels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>

            <span class="token comment">//-------------开始处理每个像素-------------------</span>

            <span class="token operator">*</span>data<span class="token operator">++</span> <span class="token operator">=</span> <span class="token operator">*</span>data <span class="token operator">&amp;</span> mask <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>

            <span class="token comment">//-------------结束像素处理------------------------</span>

        <span class="token punctuation">}</span> <span class="token comment">//单行处理结束</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// -------------------------------------【方法七】----------------------------------------------</span>
<span class="token comment">//      说明：利用.ptr 和 * ++ 以及位运算(continuous)</span>
<span class="token comment">//-------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> <span class="token function">colorReduce6</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> image<span class="token punctuation">,</span> <span class="token keyword">int</span> div <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">int</span> nl <span class="token operator">=</span> image<span class="token punctuation">.</span>rows<span class="token punctuation">;</span> <span class="token comment">//行数</span>
    <span class="token keyword">int</span> nc <span class="token operator">=</span> image<span class="token punctuation">.</span>cols <span class="token operator">*</span> image<span class="token punctuation">.</span><span class="token function">channels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//每行元素的总元素数量</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>image<span class="token punctuation">.</span><span class="token function">isContinuous</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//无填充像素</span>
        nc <span class="token operator">=</span> nc <span class="token operator">*</span> nl<span class="token punctuation">;</span>
        nl <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">// 为一维数列</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//掩码值</span>
    uchar mask <span class="token operator">=</span> <span class="token number">0xFF</span> <span class="token operator">&lt;&lt;</span> n<span class="token punctuation">;</span> <span class="token comment">// e.g. 比如div=16, mask= 0xF0</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> nl<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        uchar<span class="token operator">*</span> data <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">ptr</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nc<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token comment">//-------------开始处理每个像素-------------------</span>

            <span class="token operator">*</span>data<span class="token operator">++</span> <span class="token operator">=</span> <span class="token operator">*</span>data <span class="token operator">&amp;</span> mask <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>

            <span class="token comment">//-------------结束像素处理------------------------</span>

        <span class="token punctuation">}</span> <span class="token comment">//单行处理结束</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//------------------------------------【方法八】------------------------------------------------</span>
<span class="token comment">//      说明：利用 .ptr 和 * ++ 以及位运算 (continuous+channels)</span>
<span class="token comment">//-------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> <span class="token function">colorReduce7</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> image<span class="token punctuation">,</span> <span class="token keyword">int</span> div <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">int</span> nl <span class="token operator">=</span> image<span class="token punctuation">.</span>rows<span class="token punctuation">;</span> <span class="token comment">//行数</span>
    <span class="token keyword">int</span> nc <span class="token operator">=</span> image<span class="token punctuation">.</span>cols<span class="token punctuation">;</span> <span class="token comment">//列数</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>image<span class="token punctuation">.</span><span class="token function">isContinuous</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//无填充像素</span>
        nc <span class="token operator">=</span> nc <span class="token operator">*</span> nl<span class="token punctuation">;</span>
        nl <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">// 为一维数组</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//掩码值</span>
    uchar mask <span class="token operator">=</span> <span class="token number">0xFF</span> <span class="token operator">&lt;&lt;</span> n<span class="token punctuation">;</span> <span class="token comment">// e.g. 比如div=16, mask= 0xF0</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> nl<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        uchar<span class="token operator">*</span> data <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">ptr</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nc<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token comment">//-------------开始处理每个像素-------------------</span>

            <span class="token operator">*</span>data<span class="token operator">++</span> <span class="token operator">=</span> <span class="token operator">*</span>data <span class="token operator">&amp;</span> mask <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token operator">*</span>data<span class="token operator">++</span> <span class="token operator">=</span> <span class="token operator">*</span>data <span class="token operator">&amp;</span> mask <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token operator">*</span>data<span class="token operator">++</span> <span class="token operator">=</span> <span class="token operator">*</span>data <span class="token operator">&amp;</span> mask <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>

            <span class="token comment">//-------------结束像素处理------------------------</span>

        <span class="token punctuation">}</span> <span class="token comment">//单行处理结束</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// -----------------------------------【方法九】 ------------------------------------------------</span>
<span class="token comment">//      说明：利用Mat_ iterator</span>
<span class="token comment">//-------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> <span class="token function">colorReduce8</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> image<span class="token punctuation">,</span> <span class="token keyword">int</span> div <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">//获取迭代器</span>
    Mat_<span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>iterator it <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">begin</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Mat_<span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>iterator itend <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">end</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> it <span class="token operator">!=</span> itend<span class="token punctuation">;</span> <span class="token operator">++</span>it<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">//-------------开始处理每个像素-------------------</span>

        <span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">/</span> div <span class="token operator">*</span> div <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">/</span> div <span class="token operator">*</span> div <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">/</span> div <span class="token operator">*</span> div <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>

        <span class="token comment">//-------------结束像素处理------------------------</span>
    <span class="token punctuation">}</span><span class="token comment">//单行处理结束</span>
<span class="token punctuation">}</span>

<span class="token comment">//-------------------------------------【方法十】-----------------------------------------------</span>
<span class="token comment">//      说明：利用Mat_ iterator以及位运算</span>
<span class="token comment">//-------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> <span class="token function">colorReduce9</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> image<span class="token punctuation">,</span> <span class="token keyword">int</span> div <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// div必须是2的幂</span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//掩码值</span>
    uchar mask <span class="token operator">=</span> <span class="token number">0xFF</span> <span class="token operator">&lt;&lt;</span> n<span class="token punctuation">;</span> <span class="token comment">// e.g. 比如 div=16, mask= 0xF0</span>

                            <span class="token comment">// 获取迭代器</span>
    Mat_<span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>iterator it <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">begin</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Mat_<span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>iterator itend <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">end</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//扫描所有元素</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> it <span class="token operator">!=</span> itend<span class="token punctuation">;</span> <span class="token operator">++</span>it<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>

        <span class="token comment">//-------------开始处理每个像素-------------------</span>

        <span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;</span> mask <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&amp;</span> mask <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">&amp;</span> mask <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>

        <span class="token comment">//-------------结束像素处理------------------------</span>
    <span class="token punctuation">}</span><span class="token comment">//单行处理结束</span>
<span class="token punctuation">}</span>

<span class="token comment">//------------------------------------【方法十一】---------------------------------------------</span>
<span class="token comment">//      说明：利用Mat Iterator_</span>
<span class="token comment">//-------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> <span class="token function">colorReduce10</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> image<span class="token punctuation">,</span> <span class="token keyword">int</span> div <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">//获取迭代器</span>
    Mat_<span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span> cimage <span class="token operator">=</span> image<span class="token punctuation">;</span>
    Mat_<span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>iterator it <span class="token operator">=</span> cimage<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Mat_<span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>iterator itend <span class="token operator">=</span> cimage<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> it <span class="token operator">!=</span> itend<span class="token punctuation">;</span> it<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">//-------------开始处理每个像素-------------------</span>

        <span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">/</span> div <span class="token operator">*</span> div <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">/</span> div <span class="token operator">*</span> div <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">/</span> div <span class="token operator">*</span> div <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>

        <span class="token comment">//-------------结束像素处理------------------------</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//--------------------------------------【方法十二】--------------------------------------------</span>
<span class="token comment">//      说明：利用动态地址计算配合at</span>
<span class="token comment">//-------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> <span class="token function">colorReduce11</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> image<span class="token punctuation">,</span> <span class="token keyword">int</span> div <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">int</span> nl <span class="token operator">=</span> image<span class="token punctuation">.</span>rows<span class="token punctuation">;</span> <span class="token comment">//行数</span>
    <span class="token keyword">int</span> nc <span class="token operator">=</span> image<span class="token punctuation">.</span>cols<span class="token punctuation">;</span> <span class="token comment">//列数</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> nl<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nc<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>

            <span class="token comment">//-------------开始处理每个像素-------------------</span>

            image<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>j<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>j<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">/</span> div <span class="token operator">*</span> div <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
            image<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>j<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>j<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">/</span> div <span class="token operator">*</span> div <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
            image<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>j<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>j<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">/</span> div <span class="token operator">*</span> div <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>

            <span class="token comment">//-------------结束像素处理------------------------</span>

        <span class="token punctuation">}</span> <span class="token comment">//单行处理结束</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//----------------------------------【方法十三】-----------------------------------------------</span>
<span class="token comment">//      说明：利用图像的输入与输出</span>
<span class="token comment">//-------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> <span class="token function">colorReduce12</span><span class="token punctuation">(</span><span class="token keyword">const</span> Mat<span class="token operator">&amp;</span> image<span class="token punctuation">,</span> <span class="token comment">//输入图像</span>
    Mat<span class="token operator">&amp;</span> result<span class="token punctuation">,</span>      <span class="token comment">// 输出图像</span>
    <span class="token keyword">int</span> div <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">int</span> nl <span class="token operator">=</span> image<span class="token punctuation">.</span>rows<span class="token punctuation">;</span> <span class="token comment">//行数</span>
    <span class="token keyword">int</span> nc <span class="token operator">=</span> image<span class="token punctuation">.</span>cols<span class="token punctuation">;</span> <span class="token comment">//列数</span>

                         <span class="token comment">//准备好初始化后的Mat给输出图像</span>
    result<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>image<span class="token punctuation">.</span>rows<span class="token punctuation">,</span> image<span class="token punctuation">.</span>cols<span class="token punctuation">,</span> image<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//创建无像素填充的图像</span>
    nc <span class="token operator">=</span> nc <span class="token operator">*</span> nl<span class="token punctuation">;</span>
    nl <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">//单维数组</span>

    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//掩码值</span>
    uchar mask <span class="token operator">=</span> <span class="token number">0xFF</span> <span class="token operator">&lt;&lt;</span> n<span class="token punctuation">;</span> <span class="token comment">// e.g.比如div=16, mask= 0xF0</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> nl<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        uchar<span class="token operator">*</span> data <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">ptr</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> uchar<span class="token operator">*</span> idata <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">ptr</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nc<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token comment">//-------------开始处理每个像素-------------------</span>

            <span class="token operator">*</span>data<span class="token operator">++</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>idata<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> mask <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token operator">*</span>data<span class="token operator">++</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>idata<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> mask <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token operator">*</span>data<span class="token operator">++</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>idata<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> mask <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>

            <span class="token comment">//-------------结束像素处理------------------------</span>

        <span class="token punctuation">}</span> <span class="token comment">//单行处理结束</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//--------------------------------------【方法十四】-------------------------------------------</span>
<span class="token comment">//      说明：利用操作符重载</span>
<span class="token comment">//-------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> <span class="token function">colorReduce13</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> image<span class="token punctuation">,</span> <span class="token keyword">int</span> div <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//掩码值</span>
    uchar mask <span class="token operator">=</span> <span class="token number">0xFF</span> <span class="token operator">&lt;&lt;</span> n<span class="token punctuation">;</span> <span class="token comment">// e.g. 比如div=16, mask= 0xF0</span>

                            <span class="token comment">//进行色彩还原</span>
    image <span class="token operator">=</span> <span class="token punctuation">(</span>image <span class="token operator">&amp;</span> <span class="token function">Scalar</span><span class="token punctuation">(</span>mask<span class="token punctuation">,</span> mask<span class="token punctuation">,</span> mask<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">Scalar</span><span class="token punctuation">(</span>div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 马赛克原理之简单提高图像算法性能（颜色空间缩减和计时函数）</span>

<span class="token comment">//-----------------------------------【main( )函数】--------------------------------------------</span>
<span class="token comment">//      描述：控制台应用程序的入口函数，我们的程序从这里开始</span>
<span class="token comment">//-------------------------------------------------------------------------------------------------</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    int64 t<span class="token punctuation">[</span>NTESTS<span class="token punctuation">]</span><span class="token punctuation">,</span> tinit<span class="token punctuation">;</span>
    Mat image0<span class="token punctuation">;</span>
    Mat image1<span class="token punctuation">;</span>
    Mat image2<span class="token punctuation">;</span>

    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">&quot;color 4F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    string path <span class="token operator">=</span>  <span class="token string">&quot;Resources/test.png&quot;</span><span class="token punctuation">;</span>

    image0 <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>image0<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot; could not image &quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//时间值设为0</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> NTESTS<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        t<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token comment">// 多次重复测试</span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> NITERATIONS<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> k <span class="token operator">&lt;&lt;</span> <span class="token string">&quot; of &quot;</span> <span class="token operator">&lt;&lt;</span> n <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

        image1 <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//【方法一】利用.ptr 和 []</span>
        tinit <span class="token operator">=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">colorReduce0</span><span class="token punctuation">(</span>image1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> tinit<span class="token punctuation">;</span>

        <span class="token comment">//【方法二】利用 .ptr 和 * ++</span>
        image1 <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tinit <span class="token operator">=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">colorReduce1</span><span class="token punctuation">(</span>image1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> tinit<span class="token punctuation">;</span>

        <span class="token comment">//【方法三】利用.ptr 和 * ++ 以及模操作</span>
        image1 <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tinit <span class="token operator">=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">colorReduce2</span><span class="token punctuation">(</span>image1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> tinit<span class="token punctuation">;</span>

        <span class="token comment">//【方法四】 利用.ptr 和 * ++ 以及位操作</span>
        image1 <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tinit <span class="token operator">=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">colorReduce3</span><span class="token punctuation">(</span>image1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> tinit<span class="token punctuation">;</span>

        <span class="token comment">//【方法五】 利用指针的算术运算</span>
        image1 <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tinit <span class="token operator">=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">colorReduce4</span><span class="token punctuation">(</span>image1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> tinit<span class="token punctuation">;</span>

        <span class="token comment">//【方法六】利用 .ptr 和 * ++以及位运算、image.cols * image.channels()</span>
        image1 <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tinit <span class="token operator">=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">colorReduce5</span><span class="token punctuation">(</span>image1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> tinit<span class="token punctuation">;</span>

        <span class="token comment">//【方法七】利用.ptr 和 * ++ 以及位运算(continuous)</span>
        image1 <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tinit <span class="token operator">=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">colorReduce6</span><span class="token punctuation">(</span>image1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> tinit<span class="token punctuation">;</span>

        <span class="token comment">//【方法八】利用 .ptr 和 * ++ 以及位运算 (continuous+channels)</span>
        image1 <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tinit <span class="token operator">=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">colorReduce7</span><span class="token punctuation">(</span>image1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> tinit<span class="token punctuation">;</span>

        <span class="token comment">//【方法九】 利用Mat_ iterator</span>
        image1 <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tinit <span class="token operator">=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">colorReduce8</span><span class="token punctuation">(</span>image1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> tinit<span class="token punctuation">;</span>

        <span class="token comment">//【方法十】 利用Mat_ iterator以及位运算</span>
        image1 <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tinit <span class="token operator">=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">colorReduce9</span><span class="token punctuation">(</span>image1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> tinit<span class="token punctuation">;</span>

        <span class="token comment">//【方法十一】利用Mat Iterator_</span>
        image1 <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tinit <span class="token operator">=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">colorReduce10</span><span class="token punctuation">(</span>image1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> tinit<span class="token punctuation">;</span>

        <span class="token comment">//【方法十二】 利用动态地址计算配合at</span>
        image1 <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tinit <span class="token operator">=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">colorReduce11</span><span class="token punctuation">(</span>image1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> tinit<span class="token punctuation">;</span>

        <span class="token comment">//【方法十三】 利用图像的输入与输出</span>
        image1 <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tinit <span class="token operator">=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Mat result<span class="token punctuation">;</span>
        <span class="token function">colorReduce12</span><span class="token punctuation">(</span>image1<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> tinit<span class="token punctuation">;</span>
        image2 <span class="token operator">=</span> result<span class="token punctuation">;</span>

        <span class="token comment">//【方法十四】 利用操作符重载</span>
        image1 <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tinit <span class="token operator">=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">colorReduce13</span><span class="token punctuation">(</span>image1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> tinit<span class="token punctuation">;</span>

        <span class="token comment">//------------------------------</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//输出图像</span>
    <span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;原始图像&quot;</span><span class="token punctuation">,</span> image0<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;结果&quot;</span><span class="token punctuation">,</span> image2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;图像结果&quot;</span><span class="token punctuation">,</span> image1<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 输出平均执行时间</span>
    cout <span class="token operator">&lt;&lt;</span> endl <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;-------------------------------------------&quot;</span> <span class="token operator">&lt;&lt;</span> endl <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\n【方法一】利用.ptr 和 []的方法所用时间为 &quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1000.</span> <span class="token operator">*</span> t<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token function">getTickFrequency</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> n <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;ms&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\n【方法二】利用 .ptr 和 * ++ 的方法所用时间为&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1000.</span> <span class="token operator">*</span> t<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token function">getTickFrequency</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> n <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;ms&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\n【方法三】利用.ptr 和 * ++ 以及模操作的方法所用时间为&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1000.</span> <span class="token operator">*</span> t<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token function">getTickFrequency</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> n <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;ms&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\n【方法四】利用.ptr 和 * ++ 以及位操作的方法所用时间为&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1000.</span> <span class="token operator">*</span> t<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token function">getTickFrequency</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> n <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;ms&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\n【方法五】利用指针算术运算的方法所用时间为&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1000.</span> <span class="token operator">*</span> t<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token function">getTickFrequency</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> n <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;ms&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\n【方法六】利用 .ptr 和 * ++以及位运算、channels()的方法所用时间为&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1000.</span> <span class="token operator">*</span> t<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token function">getTickFrequency</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> n <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;ms&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\n【方法七】利用.ptr 和 * ++ 以及位运算(continuous)的方法所用时间为&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1000.</span> <span class="token operator">*</span> t<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token function">getTickFrequency</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> n <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;ms&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\n【方法八】利用 .ptr 和 * ++ 以及位运算 (continuous+channels)的方法所用时间为&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1000.</span> <span class="token operator">*</span> t<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token function">getTickFrequency</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> n <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;ms&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\n【方法九】利用Mat_ iterator 的方法所用时间为&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1000.</span> <span class="token operator">*</span> t<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token function">getTickFrequency</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> n <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;ms&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\n【方法十】利用Mat_ iterator以及位运算的方法所用时间为&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1000.</span> <span class="token operator">*</span> t<span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token function">getTickFrequency</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> n <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;ms&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\n【方法十一】利用Mat Iterator_的方法所用时间为&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1000.</span> <span class="token operator">*</span> t<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token function">getTickFrequency</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> n <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;ms&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\n【方法十二】利用动态地址计算配合at 的方法所用时间为&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1000.</span> <span class="token operator">*</span> t<span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token function">getTickFrequency</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> n <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;ms&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\n【方法十三】利用图像的输入与输出的方法所用时间为&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1000.</span> <span class="token operator">*</span> t<span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token function">getTickFrequency</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> n <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;ms&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\n【方法十四】利用操作符重载的方法所用时间为&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1000.</span> <span class="token operator">*</span> t<span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token function">getTickFrequency</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> n <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;ms&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

    <span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="图像处理之线性滤波" tabindex="-1"><a class="header-anchor" href="#图像处理之线性滤波" aria-hidden="true">#</a> 图像处理之线性滤波</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">//---------------------------------【头文件、命名空间包含部分】-------------------------------</span>
<span class="token comment">//      描述：包含程序所使用的头文件和命名空间</span>
<span class="token comment">//------------------------------------------------------------------------------------------------</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/core/core.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/highgui/highgui.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgproc/imgproc.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>
<span class="token comment">//-----------------------------------【全局变量声明部分】--------------------------------------</span>
<span class="token comment">//  描述：全局变量声明</span>
<span class="token comment">//-----------------------------------------------------------------------------------------------</span>
Mat g_srcImage<span class="token punctuation">,</span> g_dstImage1<span class="token punctuation">,</span> g_dstImage2<span class="token punctuation">,</span> g_dstImage3<span class="token punctuation">;</span><span class="token comment">//存储图片的Mat类型</span>
<span class="token keyword">int</span> g_nBoxFilterValue <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>  <span class="token comment">//方框滤波参数值</span>
<span class="token keyword">int</span> g_nMeanBlurValue <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>  <span class="token comment">//均值滤波参数值</span>
<span class="token keyword">int</span> g_nGaussianBlurValue <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>  <span class="token comment">//高斯滤波参数值</span>
                               <span class="token comment">//-----------------------------------【全局函数声明部分】--------------------------------------</span>
                               <span class="token comment">//   描述：全局函数声明</span>
                               <span class="token comment">//-----------------------------------------------------------------------------------------------</span>
                               <span class="token comment">//四个轨迹条的回调函数</span>
<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">on_BoxFilter</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//均值滤波</span>
<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">on_MeanBlur</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//均值滤波</span>
<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">on_GaussianBlur</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">//高斯滤波</span>
<span class="token comment">//-----------------------------------【main( )函数】--------------------------------------------</span>
<span class="token comment">//  描述：控制台应用程序的入口函数，我们的程序从这里开始</span>
<span class="token comment">//-----------------------------------------------------------------------------------------------</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">//改变console字体颜色</span>
    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">&quot;color 5F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 载入原图</span>
    string path <span class="token operator">=</span> <span class="token string">&quot;Resources/test.png&quot;</span><span class="token punctuation">;</span>
    g_srcImage <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>g_srcImage<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;文件读取错误 \n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token comment">//克隆原图到三个Mat类型中</span>
    g_dstImage1 <span class="token operator">=</span> g_srcImage<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    g_dstImage2 <span class="token operator">=</span> g_srcImage<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    g_dstImage3 <span class="token operator">=</span> g_srcImage<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//显示原图</span>
    <span class="token function">namedWindow</span><span class="token punctuation">(</span><span class="token string">&quot;【&lt;0&gt;原图窗口】&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;【&lt;0&gt;原图窗口】&quot;</span><span class="token punctuation">,</span> g_srcImage<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//=================【&lt;1&gt;方框滤波】==================</span>
    <span class="token comment">//创建窗口</span>
    <span class="token function">namedWindow</span><span class="token punctuation">(</span><span class="token string">&quot;【&lt;1&gt;方框滤波】&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//创建轨迹条</span>
    <span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">&quot;内核值：&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;【&lt;1&gt;方框滤波】&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>g_nBoxFilterValue<span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> on_BoxFilter<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">on_BoxFilter</span><span class="token punctuation">(</span>g_nBoxFilterValue<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//================================================</span>
    <span class="token comment">//=================【&lt;2&gt;均值滤波】==================</span>
    <span class="token comment">//创建窗口</span>
    <span class="token function">namedWindow</span><span class="token punctuation">(</span><span class="token string">&quot;【&lt;2&gt;均值滤波】&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//创建轨迹条</span>
    <span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">&quot;内核值：&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;【&lt;2&gt;均值滤波】&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>g_nMeanBlurValue<span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> on_MeanBlur<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">on_MeanBlur</span><span class="token punctuation">(</span>g_nMeanBlurValue<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//================================================</span>
    <span class="token comment">//=================【&lt;3&gt;高斯滤波】=====================</span>
    <span class="token comment">//创建窗口</span>
    <span class="token function">namedWindow</span><span class="token punctuation">(</span><span class="token string">&quot;【&lt;3&gt;高斯滤波】&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//创建轨迹条</span>
    <span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">&quot;内核值：&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;【&lt;3&gt;高斯滤波】&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>g_nGaussianBlurValue<span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> on_GaussianBlur<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">on_GaussianBlur</span><span class="token punctuation">(</span>g_nGaussianBlurValue<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//================================================</span>
    <span class="token comment">//输出一些帮助信息</span>
    cout <span class="token operator">&lt;&lt;</span> endl <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\t运行成功，请调整滚动条观察图像效果~\n\n&quot;</span>
        <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\t按下“q”键时，程序退出。\n&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">//按下“q”键时，程序退出</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">(</span><span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token char">&#39;q&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//-----------------------------【on_BoxFilter( )函数】------------------------------------</span>
<span class="token comment">//  描述：方框滤波操作的回调函数</span>
<span class="token comment">//-----------------------------------------------------------------------------------------------</span>
<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">on_BoxFilter</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">//方框滤波操作</span>
    <span class="token function">boxFilter</span><span class="token punctuation">(</span>g_srcImage<span class="token punctuation">,</span> g_dstImage1<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token function">Size</span><span class="token punctuation">(</span>g_nBoxFilterValue <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> g_nBoxFilterValue <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//显示窗口</span>
    <span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;【&lt;1&gt;方框滤波】&quot;</span><span class="token punctuation">,</span> g_dstImage1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//-----------------------------【on_MeanBlur( )函数】------------------------------------</span>
<span class="token comment">//  描述：均值滤波操作的回调函数</span>
<span class="token comment">//-----------------------------------------------------------------------------------------------</span>
<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">on_MeanBlur</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">//均值滤波操作</span>
    <span class="token function">blur</span><span class="token punctuation">(</span>g_srcImage<span class="token punctuation">,</span> g_dstImage2<span class="token punctuation">,</span> <span class="token function">Size</span><span class="token punctuation">(</span>g_nMeanBlurValue <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> g_nMeanBlurValue <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//显示窗口</span>
    <span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;【&lt;2&gt;均值滤波】&quot;</span><span class="token punctuation">,</span> g_dstImage2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//-----------------------------【ContrastAndBright( )函数】------------------------------------</span>
<span class="token comment">//  描述：高斯滤波操作的回调函数</span>
<span class="token comment">//-----------------------------------------------------------------------------------------------</span>
<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">on_GaussianBlur</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">//高斯滤波操作</span>
    <span class="token function">GaussianBlur</span><span class="token punctuation">(</span>g_srcImage<span class="token punctuation">,</span> g_dstImage3<span class="token punctuation">,</span> <span class="token function">Size</span><span class="token punctuation">(</span>g_nGaussianBlurValue <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> g_nGaussianBlurValue <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//显示窗口</span>
    <span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;【&lt;3&gt;高斯滤波】&quot;</span><span class="token punctuation">,</span> g_dstImage3<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>opencv 学习 Demo 代码下载 <a href="https://gitee.com/zmmlet/study-note/tree/master/C++/opencv" target="_blank" rel="noopener noreferrer">Demo 代码下载<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></div><!--[--><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/zmmblog/backend/c++/C++%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B.html" class="" aria-label="C++核心编程"><!--[--><!--]--> C++核心编程 <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/zmmblog/assets/app.b74d2e03.js" defer></script>
  </body>
</html>
