import{_ as o,r as e,o as c,c as i,a as n,b as s,d as t,e as p}from"./app.b74d2e03.js";const l={},u=p('<h1 id="opencv-\u7B14\u8BB0" tabindex="-1"><a class="header-anchor" href="#opencv-\u7B14\u8BB0" aria-hidden="true">#</a> OpenCV \u7B14\u8BB0</h1><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>\u6CE8\u610F\u6240\u6709 C++ \u6E90\u6587\u4EF6\u4F7F\u7528 Visual Studio 2019 \u7F16\u8F91\u5668\u6253\u5F00\u5426\u5219\u4F1A\u51FA\u73B0\u4E2D\u6587\u6CE8\u91CA\u4E71\u7801</p></div><h2 id="\u73AF\u5883\u642D\u5EFA" tabindex="-1"><a class="header-anchor" href="#\u73AF\u5883\u642D\u5EFA" aria-hidden="true">#</a> \u73AF\u5883\u642D\u5EFA</h2><h3 id="\u73AF\u5883\u4ECB\u7ECD" tabindex="-1"><a class="header-anchor" href="#\u73AF\u5883\u4ECB\u7ECD" aria-hidden="true">#</a> \u73AF\u5883\u4ECB\u7ECD</h3>',4),k=n("li",null,"\u64CD\u4F5C\u7CFB\u7EDF windows11",-1),r=n("li",null,"visualStudio 2019 \u4E0B\u8F7D",-1),d={href:"https://github.com/opencv/opencv/releases/tag/4.5.4",target:"_blank",rel:"noopener noreferrer"},m=p('<p><img src="https://gitee.com/zmmlet/study-note/raw/master/images/Snipaste_2022-10-08_11-23-57.png" alt=""></p><p>\u4E0B\u8F7D\u540E\u5B89\u88C5,\u5B89\u88C5\u5B8C\u6210\u5171\u6709\u4E24\u4E2A\u6587\u4EF6\u5939\uFF0C\u4E00\u4E2A\u662F\u7F16\u8BD1\u540E\u7684\u4E00\u4E2A\u662F\u6E90\u7801</p><p><img src="https://gitee.com/zmmlet/study-note/raw/master/images/Snipaste_2022-10-08_11-29-36.png" alt=""></p><h3 id="\u73AF\u5883\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u73AF\u5883\u914D\u7F6E" aria-hidden="true">#</a> \u73AF\u5883\u914D\u7F6E</h3><p><code>D:\\localProgram\\opencv\\opencv\\build\\x64\\vc15\\bin</code> \u5B89\u88C5\u76EE\u5F55\u6587\u4EF6\u8DEF\u5F84\uFF0C\u914D\u7F6E\u5230\u7535\u8111\u73AF\u5883\u53D8\u91CF\uFF0C\u7136\u540E\u91CD\u542F\u9879\u76EE</p><h3 id="\u4F7F\u7528-vs-\u521B\u5EFA\u4E00\u4E2A\u7A7A\u9879\u76EE\u548C\u9879\u76EE\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528-vs-\u521B\u5EFA\u4E00\u4E2A\u7A7A\u9879\u76EE\u548C\u9879\u76EE\u914D\u7F6E" aria-hidden="true">#</a> \u4F7F\u7528 vs \u521B\u5EFA\u4E00\u4E2A\u7A7A\u9879\u76EE\u548C\u9879\u76EE\u914D\u7F6E</h3><h4 id="\u521B\u5EFA\u5B8C\u6210\u9879\u76EE\u5982\u679C\u7F16\u8BD1\u5668\u662F-x86-\u6539\u6210\u5982\u4E0B" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA\u5B8C\u6210\u9879\u76EE\u5982\u679C\u7F16\u8BD1\u5668\u662F-x86-\u6539\u6210\u5982\u4E0B" aria-hidden="true">#</a> \u521B\u5EFA\u5B8C\u6210\u9879\u76EE\u5982\u679C\u7F16\u8BD1\u5668\u662F x86 \u6539\u6210\u5982\u4E0B</h4><p><img src="https://gitee.com/zmmlet/study-note/raw/master/images/Snipaste_2022-10-08_15-12-02.png" alt=""> \u7136\u540E\u4E3A\u9879\u76EE\u6DFB\u52A0\u76EE\u5F55\u548C opencv \u5E93\u505A\u4E3A\u4F9D\u8D56\uFF0C\u70B9\u51FB\u9879\u76EE\uFF0C\u9009\u62E9\u5C5E\u6027</p><p><img src="https://gitee.com/zmmlet/study-note/raw/master/images/Snipaste_2022-10-08_15-12-53.png" alt=""></p><h4 id="\u5206\u522B\u6DFB\u52A0-\u6DFB\u52A0\u751F\u6210\u76EE\u5F55-\u6DFB\u52A0\u5E93\u76EE\u5F55-\u5982\u4E0B" tabindex="-1"><a class="header-anchor" href="#\u5206\u522B\u6DFB\u52A0-\u6DFB\u52A0\u751F\u6210\u76EE\u5F55-\u6DFB\u52A0\u5E93\u76EE\u5F55-\u5982\u4E0B" aria-hidden="true">#</a> \u5206\u522B\u6DFB\u52A0 \u6DFB\u52A0\u751F\u6210\u76EE\u5F55\uFF0C\u6DFB\u52A0\u5E93\u76EE\u5F55 \u5982\u4E0B\uFF1A</h4><ul><li><p>\u6DFB\u52A0\u751F\u6210\u76EE\u5F55 D:\\localProgram\\opencv\\opencv\\build\\include</p></li><li><p>\u6DFB\u52A0\u5E93\u76EE\u5F55 D:\\localProgram\\opencv\\opencv\\build\\x64\\vc15\\lib</p></li></ul><p><img src="https://gitee.com/zmmlet/study-note/raw/master/images/Snipaste_2022-10-08_15-13-44.png" alt=""></p><h4 id="\u914D\u7F6E\u9644\u52A0\u4F9D\u8D56\u9879" tabindex="-1"><a class="header-anchor" href="#\u914D\u7F6E\u9644\u52A0\u4F9D\u8D56\u9879" aria-hidden="true">#</a> \u914D\u7F6E\u9644\u52A0\u4F9D\u8D56\u9879\uFF1A</h4><p>\u5728 <code>D:\\localProgram\\opencv\\opencv\\build\\x64\\vc15\\lib</code> \u4E0B\u7684\u6587\u4EF6\u5939\u4E2D <code>opencv_world454d.lib</code>\u6587\u4EF6\u7528\u4E8E\u8C03\u8BD5\u3002 <code>opencv_world454.lib</code>\u6587\u4EF6\u7528\u4E8E\u6B63\u5F0F\u53D1\u5E03\uFF0C\u5728\u5C5E\u6027\u5982\u56FE\u4E2D\u8FDB\u884C\u914D\u7F6E\u3002 <strong>\u6CE8\uFF1A\u4E24\u4E2A\u6587\u4EF6\u7684\u533A\u522B\u5728\u4E8E\u662F\u5426\u5E26 d\uFF0C\u5E26 d \u7684\u7528\u4E8E\u8C03\u8BD5\u73AF\u5883\uFF0C\u4E0D\u5E26 d \u7528\u4E8E\u53D1\u5E03\u73AF\u5883\u3002vs \u7F16\u8F91\u5668 2017 \u4EE5\u524D\u4F7F\u7528 vc14\u3002vs2017 \u4EE5\u540E\u7248\u672C\u7F16\u8F91\u5668\u4F7F\u7528 vc15</strong></p><p><img src="https://gitee.com/zmmlet/study-note/raw/master/images/Snipaste_2022-10-08_15-15-01.png" alt=""></p><h3 id="opencv-contrib-\u6A21\u5757" tabindex="-1"><a class="header-anchor" href="#opencv-contrib-\u6A21\u5757" aria-hidden="true">#</a> opencv_contrib \u6A21\u5757</h3>',16),v={href:"https://github.com/opencv/opencv_contrib/tags",target:"_blank",rel:"noopener noreferrer"},b=n("p",null,[n("img",{src:"https://gitee.com/zmmlet/study-note/raw/master/images/Snipaste_2022-10-08_15-16-35.png",alt:""})],-1),g={href:"https://cmake.org/download/",target:"_blank",rel:"noopener noreferrer"},f=p(`<p><img src="https://gitee.com/zmmlet/study-note/raw/master/images/Snipaste_2022-10-08_15-19-44.png" alt=""> Cmaker \u7F16\u8BD1\u5DE5\u5177 \u4E0B\u8F7D\u540E\u89E3\u538B\u627E\u5230\u76EE\u5F55 <code>D:\\download\\tool\\cmake-3.22.1-windows-x86_64\\bin</code> \u8FD0\u884C <code>.exe</code> \u7A0B\u5E8F\u9009\u62E9 <code>opencv</code> \u6E90\u7801\u76EE\u5F55\uFF0C<strong>\u70B9\u51FB configure</strong> \u6309\u94AE</p><p><img src="https://gitee.com/zmmlet/study-note/raw/master/images/Snipaste_2022-10-08_15-20-31.png" alt=""></p><p>\u7F16\u8BD1\u62A5\u9519\uFF0C\u65E0\u6CD5\u4ECE\u8FDC\u7A0B\u4E0B\u8F7D\u6587\u4EF6\uFF0C\uFF0C\u91CD\u65B0\u70B9\u51FB confifure \u6309\u94AE \u5728 CMake \u4E2D\uFF0CWhere is the source code \u6DFB\u52A0 opencv \u6587\u4EF6\u5939\uFF0C\u5373<code>/Opencv/opencv-4.5.4</code>\uFF08\u6CE8\u610F\uFF1A\u5982\u679C<code>/Opencv/opencv-4.5.4</code> \u4E0B\u8FD8\u6709\u4E00\u5C42\u6587\u4EF6\u5939 <code>opencv-4.5.4</code>\uFF0C\u8BF7\u7528<code>/Opencv/opencv-4.5.4/opencv-4.5.4</code>\uFF09\uFF1B</p><p>\u5728 CMake \u4E2D\uFF0CWhere to build the binaries \u6DFB\u52A0 build \u6587\u4EF6\u5939\uFF0C\u5373<code>/Opencv/build</code></p><p>\u70B9\u51FB configure\uFF0C\u9009\u62E9\u4F60\u4F7F\u7528\u7684 <code>Visual Studio</code> \u7248\u672C\uFF0C\u9009\u62E9\u5E73\u53F0\uFF08\u4E00\u822C\u662F x64\uFF09</p><p>\u6CE8\u610F\uFF1A\u5982\u679C\u8FD9\u91CC\u7248\u672C\u9009\u9519\uFF0C\u70B9\u51FB <code>File &gt; DeleteCache</code>\u3002\u518D\u70B9\u51FB <code>Configure</code> \u91CD\u65B0\u9009\u62E9\u3002</p><p>\u70B9\u51FB finish\uFF1B</p><p>\u518D\u6B21\u70B9\u51FB configure\uFF0C\u7B49\u5F85\uFF08\u8FC7\u7A0B\u4E2D\u6709\u6587\u4EF6\u4E0B\u8F7D\uFF0C\u8BF7\u5148\u642D\u597D\u68AF\u5B50\uFF09</p><p>\u5B8C\u6210\u540E\uFF0C\u5728\u7F16\u8BD1\u9009\u9879\u4E2D\u8FDB\u884C\u52FE\u9009\u3002BUILD_CUDA_STUBS\u3001OPENCV_DNN_CUDA\u3001WITH_CUDA\u3001OPENCV_ENABLE_NONFREE\u3001build_opencv_world \u6253\u52FE</p><p>\u627E\u5230\u7F16\u8BD1\u9009\u9879 OPENCV_EXTRA_MODULES_PATH \uFF0C\u5C06 Value \u8BBE\u7F6E\u4E3A<code>/Opencv/opencv_contrib-4.5.4/modules</code>\uFF08\u5373<code>/Opencv/opencv_contrib-4.5.4</code> \u4E2D\u7684 <code>modules</code> \u76EE\u5F55\uFF0C\u6CE8\u610F\u4E2D\u95F4\u6709\u6CA1\u6709\u591A\u4E00\u5C42\u6587\u4EF6\u5939\uFF09\uFF1B</p><p>\u70B9\u51FB configure\uFF0C\u7B49\u5F85\u81F3\u51FA\u73B0 configuring done\uFF1B</p><p>\u6CE8\uFF1A\u82E5\u62A5\u9519\uFF0C\u5148\u67E5\u62A5\u9519\u5E76\u4FEE\u6539\u540E\u91CD\u8BD5\uFF1B\u82E5\u591A\u6B21\u91CD\u8BD5\uFF0C\u4ECD\u62A5\u540C\u4E00\u4E2A\u9519\u8BEF\uFF0C\u5EFA\u8BAE\u65B0\u5EFA build1\u3002\u4FEE\u6539 Where to build the binaries \u4E3A<code>/Opencv/build1</code>\uFF1B\u70B9\u51FB <code>File &gt; DeleteCache</code>\u3002\u518D\u70B9\u51FB Configure \u91CD\u65B0\u5F00\u59CB\u3002</p><p>\u70B9\u51FB generate\uFF0C\u7B49\u5F85\u81F3\u51FA\u73B0 generating done\uFF1B</p><p>\u70B9\u51FB open project\u3002</p><p><img src="https://gitee.com/zmmlet/study-note/raw/master/images/Snipaste_2022-10-08_15-26-31.png" alt=""> \u5BF9\u7167\u62A5\u9519\u548C\u65E5\u5FD7\u6587\u4EF6\u53EF\u4EE5\u770B\u51FA\uFF0C\u65E5\u5FD7\u4E2D\u63D0\u793A\u6211\u4EEC\u624B\u52A8\u4E0B\u8F7D\u7F3A\u5931\u6587\u4EF6</p><p><img src="https://gitee.com/zmmlet/study-note/raw/master/images/Snipaste_2022-10-08_15-25-27.png" alt=""> \u624B\u52A8\u4E0B\u8F7D\u540E\u4FEE\u6539\u6587\u4EF6\u547D\u540D\uFF0CMD5 \u503C+&#39;-&#39;+\u4E0B\u8F7D\u7684\u6587\u4EF6\u540D\u3002\u6BD4\u5982 <code>opencv_videoio_ffmpeg_64.dll</code> \u8FD9\u4E2A\u6587\u4EF6\u4E0B\u8F7D\u540E\u51E1\u5728<code>.cache</code> \u4E0B\u7684 <code>ffmpeg</code> \u4E0B\uFF0C\u7136\u540E\u6539\u540D\u4E3A <code>b8120c07962d591e2e9071a1bf566fd0-opencv_videoio_ffmpeg_64.dll</code> \u66FF\u6362\u539F\u6765 <code>0KB</code> \u7684\u90A3\u4E2A\u6587\u4EF6</p><p><code>ffmpeg_version.cmake</code> \u6587\u4EF6\u8BBF\u95EE\u540E\uFF0C\u53E6\u5B58\u4E3A <code>txt</code> \u6587\u672C\uFF0C\u7136\u540E\u4FEE\u6539\u6587\u4EF6\u540D\u79F0\u548C\u540E\u7F00\u3002</p><p><img src="https://gitee.com/zmmlet/study-note/raw/master/images/Snipaste_2022-10-08_15-24-42.png" alt=""><strong>\u4E0B\u8F7D\u5931\u8D25\u6587\u4EF6\u641E\u5B9A\u540E\uFF0C\u91CD\u65B0\u70B9\u51FB configure\uFF0C\u7B49\u5F85\u81F3\u51FA\u73B0 configuring done</strong></p><h2 id="\u7A0B\u5E8F\u548C\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#\u7A0B\u5E8F\u548C\u6D4B\u8BD5" aria-hidden="true">#</a> \u7A0B\u5E8F\u548C\u6D4B\u8BD5</h2><h3 id="\u6D4B\u8BD5\u9879\u76EE\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u6D4B\u8BD5\u9879\u76EE\u914D\u7F6E" aria-hidden="true">#</a> \u6D4B\u8BD5\u9879\u76EE\u914D\u7F6E</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgcodecs.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/highgui.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgproc.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token comment">//\u6D4B\u8BD5opencv \u9879\u76EE\u914D\u7F6E</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	string path <span class="token operator">=</span> <span class="token string">&quot;Resources/test.png&quot;</span><span class="token punctuation">;</span>
	Mat img <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image&quot;</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u56FE\u50CF\u3001\u89C6\u9891\u3001\u7F51\u7EDC\u6444\u50CF\u5934" tabindex="-1"><a class="header-anchor" href="#\u56FE\u50CF\u3001\u89C6\u9891\u3001\u7F51\u7EDC\u6444\u50CF\u5934" aria-hidden="true">#</a> \u56FE\u50CF\u3001\u89C6\u9891\u3001\u7F51\u7EDC\u6444\u50CF\u5934</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgcodecs.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/highgui.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgproc.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>


<span class="token comment">// \u4E00\u3001\u9605\u8BFB\u56FE\u50CF\u3001\u89C6\u9891\u548C\u7F51\u7EDC\u6444\u50CF\u5934</span>
<span class="token comment">// 1.\u52A0\u8F7D\u56FE\u5F62</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	string path <span class="token operator">=</span> <span class="token string">&quot;Resources/test.png&quot;</span><span class="token punctuation">;</span>
	<span class="token comment">// Mat \u57FA\u4E8E opencv \u5F15\u7528\u7684\u77E9\u9635\u6570\u636E\u7C7B\u578B</span>
	Mat img <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>


	<span class="token comment">// imshow \u7528\u4E8E\u663E\u793A\u56FE\u50CF</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image&quot;</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// \u7531\u4E8E\u663E\u793A\u56FE\u50CF\u540E\u4F1A\u7ACB\u523B\u5173\u95ED\uFF0C\u6240\u4EE5waitKey(0) \u8868\u793A\u65E0\u7A77\u5927 \u8FD9\u6837\u6253\u5F00\u4E86\u4E0D\u4F1A\u5173\u95ED</span>
	<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>



<span class="token comment">// 2.\u52A0\u8F7D\u89C6\u9891:\u89C6\u9891\u64AD\u653E\u5B8C\u6210\u540E\uFF0C\u4F1A\u51FA\u73B0\u4E00\u4E2A\u9519\u8BEF\uFF0C\u9519\u8BEF\u539F\u56E0\u662F\u6CA1\u6709\u53EF\u64AD\u653E\u7684\u56FE\u7247\u4E86</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	string path <span class="token operator">=</span> <span class="token string">&quot;Resources/test_video.mp4&quot;</span><span class="token punctuation">;</span>
	<span class="token comment">// \u89C6\u9891\u6355\u83B7</span>
	VideoCapture <span class="token function">cap</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
	Mat img<span class="token punctuation">;</span>
	<span class="token comment">// \u7531\u4E8E\u89C6\u9891\u7531\u4E00\u7CFB\u5217\u7684\u56FE\u7247\u7EC4\u6210\uFF0C\u6240\u4EE5\u4F7F\u7528\u5FAA\u73AF</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// \u89C6\u9891\u6BCF\u4E00\u5E27\u56FE\u7247\u7684\u6E32\u67D3</span>
		cap<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// imshow \u7528\u4E8E\u663E\u793A\u56FE\u50CF</span>
		<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image&quot;</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// \u7531\u4E8E\u663E\u793A\u56FE\u50CF\u540E\u4F1A\u7ACB\u523B\u5173\u95ED\uFF0C\u6240\u4EE5waitKey(0) \u8868\u793A\u65E0\u7A77\u5927 \u8FD9\u6837\u6253\u5F00\u4E86\u4E0D\u4F1A\u5173\u95ED</span>
		<span class="token comment">// waitKey() \u6570\u503C\u8D8A\u5927\u64AD\u653E\u8D8A\u6162</span>
		<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>


<span class="token comment">// 3.\u52A0\u8F7D\u7F51\u7EDC\u6444\u50CF\u5934</span>

<span class="token keyword">void</span> <span class="token function">mainVoid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// cap(1) \u6807\u8BC6\u6444\u50CF\u5934id</span>
	VideoCapture <span class="token function">cap</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Mat img<span class="token punctuation">;</span>
	\u7531\u4E8E\u89C6\u9891\u7531\u4E00\u7CFB\u5217\u7684\u56FE\u7247\u7EC4\u6210\uFF0C\u6240\u4EE5\u4F7F\u7528\u5FAA\u73AF
	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// \u89C6\u9891\u6BCF\u4E00\u5E27\u56FE\u7247\u7684\u6E32\u67D3</span>
		cap<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// imshow \u7528\u4E8E\u663E\u793A\u56FE\u50CF</span>
		<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image&quot;</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// waitKey() \u6570\u503C\u8D8A\u5927\u64AD\u653E\u8D8A\u6162</span>
		<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u56FE\u50CF\u57FA\u672C\u529F\u80FD" tabindex="-1"><a class="header-anchor" href="#\u56FE\u50CF\u57FA\u672C\u529F\u80FD" aria-hidden="true">#</a> \u56FE\u50CF\u57FA\u672C\u529F\u80FD</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgcodecs.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/highgui.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgproc.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>

<span class="token comment">// \u8F6C\u6362\u56FE\u50CF\u989C\u8272\u3001\u9AD8\u65AF\u6A21\u7CCA\u3001\u68C0\u6D4B\u56FE\u50CF\u8FB9\u7F18\u3001\u6269\u5927\u56FE\u50CF\u3001\u4FB5\u8680\u56FE\u50CF</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	string path <span class="token operator">=</span> <span class="token string">&quot;Resources/test.png&quot;</span><span class="token punctuation">;</span>
	Mat img <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
	Mat imgGray<span class="token punctuation">,</span> imgBlur<span class="token punctuation">,</span> imgCanny<span class="token punctuation">,</span> imgDia<span class="token punctuation">,</span> imgErode<span class="token punctuation">;</span>
	<span class="token comment">// \u8F6C\u6362\u56FE\u50CF\u989C\u8272</span>
	<span class="token function">cvtColor</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> imgGray<span class="token punctuation">,</span> COLOR_BGR2GRAY<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// \u6DFB\u52A0\u56FE\u50CF\u6A21\u7CCA-\u9AD8\u65AF\u6A21\u7CCA</span>
	<span class="token function">GaussianBlur</span><span class="token punctuation">(</span>imgGray<span class="token punctuation">,</span> imgBlur<span class="token punctuation">,</span> <span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// canny \u56FE\u50CF\u8FB9\u7F18\u68C0\u6D4B\u5668</span>
	<span class="token function">Canny</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> imgCanny<span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// \u6269\u5927\u56FE\u50CF\uFF08\u52A0\u7C97\u56FE\u50CF\u68C0\u67E5\u6D4B\u8FB9\u7F18\u7EBF\u6761\uFF09</span>
	Mat kernel <span class="token operator">=</span> <span class="token function">getStructuringElement</span><span class="token punctuation">(</span>MORPH_RECT<span class="token punctuation">,</span> <span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">dilate</span><span class="token punctuation">(</span>imgCanny<span class="token punctuation">,</span> imgDia<span class="token punctuation">,</span> kernel<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// \u4FB5\u8680</span>
	<span class="token function">erode</span><span class="token punctuation">(</span>imgDia<span class="token punctuation">,</span> imgErode<span class="token punctuation">,</span> kernel<span class="token punctuation">)</span><span class="token punctuation">;</span>


	<span class="token comment">// \u663E\u793A\u56FE\u50CF\u4E3A\u6B63\u5E38\u989C\u8272</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image&quot;</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// \u663E\u793A\u56FE\u50CF\u4E3A\u7070\u8272</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image Gray&quot;</span><span class="token punctuation">,</span> imgGray<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// \u663E\u793A\u9AD8\u65AF\u6A21\u7CCA\u56FE\u50CF</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image Blur&quot;</span><span class="token punctuation">,</span> imgBlur<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// \u663E\u793A\u68C0\u6D4B\u56FE\u50CF\u8FB9\u7F18</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image Canny&quot;</span><span class="token punctuation">,</span> imgCanny<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// \u6269\u5927\u56FE\u50CF\uFF08\u52A0\u7C97\u56FE\u50CF\u68C0\u67E5\u6D4B\u8FB9\u7F18\u7EBF\u6761\uFF09</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image Dilataion&quot;</span><span class="token punctuation">,</span> imgDia<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// \u4FB5\u8680\u56FE\u50CF</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image Erode&quot;</span><span class="token punctuation">,</span> imgErode<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u8C03\u6574\u5927\u5C0F\u5E76\u88C1\u526A\u56FE\u50CF\u5927\u5C0F" tabindex="-1"><a class="header-anchor" href="#\u8C03\u6574\u5927\u5C0F\u5E76\u88C1\u526A\u56FE\u50CF\u5927\u5C0F" aria-hidden="true">#</a> \u8C03\u6574\u5927\u5C0F\u5E76\u88C1\u526A\u56FE\u50CF\u5927\u5C0F</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgcodecs.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/highgui.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgproc.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	string path <span class="token operator">=</span> <span class="token string">&quot;Resources/test.png&quot;</span><span class="token punctuation">;</span>
	Mat img <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
	Mat imgResize<span class="token punctuation">,</span> imgCrop<span class="token punctuation">;</span>

	<span class="token comment">// \u6253\u5370\u56FE\u50CF\u5927\u5C0F</span>
	cout <span class="token operator">&lt;&lt;</span> img<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	<span class="token comment">// 1.\u8C03\u6574\u56FE\u50CF\u5927\u5C0F -- \u6307\u5B9A\u5927\u5C0F\u7F29\u653E</span>
	<span class="token comment">// resize(img, imgResize, Size(301,306));</span>
	<span class="token comment">// \u8C03\u6574\u56FE\u50CF\u5927\u5C0F -- \u6309\u7167\u767E\u5206\u6BD4\u7F29\u653E\uFF0C\u539F\u56FE\u50CF\u4E3A1</span>
	 <span class="token function">resize</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> imgResize<span class="token punctuation">,</span> <span class="token function">Size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	 <span class="token comment">//2.\u88C1\u526A\u56FE\u50CF</span>
	 Rect <span class="token function">roi</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">250</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	 imgCrop <span class="token operator">=</span> <span class="token function">img</span><span class="token punctuation">(</span>roi<span class="token punctuation">)</span><span class="token punctuation">;</span>


	<span class="token comment">// \u539F\u56FE\u50CF\u5927\u5C0F</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image&quot;</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// \u8C03\u6574\u540E\u7684\u56FE\u50CF\u5927\u5C0F</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image Resize&quot;</span><span class="token punctuation">,</span> imgResize<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// \u88C1\u526A\u56FE\u50CF</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image Crop&quot;</span><span class="token punctuation">,</span> imgCrop<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u56FE\u5F62\u5F62\u72B6\u548C\u6587\u672C" tabindex="-1"><a class="header-anchor" href="#\u56FE\u5F62\u5F62\u72B6\u548C\u6587\u672C" aria-hidden="true">#</a> \u56FE\u5F62\u5F62\u72B6\u548C\u6587\u672C</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgcodecs.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/highgui.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgproc.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// \u521B\u5EFA\u7A7A\u767D\u56FE\u7247</span>
	Mat <span class="token function">img</span><span class="token punctuation">(</span><span class="token number">521</span><span class="token punctuation">,</span><span class="token number">521</span><span class="token punctuation">,</span> CV_8UC3<span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// \u521B\u5EFA\u4E00\u4E2A\u5706-\u8FB9\u6846\u539A\u5EA6\u4E3A10</span>
	<span class="token comment">//circle(img, Point(256, 256), 155, Scalar(255, 98, 0), 10);</span>


	<span class="token comment">// \u521B\u5EFA\u4E00\u4E2A\u5706-\u5B8C\u5168\u586B\u5145\u989C\u8272</span>
	<span class="token function">circle</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">155</span><span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">98</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> FILLED<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// \u957F\u65B9\u5F62</span>
	<span class="token function">rectangle</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">130</span><span class="token punctuation">,</span><span class="token number">226</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">283</span><span class="token punctuation">,</span><span class="token number">286</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> FILLED<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// \u521B\u5EFA\u4E00\u6839\u7EBF</span>
	<span class="token function">line</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">130</span><span class="token punctuation">,</span> <span class="token number">296</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">382</span><span class="token punctuation">,</span> <span class="token number">296</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// \u5B58\u653E\u6587\u672C</span>
	<span class="token function">putText</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token string">&quot;workShopText&quot;</span><span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">137</span><span class="token punctuation">,</span> <span class="token number">262</span><span class="token punctuation">)</span><span class="token punctuation">,</span> FONT_HERSHEY_DUPLEX<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span><span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image&quot;</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u626D\u66F2\u548C\u900F\u89C6" tabindex="-1"><a class="header-anchor" href="#\u626D\u66F2\u548C\u900F\u89C6" aria-hidden="true">#</a> \u626D\u66F2\u548C\u900F\u89C6</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgcodecs.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/highgui.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgproc.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>

<span class="token keyword">float</span> w <span class="token operator">=</span> <span class="token number">250</span><span class="token punctuation">,</span> h <span class="token operator">=</span> <span class="token number">350</span><span class="token punctuation">;</span><span class="token comment">//\u56FE\u7247\u5927\u5C0F</span>
Mat matrix<span class="token punctuation">,</span> imgWarp<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">//\u56FE\u7247\u7528\u753B\u56FE\u6253\u5F00\uFF0C\u5728\u5C4F\u5E55\u5DE6\u4E0B\u89D2\u4F1A\u663E\u793A\u70B9\u7684\u5750\u6807</span>
	string path <span class="token operator">=</span> <span class="token string">&quot;Resources/cards.jpg&quot;</span><span class="token punctuation">;</span>
	Mat img<span class="token operator">=</span><span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//matrix data type \u7531opencv\u5F15\u5165\u6765\u5904\u7406\u56FE\u50CF</span>
	Point2f src<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">{</span><span class="token number">529</span><span class="token punctuation">,</span><span class="token number">142</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">771</span><span class="token punctuation">,</span><span class="token number">190</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">405</span><span class="token punctuation">,</span><span class="token number">395</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">674</span><span class="token punctuation">,</span><span class="token number">457</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//Point2f\u8868\u793A\u6D6E\u70B9\u6570</span>
	Point2f dst<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">{</span><span class="token number">0.0f</span><span class="token punctuation">,</span><span class="token number">0.0f</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>w<span class="token punctuation">,</span><span class="token number">0.0f</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0.0f</span><span class="token punctuation">,</span>h<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>w<span class="token punctuation">,</span>h<span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//Point2f\u8868\u793A\u6D6E\u70B9\u6570</span>

	matrix <span class="token operator">=</span> <span class="token function">getPerspectiveTransform</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> dst<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">warpPerspective</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> imgWarp<span class="token punctuation">,</span> matrix<span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span>h<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//\u786E\u5B9Asrc\u5750\u6807\u662F\u5426\u6B63\u786E</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">circle</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> src<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> FILLED<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image&quot;</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image Warp&quot;</span><span class="token punctuation">,</span> imgWarp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u589E\u52A0\u5EF6\u65F6\uFF0C0\u8868\u793A\u65E0\u7A77</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u989C\u8272\u68C0\u6D4B" tabindex="-1"><a class="header-anchor" href="#\u989C\u8272\u68C0\u6D4B" aria-hidden="true">#</a> \u989C\u8272\u68C0\u6D4B</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgcodecs.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/highgui.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgproc.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>

Mat imgHSV<span class="token punctuation">,</span> mask<span class="token punctuation">;</span>
<span class="token keyword">int</span> hmin <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> smin <span class="token operator">=</span> <span class="token number">110</span><span class="token punctuation">,</span> vmin <span class="token operator">=</span> <span class="token number">153</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> hmax <span class="token operator">=</span> <span class="token number">19</span><span class="token punctuation">,</span> smax <span class="token operator">=</span> <span class="token number">240</span><span class="token punctuation">,</span> vmax <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span> <span class="token comment">// \u5982\u4F55\u786E\u5B9A\u8FD96\u4E2A\u503C\uFF0C\u6BCF\u6B21\u90FD\u66F4\u6539\u6240\u6709\u8FD9\u4E9B\u518D\u6B21\u8FD0\u884C\u5F88\u75DB\u82E6 --&gt;\u521B\u5EFA\u8DDF\u8E2A\u680F\uFF08\u4F7F\u6211\u4EEC\u53EF\u4EE5\u5B9E\u65F6\u66F4\u6539\u8FD9\u4E9B\u503C\uFF09</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	string path <span class="token operator">=</span> <span class="token string">&quot;Resources/shapes.png&quot;</span><span class="token punctuation">;</span>
	Mat img <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// \u8F6C\u6362\u56FE\u50CF\u5230HSV\u7A7A\u95F4\uFF0C\u5728\u5176\u4E2D\u67E5\u627E\u989C\u8272\u66F4\u52A0\u5BB9\u6613</span>
	<span class="token function">cvtColor</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> imgHSV<span class="token punctuation">,</span> COLOR_BGR2HSV<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// \u521B\u5EFA\u63A7\u5236\u7A97\u53E3</span>
	<span class="token function">namedWindow</span><span class="token punctuation">(</span><span class="token string">&quot;Trackbars&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">640</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// \u63A7\u5236\u56FE\u73B0\u8C61\u663E\u793A \u8FD0\u884C\u65F6\uFF0C\u628A3\u4E2Amin\u7684\u90FD\u79FB\u5230\u6700\u5C0F\u503C\uFF0C\u628A3\u4E2Amax\u7684\u90FD\u79FB\u5230\u6700\u5927\u503C\uFF0C\u7136\u540E\u79FB\u52A8\u4F7F\u5176\u4FDD\u6301\u4E3A\u767D\u8272</span>
	<span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">&quot;Hue Min&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Trackbars&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>hmin<span class="token punctuation">,</span> <span class="token number">179</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u5BF9\u4E8Ehue\u8272\u76F8\u9971\u548C\u5EA6\u6700\u5927180,\u5BF9\u4E8E\u53E6\u5916\u4E24\u4E2A\u8272\u76F8\u9971\u548C\u5EA6\u6700\u5927255</span>
	<span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">&quot;Hue Max&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Trackbars&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>hmax<span class="token punctuation">,</span> <span class="token number">179</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">&quot;Sat Min&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Trackbars&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>smin<span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">&quot;Sat Max&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Trackbars&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>smax<span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">&quot;Val Min&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Trackbars&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>vmin<span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">&quot;Val Max&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Trackbars&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>vmax<span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token comment">//\u68C0\u67E5\u6570\u7EC4\u5143\u7D20\u662F\u5426\u4F4D\u4E8E\u5176\u4ED6\u4E24\u4E2A\u6570\u7EC4\u7684\u5143\u7D20\u4E4B\u95F4\u3002</span>
		Scalar <span class="token function">lower</span><span class="token punctuation">(</span>hmin<span class="token punctuation">,</span> smin<span class="token punctuation">,</span> vmin<span class="token punctuation">)</span><span class="token punctuation">;</span>
		Scalar <span class="token function">upper</span><span class="token punctuation">(</span>hmax<span class="token punctuation">,</span> smax<span class="token punctuation">,</span> vmax<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// imgHSV\u4E3A\u8F93\u5165\u56FE\u50CF\uFF0Cmask\u4E3A\u8F93\u51FA\u56FE\u50CF</span>
		<span class="token function">inRange</span><span class="token punctuation">(</span>imgHSV<span class="token punctuation">,</span> lower<span class="token punctuation">,</span> upper<span class="token punctuation">,</span> mask<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image&quot;</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image HSV&quot;</span><span class="token punctuation">,</span> imgHSV<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image HSV&quot;</span><span class="token punctuation">,</span> imgHSV<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image Mask&quot;</span><span class="token punctuation">,</span> mask<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u5F62\u72B6\u8F6E\u5ED3\u68C0\u6D4B" tabindex="-1"><a class="header-anchor" href="#\u5F62\u72B6\u8F6E\u5ED3\u68C0\u6D4B" aria-hidden="true">#</a> \u5F62\u72B6\u8F6E\u5ED3\u68C0\u6D4B</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgcodecs.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/highgui.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgproc.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>

<span class="token comment">// \u63A5\u6536\u56FE\u50CF Mat \u6570\u636E\u7C7B\u578B\u5728 opencv \u4E2D\u662F\u77E9\u9635\u6570\u636E</span>
Mat imgGray<span class="token punctuation">,</span> imgBlur<span class="token punctuation">,</span> imgCanny<span class="token punctuation">,</span> imgDil<span class="token punctuation">,</span> imgErode<span class="token punctuation">;</span>


<span class="token comment">//imgDil\u662F\u4F20\u5165\u7684\u6269\u5F20\u8FB9\u7F18\u7684\u56FE\u50CF\u7528\u6765\u67E5\u627E\u8F6E\u5ED3\uFF0Cimg\u662F\u8981\u5728\u5176\u4E0A\u7ED8\u5236\u8F6E\u5ED3\u7684\u56FE\u50CF</span>
<span class="token keyword">void</span> <span class="token function">getContours</span><span class="token punctuation">(</span>Mat imgDil<span class="token punctuation">,</span> Mat img<span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">/*{
		{Point(20,30),Point(50,60)},
		{},
		{}
	}*/</span>
	<span class="token comment">// \u8F6E\u5ED3\u68C0\u6D4B\u5230\u7684\u8F6E\u5ED3\u3002\u6BCF\u4E2A\u8F6E\u5ED3\u7EBF\u5B58\u50A8\u4E3A\u4E00\u4E2A\u70B9\u7684\u5411\u91CF</span>
	vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span>Point<span class="token operator">&gt;&gt;</span> contours<span class="token punctuation">;</span>
	<span class="token comment">// \u5305\u542B\u5173\u4E8E\u6620\u50CF\u62D3\u6251\u7684\u4FE1\u606F  typedef Vec&lt;int, 4&gt; Vec4i;\u5177\u67094\u4E2A\u6574\u6570\u503C</span>
	vector<span class="token operator">&lt;</span>Vec4i<span class="token operator">&gt;</span> hierarchy<span class="token punctuation">;</span>
	<span class="token comment">// \u5728\u4E8C\u503C\u56FE\u50CF\u4E2D\u67E5\u627E\u8F6E\u5ED3\u3002\u8BE5\u51FD\u6570\u5229\u7528\u8BE5\u7B97\u6CD5\u4ECE\u4E8C\u503C\u56FE\u50CF\u4E2D\u63D0\u53D6\u8F6E\u5ED3</span>
	<span class="token function">findContours</span><span class="token punctuation">(</span>imgDil<span class="token punctuation">,</span> contours<span class="token punctuation">,</span> hierarchy<span class="token punctuation">,</span> RETR_EXTERNAL<span class="token punctuation">,</span> CHAIN_APPROX_SIMPLE<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// img\uFF1A\u8981\u7ED8\u5236\u8F6E\u5ED3\u5728\u4EC0\u4E48\u56FE\u7247\u4E0A\uFF0Ccontours\uFF1A\u8981\u7ED8\u5236\u7684\u8F6E\u5ED3\uFF0C-1\u5B9A\u4E49\u8981\u7ED8\u5236\u7684\u8F6E\u5ED3\u53F7\uFF08-1\u8868\u793A\u6240\u6709\u8F6E\u5ED3\uFF09\uFF0CSaclar\u8868\u793A\u8F6E\u5ED3\u989C\u8272\uFF0C2\u8868\u793A\u539A\u5EA6</span>
	<span class="token comment">// drawContours(img, contours, -1, Scalar(255, 0, 255), 4);</span>

	vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span>Point<span class="token operator">&gt;&gt;</span> <span class="token function">conPoly</span><span class="token punctuation">(</span>contours<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//conploy\u7684\u6570\u91CF\u5E94\u5C0F\u4E8Econtours</span>
	vector<span class="token operator">&lt;</span>Rect<span class="token operator">&gt;</span> <span class="token function">boundRect</span><span class="token punctuation">(</span>contours<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//\u8FC7\u6EE4\u5668\uFF1A\u901A\u8FC7\u8F6E\u5ED3\u9762\u79EF\u6765\u8FC7\u6EE4\u566A\u58F0</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> contours<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//\u904D\u5386\u68C0\u6D4B\u5230\u7684\u8F6E\u5ED3</span>
		<span class="token keyword">int</span> area <span class="token operator">=</span> <span class="token function">contourArea</span><span class="token punctuation">(</span>contours<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;area:&quot;</span> <span class="token operator">&lt;&lt;</span> area <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

		string objectType<span class="token punctuation">;</span>
		<span class="token comment">// \u8F6E\u5ED3\u9762\u79EF\uFF1E1000\u624D\u7ED8\u5236</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>area <span class="token operator">&gt;</span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">//\u8BA1\u7B97\u8F6E\u5ED3\u5468\u957F\u6216\u51F9\u5751\u957F\u5EA6\u3002\u8BE5\u51FD\u6570\u8BA1\u7B97\u4E86\u66F2\u7EBF\u957F\u5EA6\u548C\u5C01\u95ED\u7684\u5468\u957F\u3002</span>
			<span class="token keyword">float</span> peri <span class="token operator">=</span> <span class="token function">arcLength</span><span class="token punctuation">(</span>contours<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u8BA1\u7B97\u5C01\u95ED\u8F6E\u5ED3\u5468\u957F</span>
			<span class="token comment">// \u4EE5\u6307\u5B9A\u7684\u7CBE\u5EA6\u8FD1\u4F3C\u591A\u8FB9\u5F62\u66F2\u7EBF\u3002\u7B2C\u4E8C\u4E2A\u53C2\u6570conPloy[i]\u5B58\u50A8\u8FD1\u4F3C\u7684\u7ED3\u679C\uFF0C\u662F\u8F93\u51FA\u3002</span>

			<span class="token comment">/*
				approxPolyDP()\u51FD\u6570\u662Fopencv\u4E2D\u5BF9\u6307\u5B9A\u7684\u70B9\u96C6\u8FDB\u884C\u591A\u8FB9\u5F62\u903C\u8FD1\u7684\u51FD\u6570\uFF0C\u5176\u903C\u8FD1\u7684\u7CBE\u5EA6\u53EF\u901A\u8FC7\u53C2\u6570\u8BBE\u7F6E\u3002
				\u7B2C\u4E09\u4E2A\u53C2\u6570double epsilon\uFF1A\u6307\u5B9A\u7684\u7CBE\u5EA6\uFF0C\u4E5F\u5373\u662F\u539F\u59CB\u66F2\u7EBF\u4E0E\u8FD1\u4F3C\u66F2\u7EBF\u4E4B\u95F4\u7684\u6700\u5927\u8DDD\u79BB\u3002
				\u7B2C\u56DB\u4E2A\u53C2\u6570bool closed\uFF1A\u82E5\u4E3Atrue\uFF0C\u5219\u8BF4\u660E\u8FD1\u4F3C\u66F2\u7EBF\u662F\u95ED\u5408\u7684\uFF1B\u53CD\u4E4B\uFF0C\u82E5\u4E3Afalse\uFF0C\u5219\u65AD\u5F00
			*/</span>
			<span class="token function">approxPolyDP</span><span class="token punctuation">(</span>contours<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> conPoly<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0.02</span> <span class="token operator">*</span> peri<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//\u8BA1\u7B97\u8FB9\u754C\u77E9\u5F62</span>
			boundRect<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">boundingRect</span><span class="token punctuation">(</span>conPoly<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//\u627E\u8FD1\u4F3C\u591A\u8FB9\u5F62\u7684\u89D2\u70B9,\u4E09\u89D2\u5F62\u67093\u4E2A\u89D2\u70B9\uFF0C\u77E9\u5F62/\u6B63\u65B9\u5F62\u67094\u4E2A\u89D2\u70B9\uFF0C\u5706\u5F62&gt;4\u4E2A\u89D2\u70B9</span>
			<span class="token keyword">int</span> objCor <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>conPoly<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\u56FE\u5F62\u5B58\u5728\u51E0\u4E2A\u9876\u70B9\uFF1A&quot;</span> <span class="token operator">&lt;&lt;</span> objCor <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
			<span class="token comment">// \u4E3A\u4E0D\u540C\u9876\u70B9\u7684\u56FE\u5F62\u6DFB\u52A0\u7C7B\u578B</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>objCor <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> objectType <span class="token operator">=</span> <span class="token string">&quot;Tri&quot;</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
			<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>objCor <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">//\u5BBD\u9AD8\u6BD4</span>
				<span class="token keyword">float</span> aspRatio <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span>boundRect<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span>boundRect<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>height<span class="token punctuation">;</span>
				<span class="token comment">//\u77E9\u5F62\u7684\u5BBD\u9AD8\u6BD4\u4E0D\u4F1A\u6B63\u597D\u7B49\u4E8E1</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>aspRatio <span class="token operator">&gt;</span> <span class="token number">0.95</span> <span class="token operator">&amp;&amp;</span> aspRatio <span class="token operator">&lt;</span> <span class="token number">1.05</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					objectType <span class="token operator">=</span> <span class="token string">&quot;Square&quot;</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token keyword">else</span> objectType <span class="token operator">=</span> <span class="token string">&quot;Rect&quot;</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>objCor <span class="token operator">&gt;</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> objectType <span class="token operator">=</span> <span class="token string">&quot;Circle&quot;</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

			<span class="token function">drawContours</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> conPoly<span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			rectangle<span class="token comment">/*\u7ED8\u5236\u8FB9\u754C\u77E9\u5F62*/</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> boundRect<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">tl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">/*tl()\uFF1Atopleft\u77E9\u5F62\u5DE6\u4E0A\u89D2\u5750\u6807*/</span><span class="token punctuation">,</span> boundRect<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">br</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">/*br()\uFF1Abottom right\u77E9\u5F62\u53F3\u4E0B\u89D2\u5750\u6807*/</span><span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">putText</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> objectType<span class="token punctuation">,</span> <span class="token punctuation">{</span> boundRect<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span>boundRect<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">-</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token comment">/*\u6587\u5B57\u5750\u6807*/</span><span class="token punctuation">,</span> FONT_HERSHEY_PLAIN<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">69</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	string path <span class="token operator">=</span> <span class="token string">&quot;Resources/shapes.png&quot;</span><span class="token punctuation">;</span>
	Mat img <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">/* \u56FE\u50CF\u7ECF\u8FC7\u5904\u7406\u79F0\u4E3A\uFF1A\u9884\u5904\u7406 */</span>
	<span class="token comment">// \u8F6C\u6362\u56FE\u50CF\u989C\u8272</span>
	<span class="token function">cvtColor</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> imgGray<span class="token punctuation">,</span> COLOR_BGR2GRAY<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// \u6DFB\u52A0\u56FE\u50CF\u6A21\u7CCA-\u9AD8\u65AF\u6A21\u7CCA</span>
	<span class="token function">GaussianBlur</span><span class="token punctuation">(</span>imgGray<span class="token punctuation">,</span> imgBlur<span class="token punctuation">,</span> <span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// canny \u56FE\u50CF\u8FB9\u7F18\u68C0\u6D4B\u5668</span>
	<span class="token function">Canny</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> imgCanny<span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// \u6269\u5927\u56FE\u50CF\uFF08\u52A0\u7C97\u56FE\u50CF\u68C0\u67E5\u6D4B\u8FB9\u7F18\u7EBF\u6761\uFF09\u521B\u5EFA\u4E00\u4E2A\u6838\uFF0C\u589E\u52A0Size\uFF08\u53EA\u80FD\u662F\u5947\u6570\uFF09\u4F1A\u6269\u5F20/\u4FB5\u8680\u66F4\u591A</span>
	Mat kernel <span class="token operator">=</span> <span class="token function">getStructuringElement</span><span class="token punctuation">(</span>MORPH_RECT<span class="token punctuation">,</span> <span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">dilate</span><span class="token punctuation">(</span>imgCanny<span class="token punctuation">,</span> imgDil<span class="token punctuation">,</span> kernel<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//img\u662F\u5728\u5176\u4E0A\u7ED8\u8F6E\u5ED3\u7684\u56FE\u7247</span>
	<span class="token function">getContours</span><span class="token punctuation">(</span>imgDil<span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>


	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image&quot;</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//imshow(&quot;Image Gray&quot;, imgGray);</span>
	<span class="token comment">//imshow(&quot;Image Blur&quot;, imgBlur);</span>
	<span class="token comment">//imshow(&quot;Image Canny&quot;, imgCanny);</span>
	<span class="token comment">//imshow(&quot;Image Dil&quot;, imgDil);</span>
	<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u4EBA\u8138\u68C0\u6D4B" tabindex="-1"><a class="header-anchor" href="#\u4EBA\u8138\u68C0\u6D4B" aria-hidden="true">#</a> \u4EBA\u8138\u68C0\u6D4B</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgcodecs.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/highgui.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgproc.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/objdetect.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	string path <span class="token operator">=</span> <span class="token string">&quot;Resources/test.png&quot;</span><span class="token punctuation">;</span>
	Mat img <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// \u52A0\u8F7D\u4EBA\u8138\u68C0\u6D4B\u8BAD\u7EC3\u6A21\u578B</span>
	CascadeClassifier faceCascade<span class="token punctuation">;</span>
	faceCascade<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">&quot;Resources/haarcascade_frontalface_default.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// \u5224\u65AD\u662F\u5426\u4E3A\u7A7A</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>faceCascade<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;XML\u6587\u4EF6\u672A\u52A0\u8F7D&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token punctuation">}</span>
	<span class="token comment">// \u521B\u5EFA\u77E9\u5F62\u53D8\u91CF\uFF0C\u7528\u4E8E\u6807\u8BC6\u4EBA\u8138</span>
	vector<span class="token operator">&lt;</span>Rect<span class="token operator">&gt;</span> faces<span class="token punctuation">;</span>
	<span class="token comment">// \u4F7F\u7528\u4EBA\u8138\u7EA7\u8FDE\u70B9\u68C0\u6D4B\u591A\u5C3A\u5EA6\u65B9\u6CD5</span>
	faceCascade<span class="token punctuation">.</span><span class="token function">detectMultiScale</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> faces<span class="token punctuation">,</span> <span class="token number">1.1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// \u904D\u5386\u4EBA\u8138</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> faces<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">/*
		rectangle \u7ED8\u5236\u8FB9\u754C\u77E9\u5F62
			tl()\uFF1Atopleft\u77E9\u5F62\u5DE6\u4E0A\u89D2\u5750\u6807
			br()\uFF1Abottom right\u77E9\u5F62\u53F3\u4E0B\u89D2\u5750\u6807
		*/</span>
		<span class="token function">rectangle</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> faces<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">tl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> faces<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">br</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image&quot;</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u68C0\u6D4B\u7269\u4F53\u8F6E\u5ED3" tabindex="-1"><a class="header-anchor" href="#\u68C0\u6D4B\u7269\u4F53\u8F6E\u5ED3" aria-hidden="true">#</a> \u68C0\u6D4B\u7269\u4F53\u8F6E\u5ED3</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;opencv2/imgcodecs.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;opencv2/highgui.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;opencv2/imgproc.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>


<span class="token comment">/// &lt;summary&gt;</span>
<span class="token comment">/// Project 1</span>
<span class="token comment">/// \u4F7F\u7528HSV\u7A7A\u95F4\u68C0\u6D4B\u989C\u8272\u3001\u627E\u5230\u8F6E\u5ED3\u6240\u5728\u4F4D\u7F6E\u3001\u53D6\u8F6E\u5ED3\u7684\u4F4D\u7F6E\u7136\u540E\u521B\u5EFA\u4E00\u4E2A\u5706</span>
<span class="token comment">/// &lt;/summary&gt;</span>

Mat img<span class="token punctuation">;</span>
vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span> newPoints<span class="token punctuation">;</span>

vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span> myColors<span class="token punctuation">{</span> <span class="token punctuation">{</span><span class="token number">98</span><span class="token punctuation">,</span><span class="token number">109</span><span class="token punctuation">,</span><span class="token number">54</span><span class="token punctuation">,</span><span class="token number">127</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token comment">//\u84DD\u8272\uFF08hmin smin vmin hmax smax vmax\uFF09</span>
								<span class="token punctuation">{</span><span class="token number">35</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">77</span><span class="token punctuation">,</span><span class="token number">245</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//\u7EFF\u8272\uFF08hmin smin vmin hmax smax vmax\uFF09</span>

vector<span class="token operator">&lt;</span>Scalar<span class="token operator">&gt;</span> myColorValues<span class="token punctuation">{</span> <span class="token punctuation">{</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token comment">//\u84DD\u8272</span>
								<span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//\u7EFF\u8272</span>

<span class="token comment">//! \u83B7\u53D6\u8F6E\u5ED3</span>
Point <span class="token function">getContours</span><span class="token punctuation">(</span>Mat imgDil<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//imgDil\u662F\u4F20\u5165\u7684\u6269\u5F20\u8FB9\u7F18\u7684\u56FE\u50CF\u7528\u6765\u67E5\u627E\u8F6E\u5ED3\uFF0Cimg\u662F\u8981\u5728\u5176\u4E0A\u7ED8\u5236\u8F6E\u5ED3\u7684\u56FE\u50CF</span>
	vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span>Point<span class="token operator">&gt;&gt;</span> contours<span class="token punctuation">;</span><span class="token comment">//\u8F6E\u5ED3\u68C0\u6D4B\u5230\u7684\u8F6E\u5ED3\u3002\u6BCF\u4E2A\u8F6E\u5ED3\u7EBF\u5B58\u50A8\u4E3A\u4E00\u4E2A\u70B9\u7684\u5411\u91CF</span>

	vector<span class="token operator">&lt;</span>Vec4i<span class="token operator">&gt;</span> hierarchy<span class="token punctuation">;</span><span class="token comment">//\u5305\u542B\u5173\u4E8E\u6620\u50CF\u62D3\u6251\u7684\u4FE1\u606F  typedef Vec&lt;int, 4&gt; Vec4i;\u5177\u67094\u4E2A\u6574\u6570\u503C</span>

	<span class="token comment">//\u5728\u4E8C\u503C\u56FE\u50CF\u4E2D\u67E5\u627E\u8F6E\u5ED3\u3002\u8BE5\u51FD\u6570\u5229\u7528\u8BE5\u7B97\u6CD5\u4ECE\u4E8C\u503C\u56FE\u50CF\u4E2D\u63D0\u53D6\u8F6E\u5ED3</span>
	<span class="token function">findContours</span><span class="token punctuation">(</span>imgDil<span class="token punctuation">,</span> contours<span class="token punctuation">,</span> hierarchy<span class="token punctuation">,</span> RETR_EXTERNAL<span class="token punctuation">,</span> CHAIN_APPROX_SIMPLE<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//drawContours(img, contours, -1, Scalar(255, 0, 255), 2);//img\uFF1A\u8981\u7ED8\u5236\u8F6E\u5ED3\u5728\u4EC0\u4E48\u56FE\u7247\u4E0A\uFF0Ccontours\uFF1A\u8981\u7ED8\u5236\u7684\u8F6E\u5ED3\uFF0C-1\u5B9A\u4E49\u8981\u7ED8\u5236\u7684\u8F6E\u5ED3\u53F7\uFF08-1\u8868\u793A\u6240\u6709\u8F6E\u5ED3\uFF09\uFF0CSaclar\u8868\u793A\u8F6E\u5ED3\u989C\u8272\uFF0C2\u8868\u793A\u539A\u5EA6</span>

	vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span>Point<span class="token operator">&gt;&gt;</span> <span class="token function">conPoly</span><span class="token punctuation">(</span>contours<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//conploy\u7684\u6570\u91CF\u5E94\u5C0F\u4E8Econtours</span>
	vector<span class="token operator">&lt;</span>Rect<span class="token operator">&gt;</span> <span class="token function">boundRect</span><span class="token punctuation">(</span>contours<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	Point <span class="token function">myPoint</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//\u8FC7\u6EE4\u5668\uFF1A\u901A\u8FC7\u8F6E\u5ED3\u9762\u79EF\u6765\u8FC7\u6EE4\u566A\u58F0</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> contours<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//\u904D\u5386\u68C0\u6D4B\u5230\u7684\u8F6E\u5ED3</span>
		<span class="token keyword">int</span> area <span class="token operator">=</span> <span class="token function">contourArea</span><span class="token punctuation">(</span>contours<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">//cout &lt;&lt; area &lt;&lt; endl;</span>

		string objectType<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>area <span class="token operator">&gt;</span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//\u8F6E\u5ED3\u9762\u79EF\uFF1E1000\u624D\u7ED8\u5236</span>
			<span class="token comment">//\u8BA1\u7B97\u8F6E\u5ED3\u5468\u957F\u6216\u51F9\u5751\u957F\u5EA6\u3002\u8BE5\u51FD\u6570\u8BA1\u7B97\u4E86\u66F2\u7EBF\u957F\u5EA6\u548C\u5C01\u95ED\u7684\u5468\u957F\u3002</span>
			<span class="token keyword">float</span> peri <span class="token operator">=</span> <span class="token function">arcLength</span><span class="token punctuation">(</span>contours<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u8BA1\u7B97\u5C01\u95ED\u8F6E\u5ED3\u5468\u957F</span>
			<span class="token function">approxPolyDP</span><span class="token punctuation">(</span>contours<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> conPoly<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0.02</span> <span class="token operator">*</span> peri<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u4EE5\u6307\u5B9A\u7684\u7CBE\u5EA6\u8FD1\u4F3C\u591A\u8FB9\u5F62\u66F2\u7EBF\u3002\u7B2C\u4E8C\u4E2A\u53C2\u6570conPloy[i]\u5B58\u50A8\u8FD1\u4F3C\u7684\u7ED3\u679C\uFF0C\u662F\u8F93\u51FA\u3002</span>

			boundRect<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">boundingRect</span><span class="token punctuation">(</span>conPoly<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u8BA1\u7B97\u8FB9\u754C\u77E9\u5F62</span>

			myPoint<span class="token punctuation">.</span>x <span class="token operator">=</span> boundRect<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">+</span> boundRect<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
			myPoint<span class="token punctuation">.</span>y <span class="token operator">=</span> boundRect<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">;</span>

			rectangle<span class="token comment">/*\u7ED8\u5236\u8FB9\u754C\u77E9\u5F62*/</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> boundRect<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">tl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">/*tl()\uFF1Atopleft\u77E9\u5F62\u5DE6\u4E0A\u89D2\u5750\u6807*/</span><span class="token punctuation">,</span> boundRect<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">br</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">/*br()\uFF1Abottom right\u77E9\u5F62\u53F3\u4E0B\u89D2\u5750\u6807*/</span><span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">drawContours</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> conPoly<span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> myPoint<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span> <span class="token function">findColor</span><span class="token punctuation">(</span>Mat img<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	Mat imgHSV<span class="token punctuation">;</span>
	<span class="token function">cvtColor</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> imgHSV<span class="token punctuation">,</span> COLOR_BGR2HSV<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u8F6C\u6362\u56FE\u50CF\u5230HSV\u7A7A\u95F4\uFF0C\u5728\u5176\u4E2D\u67E5\u627E\u989C\u8272\u66F4\u52A0\u5BB9\u6613</span>

	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> myColors<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		Scalar <span class="token function">lower</span><span class="token punctuation">(</span>myColors<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> myColors<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> myColors<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		Scalar <span class="token function">upper</span><span class="token punctuation">(</span>myColors<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> myColors<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> myColors<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		Mat mask<span class="token punctuation">;</span>
		<span class="token function">inRange</span><span class="token punctuation">(</span>imgHSV<span class="token punctuation">,</span> lower<span class="token punctuation">,</span> upper<span class="token punctuation">,</span> mask<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5B9A\u4E49\u989C\u8272\u4E0B\u9650\u548C\u4E0A\u9650\uFF0C\u56E0\u4E3A\u7531\u4E8E\u7167\u660E\u548C\u4E0D\u540C\u7684\u9634\u5F71\uFF0C\u989C\u8272\u7684\u503C\u5C06\u4E0D\u5B8C\u5168\u76F8\u540C\uFF0C\u4F1A\u662F\u4E00\u4E2A\u503C\u7684\u8303\u56F4</span>
		<span class="token comment">//imshow(to_string(i), mask);</span>
		Point myPoint<span class="token operator">=</span><span class="token function">getContours</span><span class="token punctuation">(</span>mask<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>myPoint<span class="token punctuation">.</span>x <span class="token operator">!=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> myPoint<span class="token punctuation">.</span>y <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//\u6CA1\u68C0\u6D4B\u5230\u4E1C\u897F\u7684\u65F6\u5019\u5C31\u4E0D\u52A0\u5165\u65B0\u70B9</span>
			newPoints<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token punctuation">{</span> myPoint<span class="token punctuation">.</span>x<span class="token punctuation">,</span>myPoint<span class="token punctuation">.</span>y<span class="token punctuation">,</span>i <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//i\u4E3A\u989C\u8272\u7D22\u5F15</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> newPoints<span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">drawOnCanvas</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span> newPoints<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span>Scalar<span class="token operator">&gt;</span> myColorValues<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> newPoints<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">circle</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span>newPoints<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> newPoints<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span>myColorValues<span class="token punctuation">[</span>newPoints<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>FILLED<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">// \u6355\u6349\u56FE\u50CF\u8FB9\u6846</span>
<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	VideoCapture <span class="token function">cap</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u76F8\u673Aid=0</span>


	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		cap<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>

		newPoints<span class="token operator">=</span><span class="token function">findColor</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">drawOnCanvas</span><span class="token punctuation">(</span>newPoints<span class="token punctuation">,</span>myColorValues<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image&quot;</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u589E\u52A0\u5EF6\u65F6 1ms\uFF0C\u4EE5\u514D\u592A\u6162</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u6587\u4EF6\u626B\u63CF\u4EEA" tabindex="-1"><a class="header-anchor" href="#\u6587\u4EF6\u626B\u63CF\u4EEA" aria-hidden="true">#</a> \u6587\u4EF6\u626B\u63CF\u4EEA</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;opencv2/imgcodecs.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;opencv2/highgui.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;opencv2/imgproc.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>

<span class="token comment">/// &lt;summary&gt;</span>
<span class="token comment">/// Project 2 \u2013 Document Scanner</span>
<span class="token comment">/// \u56FE\u50CF\u9884\u5904\u7406\uFF1A\u8F6C\u6362\u4E3A\u7070\u5EA6\u3001\u6DFB\u52A0\u6A21\u7CCA\u3001\u4F7F\u7528Canny\u8FB9\u7F18\u68C0\u6D4B\u5668\u627E\u5230\u8FB9\u7F18\uFF08\u77E5\u9053\u7EB8\u5F20\u5728\u54EA\u91CC\uFF09\u3001\u57FA\u4E8E\u7EB8\u5F20\u7684\u5750\u6807\u63D0\u53D6\u56DB\u4E2A\u89D2\u5F97\u5230\u9876\u89C6\u56FE</span>
<span class="token comment">/// &lt;/summary&gt;</span>

Mat imgOriginal<span class="token punctuation">,</span> imgGray<span class="token punctuation">,</span> imgBlur<span class="token punctuation">,</span> imgCanny<span class="token punctuation">,</span> imgDil<span class="token punctuation">,</span> imgErode<span class="token punctuation">,</span> imgThre<span class="token punctuation">,</span> imgWarp<span class="token punctuation">,</span> imgCrop<span class="token punctuation">;</span>
vector<span class="token operator">&lt;</span>Point<span class="token operator">&gt;</span> initialPoints<span class="token punctuation">,</span>docPoints<span class="token punctuation">;</span>
<span class="token keyword">float</span> w <span class="token operator">=</span> <span class="token number">420</span><span class="token punctuation">,</span> h <span class="token operator">=</span> <span class="token number">596</span><span class="token punctuation">;</span>
Mat <span class="token function">preProcessing</span><span class="token punctuation">(</span>Mat img<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">cvtColor</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> imgGray<span class="token punctuation">,</span> COLOR_BGR2GRAY<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//cvt\u662Fconvert\u7684\u7F29\u5199\uFF0C\u5C06\u56FE\u50CF\u4ECE\u4E00\u79CD\u989C\u8272\u7A7A\u95F4\u8F6C\u6362\u4E3A\u53E6\u4E00\u79CD\u989C\u8272\u7A7A\u95F4\u3002</span>
	<span class="token function">GaussianBlur</span><span class="token punctuation">(</span>imgGray<span class="token punctuation">,</span> imgBlur<span class="token punctuation">,</span><span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u4F7F\u7528\u9AD8\u65AF\u6EE4\u6CE2\u5668\u6A21\u7CCA\u56FE\u50CF\u3002\u8BE5\u51FD\u6570\u5C06\u6E90\u56FE\u50CF\u4E0E\u6307\u5B9A\u7684\u9AD8\u65AF\u6838\u8FDB\u884C\u5377\u79EF,Size(7,7)\u662F\u6838\u5927\u5C0F,\u6570\u5B57\u8D8A\u5927\u8D8A\u6A21\u7CCA</span>
	<span class="token function">Canny</span><span class="token punctuation">(</span>imgBlur<span class="token punctuation">,</span> imgCanny<span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">75</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u8FB9\u7F18\u68C0\u6D4B\uFF0C\u9608\u503C1\uFF0C2\u53EF\u8C03\uFF0C\u76EE\u7684\uFF1A\u663E\u793A\u66F4\u591A\u7684\u8FB9\u7F18</span>

	Mat kernel <span class="token operator">=</span> <span class="token function">getStructuringElement</span><span class="token punctuation">(</span>MORPH_RECT<span class="token punctuation">,</span> <span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u521B\u5EFA\u4E00\u4E2A\u6838\uFF0C\u589E\u52A0Size\uFF08\u53EA\u80FD\u662F\u5947\u6570\uFF09\u4F1A\u6269\u5F20/\u4FB5\u8680\u66F4\u591A</span>
	<span class="token function">dilate</span><span class="token punctuation">(</span>imgCanny<span class="token punctuation">,</span> imgDil<span class="token punctuation">,</span> kernel<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u6269\u5F20\u8FB9\u7F18\uFF08\u589E\u52A0\u8FB9\u7F18\u539A\u5EA6\uFF09</span>
	<span class="token comment">//erode(imgDil, imgErode, kernel);//\u4FB5\u8680\u8FB9\u7F18\uFF08\u51CF\u5C0F\u8FB9\u7F18\u539A\u5EA6\uFF09</span>
	<span class="token keyword">return</span> imgDil<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

vector<span class="token operator">&lt;</span>Point<span class="token operator">&gt;</span><span class="token comment">/*\u8FD4\u56DE\u7EB8\u5F20\u76844\u4E2A\u89D2\u70B9*/</span> <span class="token function">getContours</span><span class="token punctuation">(</span>Mat imgDil<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//imgDil\u662F\u4F20\u5165\u7684\u6269\u5F20\u8FB9\u7F18\u7684\u56FE\u50CF\u7528\u6765\u67E5\u627E\u8F6E\u5ED3\uFF0Cimg\u662F\u8981\u5728\u5176\u4E0A\u7ED8\u5236\u8F6E\u5ED3\u7684\u56FE\u50CF</span>
	vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span>Point<span class="token operator">&gt;&gt;</span> contours<span class="token punctuation">;</span><span class="token comment">//\u8F6E\u5ED3\u68C0\u6D4B\u5230\u7684\u8F6E\u5ED3\u3002\u6BCF\u4E2A\u8F6E\u5ED3\u7EBF\u5B58\u50A8\u4E3A\u4E00\u4E2A\u70B9\u7684\u5411\u91CF</span>

	vector<span class="token operator">&lt;</span>Vec4i<span class="token operator">&gt;</span> hierarchy<span class="token punctuation">;</span><span class="token comment">//\u5305\u542B\u5173\u4E8E\u6620\u50CF\u62D3\u6251\u7684\u4FE1\u606F  typedef Vec&lt;int, 4&gt; Vec4i;\u5177\u67094\u4E2A\u6574\u6570\u503C</span>

	<span class="token comment">//\u5728\u4E8C\u503C\u56FE\u50CF\u4E2D\u67E5\u627E\u8F6E\u5ED3\u3002\u8BE5\u51FD\u6570\u5229\u7528\u8BE5\u7B97\u6CD5\u4ECE\u4E8C\u503C\u56FE\u50CF\u4E2D\u63D0\u53D6\u8F6E\u5ED3</span>
	<span class="token function">findContours</span><span class="token punctuation">(</span>imgDil<span class="token punctuation">,</span> contours<span class="token punctuation">,</span> hierarchy<span class="token punctuation">,</span> RETR_EXTERNAL<span class="token punctuation">,</span> CHAIN_APPROX_SIMPLE<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//drawContours(img, contours, -1, Scalar(255, 0, 255), 2);//img\uFF1A\u8981\u7ED8\u5236\u8F6E\u5ED3\u5728\u4EC0\u4E48\u56FE\u7247\u4E0A\uFF0Ccontours\uFF1A\u8981\u7ED8\u5236\u7684\u8F6E\u5ED3\uFF0C-1\u5B9A\u4E49\u8981\u7ED8\u5236\u7684\u8F6E\u5ED3\u53F7\uFF08-1\u8868\u793A\u6240\u6709\u8F6E\u5ED3\uFF09\uFF0CSaclar\u8868\u793A\u8F6E\u5ED3\u989C\u8272\uFF0C2\u8868\u793A\u539A\u5EA6</span>

	vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span>Point<span class="token operator">&gt;&gt;</span> <span class="token function">conPoly</span><span class="token punctuation">(</span>contours<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//conploy\u7684\u6570\u91CF\u5E94\u5C0F\u4E8Econtours</span>
	vector<span class="token operator">&lt;</span>Rect<span class="token operator">&gt;</span> <span class="token function">boundRect</span><span class="token punctuation">(</span>contours<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	vector<span class="token operator">&lt;</span>Point<span class="token operator">&gt;</span> biggest<span class="token punctuation">;</span>
	<span class="token keyword">int</span> maxArea <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

	<span class="token comment">//\u8FC7\u6EE4\u5668\uFF1A\u901A\u8FC7\u8F6E\u5ED3\u9762\u79EF\u6765\u8FC7\u6EE4\u566A\u58F0</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> contours<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//\u904D\u5386\u68C0\u6D4B\u5230\u7684\u8F6E\u5ED3</span>
		<span class="token keyword">int</span> area <span class="token operator">=</span> <span class="token function">contourArea</span><span class="token punctuation">(</span>contours<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">//cout &lt;&lt; area &lt;&lt; endl;</span>

		string objectType<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>area <span class="token operator">&gt;</span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//\u8F6E\u5ED3\u9762\u79EF\uFF1E1000\u624D\u7ED8\u5236</span>
			<span class="token comment">//\u8BA1\u7B97\u8F6E\u5ED3\u5468\u957F\u6216\u51F9\u5751\u957F\u5EA6\u3002\u8BE5\u51FD\u6570\u8BA1\u7B97\u4E86\u66F2\u7EBF\u957F\u5EA6\u548C\u5C01\u95ED\u7684\u5468\u957F\u3002</span>
			<span class="token keyword">float</span> peri <span class="token operator">=</span> <span class="token function">arcLength</span><span class="token punctuation">(</span>contours<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u8BA1\u7B97\u5C01\u95ED\u8F6E\u5ED3\u5468\u957F</span>
			<span class="token function">approxPolyDP</span><span class="token punctuation">(</span>contours<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> conPoly<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0.02</span> <span class="token operator">*</span> peri<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u4EE5\u6307\u5B9A\u7684\u7CBE\u5EA6\u8FD1\u4F3C\u591A\u8FB9\u5F62\u66F2\u7EBF\u3002\u7B2C\u4E8C\u4E2A\u53C2\u6570conPloy[i]\u5B58\u50A8\u8FD1\u4F3C\u7684\u7ED3\u679C\uFF0C\u662F\u8F93\u51FA\u3002</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>area <span class="token operator">&gt;</span> maxArea<span class="token operator">&amp;&amp;</span>conPoly<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				biggest <span class="token operator">=</span> <span class="token punctuation">{</span> conPoly<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>conPoly<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>conPoly<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>conPoly<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
				maxArea <span class="token operator">=</span> area<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">//rectangle/*\u7ED8\u5236\u8FB9\u754C\u77E9\u5F62*/(imgOriginal, boundRect[i].tl()/*tl()\uFF1Atopleft\u77E9\u5F62\u5DE6\u4E0A\u89D2\u5750\u6807*/, boundRect[i].br()/*br()\uFF1Abottom right\u77E9\u5F62\u53F3\u4E0B\u89D2\u5750\u6807*/, Scalar(0, 255, 0), 5);</span>
			<span class="token comment">//drawContours(imgOriginal, conPoly, i, Scalar(255, 0, 255), 2);</span>

		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> biggest<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">drawPoints</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>Point<span class="token operator">&gt;</span> points<span class="token punctuation">,</span> Scalar color<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> points<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">circle</span><span class="token punctuation">(</span>imgOriginal<span class="token punctuation">,</span> points<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> color<span class="token punctuation">,</span> FILLED<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">putText</span><span class="token punctuation">(</span>imgOriginal<span class="token punctuation">,</span> <span class="token function">to_string</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> points<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> FONT_HERSHEY_PLAIN<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> color<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

vector<span class="token operator">&lt;</span>Point<span class="token operator">&gt;</span> <span class="token function">reorder</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>Point<span class="token operator">&gt;</span> points<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//\u6807\u8BB0\u70B9\u7684\u987A\u5E8F\u4F1A\u53D8\uFF0C\u8981\u786E\u5B9A\u4E00\u4E2A\u987A\u5E8F 0 1</span>
											<span class="token comment">//								 2 3</span>
	vector<span class="token operator">&lt;</span>Point<span class="token operator">&gt;</span> newPoints<span class="token punctuation">;</span>
	vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span>  sumPoints<span class="token punctuation">,</span> subPoints<span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		sumPoints<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>points<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">+</span> points<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
		subPoints<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>points<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">-</span> points<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	newPoints<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>points<span class="token punctuation">[</span>min_element<span class="token comment">/* find smallest element*/</span><span class="token punctuation">(</span>sumPoints<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> sumPoints<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">-</span>sumPoints<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	newPoints<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>points<span class="token punctuation">[</span>max_element<span class="token comment">/* find largest element*/</span><span class="token punctuation">(</span>subPoints<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> subPoints<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> subPoints<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	newPoints<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>points<span class="token punctuation">[</span>min_element<span class="token comment">/* find smallest element*/</span><span class="token punctuation">(</span>subPoints<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> subPoints<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> subPoints<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	newPoints<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>points<span class="token punctuation">[</span>max_element<span class="token comment">/* find largest element*/</span><span class="token punctuation">(</span>sumPoints<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> sumPoints<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> sumPoints<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> newPoints<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

Mat <span class="token function">getWarp</span><span class="token punctuation">(</span>Mat img<span class="token punctuation">,</span>vector<span class="token operator">&lt;</span>Point<span class="token operator">&gt;</span> points<span class="token punctuation">,</span><span class="token keyword">float</span> w<span class="token punctuation">,</span><span class="token keyword">float</span> h<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	Point2f src<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> points<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>points<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>points<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>points<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//Point2f\u8868\u793A\u6D6E\u70B9\u6570</span>
	Point2f dst<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">{</span><span class="token number">0.0f</span><span class="token punctuation">,</span><span class="token number">0.0f</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>w<span class="token punctuation">,</span><span class="token number">0.0f</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0.0f</span><span class="token punctuation">,</span>h<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>w<span class="token punctuation">,</span>h<span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//Point2f\u8868\u793A\u6D6E\u70B9\u6570</span>

	Mat matrix <span class="token operator">=</span> <span class="token function">getPerspectiveTransform</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> dst<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">warpPerspective</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> imgWarp<span class="token punctuation">,</span> matrix<span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span>h<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> imgWarp<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	string path <span class="token operator">=</span> <span class="token string">&quot;Resources/paper.jpg&quot;</span><span class="token punctuation">;</span>
	imgOriginal<span class="token operator">=</span><span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//resize(imgOriginal/*source*/, imgOriginal/*destination*/, Size()/*\u4E0D\u5B9A\u4E49\u5C3A\u5BF8*/, 0.5/*\u5B9A\u4E49\u6BD4\u4F8B*/, 0.5/*\u5B9A\u4E49\u6BD4\u4F8B*/);</span>

	<span class="token comment">//\u9884\u5904\u7406</span>
	imgThre <span class="token operator">=</span> <span class="token function">preProcessing</span><span class="token punctuation">(</span>imgOriginal<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//\u83B7\u5F97\u8F6E\u5ED3--\u83B7\u5F97\u6700\u5927\u77E9\u5F62</span>
	initialPoints<span class="token operator">=</span><span class="token function">getContours</span><span class="token punctuation">(</span>imgThre<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//drawPoints(initialPoints, Scalar(0, 0, 255));</span>
	docPoints <span class="token operator">=</span> <span class="token function">reorder</span><span class="token punctuation">(</span>initialPoints<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//drawPoints(docPoints, Scalar(0, 255, 0));</span>
	<span class="token comment">//\u626D\u66F2</span>
	imgWarp <span class="token operator">=</span> <span class="token function">getWarp</span><span class="token punctuation">(</span>imgOriginal<span class="token punctuation">,</span> docPoints<span class="token punctuation">,</span> w<span class="token punctuation">,</span> h<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//\u88C1\u526A\u591A\u4F59\u7684\u8FB9--\u901A\u8FC7\u521B\u5EFA\u4E00\u4E2A\u77E9\u5F62</span>
	<span class="token keyword">int</span> cropValue <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
	Rect <span class="token function">roi</span><span class="token punctuation">(</span>cropValue<span class="token comment">/*\u6BCF\u6761\u8FB9\u8981\u51CF\u53BB\u7684\u50CF\u7D20*/</span><span class="token punctuation">,</span> cropValue<span class="token punctuation">,</span> w <span class="token operator">-</span> <span class="token number">2</span> <span class="token operator">*</span> cropValue<span class="token comment">/*\u5BBD\u5EA6*/</span><span class="token punctuation">,</span> h <span class="token operator">-</span> <span class="token number">2</span> <span class="token operator">*</span> cropValue<span class="token comment">/*\u9AD8\u5EA6*/</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	imgCrop <span class="token operator">=</span> <span class="token function">imgWarp</span><span class="token punctuation">(</span>roi<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image&quot;</span><span class="token punctuation">,</span> imgOriginal<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image Dilation&quot;</span><span class="token punctuation">,</span> imgThre<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image Warp&quot;</span><span class="token punctuation">,</span> imgWarp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image Crop&quot;</span><span class="token punctuation">,</span> imgCrop<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u8F66\u724C\u68C0\u6D4B\u5668" tabindex="-1"><a class="header-anchor" href="#\u8F66\u724C\u68C0\u6D4B\u5668" aria-hidden="true">#</a> \u8F66\u724C\u68C0\u6D4B\u5668</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;opencv2/imgcodecs.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;opencv2/highgui.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;opencv2/imgproc.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;opencv2/objdetect.hpp&gt;</span><span class="token comment">//\u5BF9\u8C61\u68C0\u6D4B\u5934\u6587\u4EF6</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>
<span class="token comment">/// &lt;summary&gt;</span>
<span class="token comment">/// Project 3 \u2013 License Plate(\u8F66\u724C) Detector \u5B66\u4E60\u5982\u4F55\u68C0\u6D4B\u8F66\u724C\u548C\u5982\u4F55\u88C1\u526A\u5E76\u4FDD\u5B58\u8FD9\u4E9B\u533A\u57DF</span>
<span class="token comment">/// &lt;/summary&gt;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	VideoCapture <span class="token function">cap</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u76F8\u673Aid=0</span>
	Mat img<span class="token punctuation">;</span>

	<span class="token comment">//\u52A0\u8F7D\u6A21\u578B</span>
	CascadeClassifier plateCascade<span class="token punctuation">;</span><span class="token comment">/*\u7528\u4E8E\u5BF9\u8C61\u68C0\u6D4B\u7684\u7EA7\u8054\u5206\u7C7B\u5668\u7C7B*/</span>
	plateCascade<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">&quot;Resources/haarcascade_russian_plate_number.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u4ECE\u6587\u4EF6\u52A0\u8F7D\u5206\u7C7B\u5668(\u5DF2\u7ECF\u8BAD\u7EC3\u597D\u7684\u6A21\u578B)</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>plateCascade<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;XML file not loaded&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token comment">//\u68C0\u6D4B\u6587\u4EF6\u662F\u5426\u52A0\u8F7D\u6210\u529F</span>

	vector<span class="token operator">&lt;</span>Rect<span class="token operator">&gt;</span> plates<span class="token punctuation">;</span>

	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		cap<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//\u53EF\u4EE5\u66F4\u6539\u6BD4\u4F8B\u56E0\u5B50\u548C\u6700\u5C0F\u90BB\u5C45\u6765\u8C03\u6574\u68C0\u6D4B\u6210\u529F\u7387</span>
		plateCascade<span class="token punctuation">.</span><span class="token function">detectMultiScale</span><span class="token punctuation">(</span>img<span class="token comment">/*\u8F93\u5165*/</span><span class="token punctuation">,</span> plates<span class="token comment">/*\u8F93\u51FA*/</span><span class="token punctuation">,</span> <span class="token number">1.1</span><span class="token comment">/*\u6BD4\u4F8B\u56E0\u5B50*/</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token comment">/*\u6700\u5C0F\u90BB\u5C45*/</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5728\u8F93\u5165\u56FE\u50CF\u4E2D\u68C0\u6D4B\u4E0D\u540C\u5927\u5C0F\u7684\u5BF9\u8C61\u3002\u68C0\u6D4B\u5230\u7684\u5BF9\u8C61\u5C06\u4EE5\u77E9\u5F62\u5217\u8868\u7684\u5F62\u5F0F\u8FD4\u56DE\u3002</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> plates<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			Mat imgCrop <span class="token operator">=</span> <span class="token function">img</span><span class="token punctuation">(</span>plates<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//plates\u662F\u77E9\u5F62\u5217\u8868\uFF0Cplates[i]\u662F\u77E9\u5F62</span>
			<span class="token comment">//imshow(to_string(i), imgCrop);</span>
		<span class="token function">imwrite</span><span class="token punctuation">(</span><span class="token string">&quot;Resources/Plates/&quot;</span> <span class="token operator">+</span> <span class="token function">to_string</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;.png&quot;</span><span class="token punctuation">,</span> imgCrop<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">rectangle</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> plates<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">tl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> plates<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">br</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u7ED8\u5236\u77E9\u5F62</span>
		<span class="token punctuation">}</span>

		<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image&quot;</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u589E\u52A0\u5EF6\u65F6\uFF0C0\u8868\u793A\u65E0\u7A77</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u53E3\u7F69\u8BC6\u522B" tabindex="-1"><a class="header-anchor" href="#\u53E3\u7F69\u8BC6\u522B" aria-hidden="true">#</a> \u53E3\u7F69\u8BC6\u522B</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgcodecs.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/highgui.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgproc.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/objdetect.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// \u521B\u5EFA\u6444\u50CF\u5934\u8FDE\u63A5 \u5982\u679C\u662F\u53EA\u8FDE\u63A5\u4E00\u4E2A\u6444\u50CF\u5934\u5219\u9ED8\u8BA40\uFF08\u5305\u62EC\u7B14\u8BB0\u672C\u7535\u8111\u81EA\u5E26\u7684\u6444\u50CF\u5934\uFF09\uFF0C\u5176\u4F59\u7684\u5916\u63A5\u53EF\u80FD\u9700\u8981\u66F4\u6362\u6570\u5B57</span>
	VideoCapture <span class="token function">cap</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Mat frame<span class="token punctuation">;</span> <span class="token comment">// \u6444\u50CF\u5934\u5BF9\u8C61\u8BFB\u53D6\u6570\u636E;</span>

	CascadeClassifier face_cascade<span class="token punctuation">,</span> nose_cascade<span class="token punctuation">,</span> mask_detector<span class="token punctuation">;</span>
	<span class="token comment">// \u52A0\u8F7D\u4EBA\u8138\u68C0\u6D4B\u8BAD\u7EC3\u6A21\u578B</span>
	face_cascade<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">&quot;Resources/haarcascade_frontalface_alt2.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// \u52A0\u8F7D\u4EBA\u8138\u9F3B\u5B50\u6A21\u578B</span>
	nose_cascade<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">&quot;Resources/haarcascade_mcs_nose.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// \u52A0\u8F7D\u53E3\u7F69\u6A21\u578B</span>
	mask_detector<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">&quot;Resources/mask.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// \u5224\u65AD\u662F\u5426\u4E3A\u7A7A</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>face_cascade<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\u4EBA\u8138\u6A21\u578BXML\u6587\u4EF6\u672A\u52A0\u8F7D&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token punctuation">}</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>nose_cascade<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\u4EBA\u8138\u9F3B\u5B50\u6A21\u578BXML\u6587\u4EF6\u672A\u52A0\u8F7D&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token punctuation">}</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>mask_detector<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\u53E3\u7F69\u6A21\u578BXML\u6587\u4EF6\u672A\u52A0\u8F7D&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token punctuation">}</span>

	<span class="token comment">/*
	detectMultiScale\u51FD\u6570\u3002\u5B83\u53EF\u4EE5\u68C0\u6D4B\u51FA\u56FE\u7247\u4E2D\u6240\u6709\u7684\u4EBA\u8138\uFF0C\u5E76\u5C06\u4EBA\u8138\u7528vector\u4FDD\u5B58\u5404\u4E2A\u4EBA\u8138\u7684\u5750\u6807\u3001\u5927\u5C0F\uFF08\u7528\u77E9\u5F62\u8868\u793A\uFF09\uFF0C\u51FD\u6570\u7531\u5206\u7C7B\u5668\u5BF9\u8C61\u8C03\u7528\uFF1A
	void detectMultiScale(
		const Mat&amp; image,
		CV_OUT vector&lt;Rect&gt;&amp; objects,
		double scaleFactor = 1.1,
		int minNeighbors = 3,
		int flags = 0,
		Size minSize = Size(),
		Size maxSize = Size()
	);
	\u51FD\u6570\u4ECB\u7ECD\uFF1A
	\u53C2\u65701\uFF1Aimage--\u5F85\u68C0\u6D4B\u56FE\u7247\uFF0C\u4E00\u822C\u4E3A\u7070\u5EA6\u56FE\u50CF\u52A0\u5FEB\u68C0\u6D4B\u901F\u5EA6\uFF1B
	\u53C2\u65702\uFF1Aobjects--\u88AB\u68C0\u6D4B\u7269\u4F53\u7684\u77E9\u5F62\u6846\u5411\u91CF\u7EC4\uFF1B
	\u53C2\u65703\uFF1AscaleFactor--\u8868\u793A\u5728\u524D\u540E\u4E24\u6B21\u76F8\u7EE7\u7684\u626B\u63CF\u4E2D\uFF0C\u641C\u7D22\u7A97\u53E3\u7684\u6BD4\u4F8B\u7CFB\u6570\u3002\u9ED8\u8BA4\u4E3A1.1\u5373\u6BCF\u6B21\u641C\u7D22\u7A97\u53E3\u4F9D\u6B21\u6269\u592710%;
	\u53C2\u65704\uFF1AminNeighbors--\u8868\u793A\u6784\u6210\u68C0\u6D4B\u76EE\u6807\u7684\u76F8\u90BB\u77E9\u5F62\u7684\u6700\u5C0F\u4E2A\u6570(\u9ED8\u8BA4\u4E3A3\u4E2A)\u3002
			\u5982\u679C\u7EC4\u6210\u68C0\u6D4B\u76EE\u6807\u7684\u5C0F\u77E9\u5F62\u7684\u4E2A\u6570\u548C\u5C0F\u4E8E min_neighbors - 1 \u90FD\u4F1A\u88AB\u6392\u9664\u3002
			\u5982\u679Cmin_neighbors \u4E3A 0, \u5219\u51FD\u6570\u4E0D\u505A\u4EFB\u4F55\u64CD\u4F5C\u5C31\u8FD4\u56DE\u6240\u6709\u7684\u88AB\u68C0\u5019\u9009\u77E9\u5F62\u6846\uFF0C
			\u8FD9\u79CD\u8BBE\u5B9A\u503C\u4E00\u822C\u7528\u5728\u7528\u6237\u81EA\u5B9A\u4E49\u5BF9\u68C0\u6D4B\u7ED3\u679C\u7684\u7EC4\u5408\u7A0B\u5E8F\u4E0A\uFF1B
	\u53C2\u65705\uFF1Aflags--\u8981\u4E48\u4F7F\u7528\u9ED8\u8BA4\u503C\uFF0C\u8981\u4E48\u4F7F\u7528CV_HAAR_DO_CANNY_PRUNING\uFF0C\u5982\u679C\u8BBE\u7F6E\u4E3A
			CV_HAAR_DO_CANNY_PRUNING\uFF0C\u90A3\u4E48\u51FD\u6570\u5C06\u4F1A\u4F7F\u7528Canny\u8FB9\u7F18\u68C0\u6D4B\u6765\u6392\u9664\u8FB9\u7F18\u8FC7\u591A\u6216\u8FC7\u5C11\u7684\u533A\u57DF\uFF0C
			\u56E0\u6B64\u8FD9\u4E9B\u533A\u57DF\u901A\u5E38\u4E0D\u4F1A\u662F\u4EBA\u8138\u6240\u5728\u533A\u57DF\uFF1B
	\u53C2\u65706\u30017\uFF1AminSize\u548CmaxSize\u7528\u6765\u9650\u5236\u5F97\u5230\u7684\u76EE\u6807\u533A\u57DF\u7684\u8303\u56F4\u3002
	*/</span>
	<span class="token comment">// \u521B\u5EFA\u77E9\u5F62\u5E76\u7528\u4E8E\u6807\u8BC6\u4EBA\u8138</span>
	vector<span class="token operator">&lt;</span>Rect<span class="token operator">&gt;</span> faces<span class="token punctuation">,</span> masks<span class="token punctuation">,</span> noses<span class="token punctuation">;</span>

	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// \u83B7\u53D6\u56FE\u7247\u6BCF\u4E00\u5E27\u7684\u6570\u636E</span>
		cap<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>frame<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// \u8F6C\u6362\u56FE\u50CF\u989C\u8272</span>
		<span class="token comment">/*cvtColor(img, frame, COLOR_BGR2GRAY);*/</span>
		<span class="token comment">// \u68C0\u6D4B\u4EBA\u8138\uFF0C\u5E76\u8F6C\u6362\u4E3A\u4EBA\u8138\u53C2\u6570</span>
		face_cascade<span class="token punctuation">.</span><span class="token function">detectMultiScale</span><span class="token punctuation">(</span>frame<span class="token punctuation">,</span> faces<span class="token punctuation">,</span> <span class="token number">1.2</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		mask_detector<span class="token punctuation">.</span><span class="token function">detectMultiScale</span><span class="token punctuation">(</span>frame<span class="token punctuation">,</span> masks<span class="token punctuation">,</span> <span class="token number">1.03</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		nose_cascade<span class="token punctuation">.</span><span class="token function">detectMultiScale</span><span class="token punctuation">(</span>frame<span class="token punctuation">,</span> noses<span class="token punctuation">,</span> <span class="token number">1.2</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// \u641C\u7D22\u4EBA\u8138</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> faces<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
		<span class="token punctuation">{</span>
			<span class="token comment">/*
			rectangle \u7ED8\u5236\u8FB9\u754C\u77E9\u5F62
				tl()\uFF1Atopleft\u77E9\u5F62\u5DE6\u4E0A\u89D2\u5750\u6807
				br()\uFF1Abottom right\u77E9\u5F62\u53F3\u4E0B\u89D2\u5750\u6807
			*/</span>
			<span class="token function">rectangle</span><span class="token punctuation">(</span>frame<span class="token punctuation">,</span> faces<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">tl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> faces<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">br</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// \u5B58\u653E\u6587\u672C TODO:Point() \u5750\u6807\u5E94\u8BE5\u4FEE\u6539\u4E3A\u52A8\u6001</span>
			<span class="token function">putText</span><span class="token punctuation">(</span>frame<span class="token punctuation">,</span> <span class="token string">&quot;no_mask&quot;</span><span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">137</span><span class="token punctuation">,</span> <span class="token number">262</span><span class="token punctuation">)</span><span class="token punctuation">,</span> FONT_HERSHEY_DUPLEX<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// \u641C\u7D22\u4EBA\u8138\u9F3B\u5B50</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> noses<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
		<span class="token punctuation">{</span>
			<span class="token function">rectangle</span><span class="token punctuation">(</span>frame<span class="token punctuation">,</span> noses<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">tl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> noses<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">br</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">putText</span><span class="token punctuation">(</span>frame<span class="token punctuation">,</span> <span class="token string">&quot;no_mask&quot;</span><span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">137</span><span class="token punctuation">,</span> <span class="token number">262</span><span class="token punctuation">)</span><span class="token punctuation">,</span> FONT_HERSHEY_DUPLEX<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// \u641C\u7D22\u53E3\u7F69</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> masks<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
		<span class="token punctuation">{</span>
			<span class="token function">rectangle</span><span class="token punctuation">(</span>frame<span class="token punctuation">,</span> masks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">tl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> masks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">br</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">putText</span><span class="token punctuation">(</span>frame<span class="token punctuation">,</span> <span class="token string">&quot;have_mask&quot;</span><span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">137</span><span class="token punctuation">,</span> <span class="token number">262</span><span class="token punctuation">)</span><span class="token punctuation">,</span> FONT_HERSHEY_DUPLEX<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// imshow \u7528\u4E8E\u663E\u793A\u56FE\u50CF</span>
		<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;Image&quot;</span><span class="token punctuation">,</span> frame<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// waitKey() \u6570\u503C\u8D8A\u5927\u64AD\u653E\u8D8A\u6162</span>
		<span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u53BB\u9664\u7968\u636E\u5370\u7AE0\u53CA\u901A\u9053\u5206\u79BB" tabindex="-1"><a class="header-anchor" href="#\u53BB\u9664\u7968\u636E\u5370\u7AE0\u53CA\u901A\u9053\u5206\u79BB" aria-hidden="true">#</a> \u53BB\u9664\u7968\u636E\u5370\u7AE0\u53CA\u901A\u9053\u5206\u79BB</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/core/core.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/highgui/highgui.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgproc/imgproc.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">//\u5B9A\u4E49\u76F8\u5173\u53D8\u91CF</span>
	Mat srcImage<span class="token punctuation">,</span> newImage<span class="token punctuation">;</span>
	Mat srcImage_B<span class="token punctuation">,</span> srcImage_G<span class="token punctuation">,</span> srcImage_R<span class="token punctuation">;</span>
	<span class="token comment">//\u5B58\u653EMat\u7684\u6570\u7EC4vector</span>
	vector<span class="token operator">&lt;</span>Mat<span class="token operator">&gt;</span> channels_BGR<span class="token punctuation">;</span>
	<span class="token comment">//\u8BFB\u53D6\u539F\u59CB\u56FE\u50CF\u5E76\u68C0\u67E5\u56FE\u50CF\u662F\u5426\u8BFB\u53D6\u6210\u529F</span>
	string path <span class="token operator">=</span> <span class="token string">&quot;Resources/voucher.jfif&quot;</span><span class="token punctuation">;</span>
	srcImage <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>srcImage<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\u8BFB\u53D6\u56FE\u50CF\u6709\u8BEF\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165\u6B63\u786E\u8DEF\u5F84\uFF01\\n&quot;</span><span class="token punctuation">;</span>
		<span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;src\u539F\u56FE\u50CF&quot;</span><span class="token punctuation">,</span> srcImage<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//\u5728\u7A97\u53E3\u663E\u793A\u539F\u56FE\u50CF</span>
   <span class="token comment">//\u5BF9\u52A0\u8F7D\u7684\u539F\u56FE\u50CF\u8FDB\u884C\u901A\u9053\u5206\u79BB\uFF0C\u5373\u628A\u4E00\u4E2A3\u901A\u9053\u56FE\u50CF\u8F6C\u6362\u6210\u4E3A3\u4E2A\u5355\u901A\u9053\u56FE\u50CF</span>
	<span class="token function">split</span><span class="token punctuation">(</span>srcImage<span class="token punctuation">,</span> channels_BGR<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//\u4ECE\u6570\u7EC4\u4E2D\u53D6\u51FA3\u79CD\u989C\u8272,0\u901A\u9053\u4E3AB\u5206\u91CF\uFF0C1\u901A\u9053\u4E3AG\u5206\u91CF\uFF0C2\u901A\u9053\u4E3AR\u5206\u91CF\u3002</span>
	srcImage_B <span class="token operator">=</span> channels_BGR<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	srcImage_G <span class="token operator">=</span> channels_BGR<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	srcImage_R <span class="token operator">=</span> channels_BGR<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;srcImage_B\u901A\u9053&quot;</span><span class="token punctuation">,</span> srcImage_B<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//\u5206\u522B\u663E\u793AR\uFF0CG\uFF0CB\u5404\u4E2A\u901A\u9053\u56FE\u50CF</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;srcImage_G\u901A\u9053&quot;</span><span class="token punctuation">,</span> srcImage_G<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;srcImage_R\u901A\u9053&quot;</span><span class="token punctuation">,</span> srcImage_R<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// \u5168\u5C40\u4E8C\u503C\u5316</span>
	Mat gray<span class="token punctuation">;</span>
	<span class="token function">cvtColor</span><span class="token punctuation">(</span>srcImage<span class="token punctuation">,</span> gray<span class="token punctuation">,</span> COLOR_BGR2GRAY<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> th <span class="token operator">=</span> <span class="token number">170</span><span class="token punctuation">;</span> <span class="token comment">//\u9608\u503C\u8981\u6839\u636E\u5B9E\u9645\u60C5\u51B5\u8C03\u6574</span>
	Mat binary<span class="token punctuation">;</span>
	<span class="token comment">//CV_THRESH_BINARY\u4EE3\u8868\u9608\u503C\u5176\u4E2D\u4E00\u79CD\u6A21\u5F0F\uFF0C\u4E0B\u671F\u4F1A\u8BB2\u8D77\u9608\u503C</span>
	<span class="token function">threshold</span><span class="token punctuation">(</span>gray<span class="token punctuation">,</span> binary<span class="token punctuation">,</span> th<span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> THRESH_BINARY<span class="token punctuation">)</span><span class="token punctuation">;</span>
	Mat red_binary<span class="token punctuation">;</span>
	<span class="token function">threshold</span><span class="token punctuation">(</span>srcImage_R<span class="token punctuation">,</span> red_binary<span class="token punctuation">,</span> th<span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> THRESH_BINARY<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;\u7070\u8272\u56FE + \u9608\u503C\u5904\u7406 &quot;</span><span class="token punctuation">,</span> binary<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;R\u901A\u9053+\u9608\u503C\u5904\u7406&quot;</span><span class="token punctuation">,</span> red_binary<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// \u5C063\u4E2A\u5355\u901A\u9053\u91CD\u65B0\u5408\u5E76\u6210\u4E00\u4E2A\u4E09\u901A\u9053\u56FE\u50CF</span>
	<span class="token function">merge</span><span class="token punctuation">(</span>channels_BGR<span class="token punctuation">,</span> newImage<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;\u5C06R\uFF0CG\uFF0CB\u901A\u9053\u5408\u5E76\u540E\u7684\u56FE\u50CF&quot;</span><span class="token punctuation">,</span> newImage<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u56FE\u50CF\u589E\u5F3A\u4E0E\u56FE\u50CF\u53BB\u566A-\u56FE\u50CF\u5206\u5272\u4E4B\u8FB9\u7F18\u68C0\u6D4B" tabindex="-1"><a class="header-anchor" href="#\u56FE\u50CF\u589E\u5F3A\u4E0E\u56FE\u50CF\u53BB\u566A-\u56FE\u50CF\u5206\u5272\u4E4B\u8FB9\u7F18\u68C0\u6D4B" aria-hidden="true">#</a> \u56FE\u50CF\u589E\u5F3A\u4E0E\u56FE\u50CF\u53BB\u566A\uFF0C\u56FE\u50CF\u5206\u5272\u4E4B\u8FB9\u7F18\u68C0\u6D4B</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;opencv2/core/core.hpp&quot;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;opencv2/imgproc/imgproc.hpp&quot;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;opencv2/highgui/highgui.hpp&quot;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">//\u30101\u3011\u4EE5\u7070\u5EA6\u6A21\u5F0F\u8BFB\u53D6\u539F\u59CB\u56FE\u50CF\u5E76\u663E\u793A</span>
    string path <span class="token operator">=</span> <span class="token string">&quot;Resources/test.png&quot;</span><span class="token punctuation">;</span>
    Mat srcImage <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>srcImage<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\u8BFB\u53D6\u56FE\u7247\u9519\u8BEF\uFF0C\u8BF7\u786E\u5B9A\u76EE\u5F55\u4E0B\u662F\u5426\u6709imread\u51FD\u6570\u6307\u5B9A\u56FE\u7247\u5B58\u5728~\uFF01&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;\u539F\u59CB\u56FE\u50CF&quot;</span><span class="token punctuation">,</span> srcImage<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u30102\u3011\u5C06\u8F93\u5165\u56FE\u50CF\u5EF6\u6269\u5230\u6700\u4F73\u7684\u5C3A\u5BF8\uFF0C\u8FB9\u754C\u75280\u8865\u5145</span>
    <span class="token comment">//\u79BB\u6563\u5085\u91CC\u53F6\u53D8\u6362\u7684\u8FD0\u884C\u901F\u5EA6\u4E0E\u56FE\u7247\u7684\u5C3A\u5BF8\u6709\u5F88\u5927\u5173\u7CFB\u3002</span>
    <span class="token comment">//\u5F53\u56FE\u50CF\u5C3A\u5BF8\u662F2\uFF0C3\uFF0C5\u6574\u6570\u500D\u65F6\uFF0C\u8BA1\u7B97\u901F\u5EA6\u6700\u5FEB\u3002getOptimalDFTSize\u5C31\u662F\u83B7\u53D6\u6700\u4F73\u5C3A\u5BF8</span>
    <span class="token keyword">int</span> m <span class="token operator">=</span> <span class="token function">getOptimalDFTSize</span><span class="token punctuation">(</span>srcImage<span class="token punctuation">.</span>rows<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token function">getOptimalDFTSize</span><span class="token punctuation">(</span>srcImage<span class="token punctuation">.</span>cols<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u5C06\u6DFB\u52A0\u7684\u50CF\u7D20\u521D\u59CB\u5316\u4E3A0.</span>
    Mat padded<span class="token punctuation">;</span>
    <span class="token comment">//copyMakeBorder\uFF08\uFF09\u51FD\u6570\u7684\u4F5C\u7528\u662F\u6269\u5145\u56FE\u50CF\u8FB9\u754C</span>
    <span class="token function">copyMakeBorder</span><span class="token punctuation">(</span>srcImage<span class="token punctuation">,</span> padded<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> m <span class="token operator">-</span> srcImage<span class="token punctuation">.</span>rows<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> n <span class="token operator">-</span> srcImage<span class="token punctuation">.</span>cols<span class="token punctuation">,</span> BORDER_CONSTANT<span class="token punctuation">,</span> <span class="token class-name">Scalar</span><span class="token double-colon punctuation">::</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u30103\u3011\u4E3A\u5085\u7ACB\u53F6\u53D8\u6362\u7684\u7ED3\u679C\uFF08\u590D\u6570\uFF09(\u5B9E\u90E8\u548C\u865A\u90E8)\u5206\u914D\u5B58\u50A8\u7A7A\u95F4\u3002</span>
    <span class="token comment">//\u5C06planes\u6570\u7EC4\u7EC4\u5408\u5408\u5E76\u6210\u4E00\u4E2A\u591A\u901A\u9053\u7684\u6570\u7EC4complexI</span>
    <span class="token comment">//1.\u5085\u91CC\u53F6\u7ED3\u679C\u662F\u590D\u6570\uFF0C\u8FD9\u5C31\u662F\u8BF4\u5BF9\u4E8E\u6BCF\u4E2A\u539F\u56FE\u50CF\u503C\uFF0C\u7ED3\u679C\u4F1A\u6709\u4E24\u4E2A\u56FE\u50CF\u503C</span>
    <span class="token comment">//2.\u9891\u57DF\u503C\u8303\u56F4\u8FDC\u8FDC\u8D85\u8FC7\u7A7A\u95F4\u503C\u8303\u56F4\uFF0C\u56E0\u6B64\u8981\u5C06\u9891\u57DF\u5B58\u50A8\u518Dfloat\u683C\u5F0F\u4E2D\u3002\u5E76\u591A\u52A0\u4E00\u4E2A\u901A\u9053\u50A8\u5B58\u590D\u6570\u90E8\u5206</span>
    <span class="token comment">//3.\u4EC0\u4E48\u662F\u901A\u9053\uFF1F\u8BF7\u7FFB\u5F00\u7B2C\u56DB\u7BC7\u6587\u7AE0\u8C22\u8C22\uFF0C\u5173\u6CE8\u4E00\u4E0B\u5C0F\u55F7\u7684\u516C\u4F17\u53F7\uFF1Aaoxiaoji</span>
    Mat planes<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token generic-function"><span class="token function">Mat_</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>padded<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Mat</span><span class="token double-colon punctuation">::</span><span class="token function">zeros</span><span class="token punctuation">(</span>padded<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> CV_32F<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    Mat complexI<span class="token punctuation">;</span>
    <span class="token function">merge</span><span class="token punctuation">(</span>planes<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> complexI<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u30104\u3011\u8FDB\u884C\u5C31\u5730\u79BB\u6563\u5085\u91CC\u53F6\u53D8\u6362</span>
    <span class="token function">dft</span><span class="token punctuation">(</span>complexI<span class="token punctuation">,</span> complexI<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u30105\u3011\u5C06\u590D\u6570\u8F6C\u6362\u4E3A\u5E45\u503C\uFF0C\u5373=&gt; log(1 + sqrt(Re(DFT(I))^2 + Im(DFT(I))^2))</span>
    <span class="token comment">//\u8BF7\u7FFB\u5F00\u7B2C\u56DB\u7BC7\u6587\u7AE0\u6709\u8BB2\u901A\u9053\u5206\u79BBsplit\u3002\u8C22\u8C22\uFF0C\u5173\u6CE8\u4E00\u4E0B\u5C0F\u55F7\u7684\u516C\u4F17\u53F7\uFF1Aaoxiaoji</span>
    <span class="token function">split</span><span class="token punctuation">(</span>complexI<span class="token punctuation">,</span> planes<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u5C06\u591A\u901A\u9053\u6570\u7EC4complexI\u5206\u79BB\u6210\u51E0\u4E2A\u5355\u901A\u9053\u6570\u7EC4\uFF0Cplanes[0] = Re(DFT(I), planes[1] = Im(DFT(I))</span>
    <span class="token comment">//\u8BA1\u7B97\u4E8C\u7EF4\u77E2\u91CF\u7684\u5E45\u503C</span>
    <span class="token function">magnitude</span><span class="token punctuation">(</span>planes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> planes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> planes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// planes[0] = magnitude</span>
    Mat magnitudeImage <span class="token operator">=</span> planes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">//\u30106\u3011\u8FDB\u884C\u5BF9\u6570\u5C3A\u5EA6(logarithmic scale)\u7F29\u653E</span>
    <span class="token comment">//\u5C06\u590D\u6570\u8F6C\u6362\u4E3A\u5E45\u503C\u8303\u56F4\u592A\u5927\u3002\u9AD8\u503C\u663E\u793A\u4E3A\u767D\u70B9\uFF0C\u800C\u4F4E\u503C\u4E3A\u9ED1\u70B9\uFF0C\u9AD8\u4F4E\u503C\u7684\u53D8\u5316\u65E0\u6CD5\u6709\u6548\u5206\u8FA8\u3002\u4E3A\u4E86\u5728\u5C4F\u5E55\u4E0A\u51F9\u663E\u51FA\u9AD8\u4F4E\u53D8\u5316\u7684\u8FDE\u7EED\u6027\uFF0C\u7528\u5BF9\u6570\u5C3A\u5EA6\u66FF\u4EE3\u7EBF\u6027\u5C3A\u5EA6</span>
    magnitudeImage <span class="token operator">+=</span> <span class="token class-name">Scalar</span><span class="token double-colon punctuation">::</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span>magnitudeImage<span class="token punctuation">,</span> magnitudeImage<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u6C42\u81EA\u7136\u5BF9\u6570</span>
    <span class="token comment">//\u30107\u3011\u526A\u5207\u548C\u91CD\u5206\u5E03\u5E45\u5EA6\u56FE\u8C61\u9650</span>
    <span class="token comment">//\u82E5\u6709\u5947\u6570\u884C\u6216\u5947\u6570\u5217\uFF0C\u8FDB\u884C\u9891\u8C31\u88C1\u526A</span>
    <span class="token comment">//\u7B2C\u4E8C\u6B65\uFF0C\u4E3A\u4E86\u63D0\u9AD8\u5904\u7406\u901F\u5EA6\u5EF6\u6269\u4E86\u56FE\u50CF\uFF0C\u73B0\u5728\u662F\u5254\u9664\u6DFB\u52A0\u7684\u50CF\u7D20\u3002</span>
    <span class="token comment">//\u4E3A\u4E86\u65B9\u4FBF\u663E\u793A\uFF0C\u4E5F\u53EF\u4EE5\u91CD\u65B0\u5206\u5E03\u5E45\u5EA6\u56FE\u50CF\u8C61\u9650\u4F4D\u7F6E\uFF0C</span>
    <span class="token comment">//\uFF08\u6CE8\uFF1A\u5C06\u7B2C\u4E94\u6B65\u5F97\u5230\u7684\u5E45\u5EA6\u56FE\u4ECE\u4E2D\u95F4\u5212\u5F00\uFF0C\u5F97\u52304\u5F201/4\u5B50\u56FE\u8C61\uFF0C\u5C06\u6BCF\u5F20\u5B50\u56FE\u582A\u79F0\u5E45\u5EA6\u56FE\u7684\u4E00\u4E2A\u8C61\u9650\uFF0C\u91CD\u65B0\u5206\u5E03\uFF0C\u5373\u5C064\u4E2A\u89D2\u70B9\u91CD\u53E0\u5230\u56FE\u7247\u4E2D\u5FC3\uFF09</span>
    <span class="token comment">//\u8FD9\u6837\u7684\u8BDD\u539F\u70B9\uFF080\uFF0C0\uFF09\u5C31\u4F4D\u79FB\u5230\u56FE\u50CF\u4E2D\u5FC3\u4E86</span>
    magnitudeImage <span class="token operator">=</span> <span class="token function">magnitudeImage</span><span class="token punctuation">(</span><span class="token function">Rect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> magnitudeImage<span class="token punctuation">.</span>cols <span class="token operator">&amp;</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> magnitudeImage<span class="token punctuation">.</span>rows <span class="token operator">&amp;</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u91CD\u65B0\u6392\u5217\u5085\u7ACB\u53F6\u56FE\u50CF\u4E2D\u7684\u8C61\u9650\uFF0C\u4F7F\u5F97\u539F\u70B9\u4F4D\u4E8E\u56FE\u50CF\u4E2D\u5FC3</span>
    <span class="token keyword">int</span> cx <span class="token operator">=</span> magnitudeImage<span class="token punctuation">.</span>cols <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> cy <span class="token operator">=</span> magnitudeImage<span class="token punctuation">.</span>rows <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
    Mat <span class="token function">q0</span><span class="token punctuation">(</span>magnitudeImage<span class="token punctuation">,</span> <span class="token function">Rect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> cx<span class="token punctuation">,</span> cy<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// ROI\u533A\u57DF\u7684\u5DE6\u4E0A</span>
    Mat <span class="token function">q1</span><span class="token punctuation">(</span>magnitudeImage<span class="token punctuation">,</span> <span class="token function">Rect</span><span class="token punctuation">(</span>cx<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> cx<span class="token punctuation">,</span> cy<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ROI\u533A\u57DF\u7684\u53F3\u4E0A</span>
    Mat <span class="token function">q2</span><span class="token punctuation">(</span>magnitudeImage<span class="token punctuation">,</span> <span class="token function">Rect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> cy<span class="token punctuation">,</span> cx<span class="token punctuation">,</span> cy<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ROI\u533A\u57DF\u7684\u5DE6\u4E0B</span>
    Mat <span class="token function">q3</span><span class="token punctuation">(</span>magnitudeImage<span class="token punctuation">,</span> <span class="token function">Rect</span><span class="token punctuation">(</span>cx<span class="token punctuation">,</span> cy<span class="token punctuation">,</span> cx<span class="token punctuation">,</span> cy<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ROI\u533A\u57DF\u7684\u53F3\u4E0B</span>
                                                  <span class="token comment">//\u4EA4\u6362\u8C61\u9650\uFF08\u5DE6\u4E0A\u4E0E\u53F3\u4E0B\u8FDB\u884C\u4EA4\u6362\uFF09</span>
    Mat tmp<span class="token punctuation">;</span>
    q0<span class="token punctuation">.</span><span class="token function">copyTo</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    q3<span class="token punctuation">.</span><span class="token function">copyTo</span><span class="token punctuation">(</span>q0<span class="token punctuation">)</span><span class="token punctuation">;</span>
    tmp<span class="token punctuation">.</span><span class="token function">copyTo</span><span class="token punctuation">(</span>q3<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u4EA4\u6362\u8C61\u9650\uFF08\u53F3\u4E0A\u4E0E\u5DE6\u4E0B\u8FDB\u884C\u4EA4\u6362\uFF09</span>
    q1<span class="token punctuation">.</span><span class="token function">copyTo</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    q2<span class="token punctuation">.</span><span class="token function">copyTo</span><span class="token punctuation">(</span>q1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    tmp<span class="token punctuation">.</span><span class="token function">copyTo</span><span class="token punctuation">(</span>q2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u30108\u3011\u5F52\u4E00\u5316\uFF0C\u75280\u52301\u4E4B\u95F4\u7684\u6D6E\u70B9\u503C\u5C06\u77E9\u9635\u53D8\u6362\u4E3A\u53EF\u89C6\u7684\u56FE\u50CF\u683C\u5F0F\uFF08\u90E8\u5206\u5E45\u5EA6\u503C\u4ECD\u7136\u8D85\u8FC7\u53EF\u663E\u793A\u8303\u56F4[0,1].\u5E45\u5EA6\u5F52\u4E00\u5316\u5230\u53EF\u663E\u793A\u8303\u56F4\uFF09</span>
    <span class="token comment">//\u6B64\u53E5\u4EE3\u7801\u7684OpenCV2\u7248\u4E3A\uFF1A</span>
    <span class="token comment">//normalize(magnitudeImage, magnitudeImage, 0, 1, CV_MINMAX);</span>
    <span class="token comment">//\u6B64\u53E5\u4EE3\u7801\u7684OpenCV3\u7248\u4E3A:</span>
    <span class="token function">normalize</span><span class="token punctuation">(</span>magnitudeImage<span class="token punctuation">,</span> magnitudeImage<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> NORM_MINMAX<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u30109\u3011\u663E\u793A\u6548\u679C\u56FE</span>
    <span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;\u9891\u8C31\u5E45\u503C&quot;</span><span class="token punctuation">,</span> magnitudeImage<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u56FE\u50CF\u566A\u58F0" tabindex="-1"><a class="header-anchor" href="#\u56FE\u50CF\u566A\u58F0" aria-hidden="true">#</a> \u56FE\u50CF\u566A\u58F0</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cstdlib&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2\\core\\core.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2\\highgui\\highgui.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2\\imgproc\\imgproc.hpp&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
Mat <span class="token function">addSaltNoise</span><span class="token punctuation">(</span><span class="token keyword">const</span> Mat srcImage<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    string path <span class="token operator">=</span> <span class="token string">&quot;Resources/test.png&quot;</span><span class="token punctuation">;</span>
    Mat srcImage <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>srcImage<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\u8BFB\u5165\u56FE\u50CF\u6709\u8BEF\uFF01&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">&quot;pause&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;\u539F\u56FE\u50CF&quot;</span><span class="token punctuation">,</span> srcImage<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Mat dstImage <span class="token operator">=</span> <span class="token function">addSaltNoise</span><span class="token punctuation">(</span>srcImage<span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;\u6DFB\u52A0\u6912\u76D0\u566A\u58F0\u7684\u56FE\u50CF&quot;</span><span class="token punctuation">,</span> dstImage<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u5B58\u50A8\u56FE\u50CF</span>
    <span class="token comment">//imwrite(&quot;salt_pepper_Image.jpg&quot;, dstImage);</span>
    <span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
Mat <span class="token function">addSaltNoise</span><span class="token punctuation">(</span><span class="token keyword">const</span> Mat srcImage<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">//\u514B\u9686\u4E00\u5F20\u4E00\u6478\u4E00\u6837\u7684\u56FE</span>
    Mat dstImage <span class="token operator">=</span> srcImage<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//\u968F\u673A\u53D6\u503C\u884C</span>
        <span class="token comment">//rand()\u662F\u4F2A\u968F\u673A\u6570\u751F\u6210\u51FD\u6570\uFF0C%\u662F\u6A21\u8FD0\u7B97\uFF0C\u8FD9\u4E2A\u8868\u8FBE\u5F0F\u7684\u4F5C\u7528\u662F\u968F\u673A\u751F\u6210012\u4E09\u4E2A\u6570\u5B57\u4E2D\u7684\u4E00\u4E2A\u3002</span>
        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> dstImage<span class="token punctuation">.</span>rows<span class="token punctuation">;</span>
        <span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> dstImage<span class="token punctuation">.</span>cols<span class="token punctuation">;</span>
        <span class="token comment">//\u56FE\u50CF\u901A\u9053\u5224\u5B9A</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>dstImage<span class="token punctuation">.</span><span class="token function">channels</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token comment">// at\u7C7B\u4E2D\u7684at\u65B9\u6CD5\u5BF9\u4E8E\u83B7\u53D6\u56FE\u50CF\u77E9\u9635\u67D0\u70B9\u7684RGB\u503C\u6216\u8005\u6539\u53D8\u67D0\u70B9\u7684\u503C\u5F88\u65B9\u4FBF</span>
            <span class="token comment">//\u5BF9\u4E8E\u5355\u901A\u9053\u7684\u56FE\u50CF\uFF0C\u5219\u53EF\u4EE5\u4F7F\u7528\uFF1A</span>
            <span class="token comment">//    \u5982\uFF1AXXX.at&lt;uchar&gt;(i, j) = 255\uFF08\u56E0\u4E3A\u5355\u901A\u9053\uFF08\u7070\u5EA6\u56FE\uFF09\uFF0C\u7531\u9ED1\u5230\u767D\uFF09</span>
            <span class="token comment">//    \uFF08\u5750\u6807(i, j)\u4E0A\uFF0C\u50CF\u7D20\u70B9\u7684\u503C\u4E3A\u767D\u8272\uFF09</span>
            <span class="token comment">//    \u5BF9\u4E8E\u591A\u901A\u9053\u7684\u56FE\u50CF\uFF08BGR\uFF09\uFF0C\u5982</span>

            <span class="token comment">//    img.at&lt;Vec3b&gt;(14, 25)[0] = 25;//B</span>
            <span class="token comment">//img.at&lt; Vec3b &gt;(14, 25)[1] = 25;//G</span>
            <span class="token comment">//img.at&lt; Vec3b &gt;(14, 25[2] = 25;//R</span>
            dstImage<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span>       <span class="token comment">//\u76D0\u566A\u58F0</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span>
        <span class="token punctuation">{</span>
            dstImage<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span>
            dstImage<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span>
            dstImage<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//\u968F\u673A\u53D6\u503C\u884C\u5217</span>
        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> dstImage<span class="token punctuation">.</span>rows<span class="token punctuation">;</span>
        <span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> dstImage<span class="token punctuation">.</span>cols<span class="token punctuation">;</span>
        <span class="token comment">//\u56FE\u50CF\u901A\u9053\u5224\u5B9A</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>dstImage<span class="token punctuation">.</span><span class="token function">channels</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            dstImage<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>     <span class="token comment">//\u6912\u566A\u58F0</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span>
        <span class="token punctuation">{</span>
            dstImage<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            dstImage<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            dstImage<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> dstImage<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u89C6\u9891\u8FD0\u52A8\u76EE\u6807\u6355\u6349" tabindex="-1"><a class="header-anchor" href="#\u89C6\u9891\u8FD0\u52A8\u76EE\u6807\u6355\u6349" aria-hidden="true">#</a> \u89C6\u9891\u8FD0\u52A8\u76EE\u6807\u6355\u6349</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/opencv.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/highgui.hpp&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

Mat <span class="token function">moveCheck</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> frontFrame<span class="token punctuation">,</span> Mat<span class="token operator">&amp;</span> afterFrame<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Mat frontGray<span class="token punctuation">,</span> afterGray<span class="token punctuation">,</span> diff<span class="token punctuation">;</span>
    Mat resFrame <span class="token operator">=</span> afterFrame<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u7070\u5EA6\u5904\u7406,\u8282\u7701\u8FD0\u7B97\u65F6\u95F4</span>
    <span class="token function">cvtColor</span><span class="token punctuation">(</span>frontFrame<span class="token punctuation">,</span> frontGray<span class="token punctuation">,</span> COLOR_BGR2GRAY<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">cvtColor</span><span class="token punctuation">(</span>afterFrame<span class="token punctuation">,</span> afterGray<span class="token punctuation">,</span> COLOR_BGR2GRAY<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u5E27\u5DEE\u5904\u7406  \u627E\u5230\u4E24\u5E27\u4E4B\u95F4\u8FD0\u52A8\u7269\u4F53\u5DEE\u5F02</span>
    <span class="token comment">//\u7F3A\u70B9:\u4F1A\u6355\u6349\u6240\u6709\u8FD0\u52A8\u7684\u7269\u4F53,\u6CA1\u529E\u6CD5\u4E13\u95E8\u6355\u6349\u67D0\u4E2A\u76EE\u6807</span>
    <span class="token function">absdiff</span><span class="token punctuation">(</span>frontGray<span class="token punctuation">,</span> afterGray<span class="token punctuation">,</span> diff<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u4E8C\u503C\u5316: \u4F7F\u5176\u53D8\u5F97\u66F4\u52A0\u9ED1\u767D\u5206\u660E,\u4FBF\u4E8E\u8BA1\u7B97,\u4F1A\u4EA7\u751F\u566A\u70B9</span>
    <span class="token function">threshold</span><span class="token punctuation">(</span>diff<span class="token punctuation">,</span> diff<span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> THRESH_BINARY<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u8150\u8680\u5904\u7406:\u53BB\u9664\u5927\u90E8\u5206\u7684\u767D\u8272\u566A\u70B9</span>
    Mat element <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">getStructuringElement</span><span class="token punctuation">(</span>MORPH_RECT<span class="token punctuation">,</span> <span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5C0F\u4E8E4*4\u65B9\u5757\u7684\u767D\u8272\u566A\u70B9\u90FD\u4F1A\u88AB\u8150\u8680</span>
    <span class="token function">erode</span><span class="token punctuation">(</span>diff<span class="token punctuation">,</span> diff<span class="token punctuation">,</span> element<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u81A8\u80C0\u5904\u7406:\u5C06\u767D\u8272\u533A\u57DF\u53D8&quot;\u80D6&quot;,\u4FBF\u4E8E\u8BC6\u522B</span>
    Mat element2 <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">getStructuringElement</span><span class="token punctuation">(</span>MORPH_RECT<span class="token punctuation">,</span> <span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">dilate</span><span class="token punctuation">(</span>diff<span class="token punctuation">,</span> diff<span class="token punctuation">,</span> element2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u52A8\u6001\u7269\u4F53\u6807\u8BB0</span>
    vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span>Point<span class="token operator">&gt;&gt;</span>contours<span class="token punctuation">;</span><span class="token comment">//\u7528\u4E8E\u4FDD\u5B58\u5173\u952E\u70B9</span>
    <span class="token comment">//findContours \u7B2C\u56DB\u4E2A\u53C2\u6570 CHAIN_APPROX_SIMPLE  \u7528\u4E8E\u538B\u7F29\u6C34\u5E73\u3001\u5782\u76F4\u548C\u5BF9\u89D2\u7EBF\u6BB5\uFF0C\u53EA\u7559\u4E0B\u5B83\u4EEC\u7684\u7AEF\u70B9\u3002\u4F8B\u5982\uFF0C\u4E00\u4E2A\u76F4\u7ACB\u7684\u77E9\u5F62\u8F6E\u5ED3\u7528 4 \u4E2A\u70B9\u8FDB\u884C\u7F16\u7801\u3002</span>
    <span class="token function">findContours</span><span class="token punctuation">(</span>diff<span class="token punctuation">,</span> contours<span class="token punctuation">,</span> RETR_EXTERNAL<span class="token punctuation">,</span> CHAIN_APPROX_SIMPLE<span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u63D0\u53D6\u5173\u952E\u70B9</span>
    vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span>Point<span class="token operator">&gt;&gt;</span><span class="token function">contours_poly</span><span class="token punctuation">(</span>contours<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    vector<span class="token operator">&lt;</span>Rect<span class="token operator">&gt;</span><span class="token function">boundRect</span><span class="token punctuation">(</span>contours<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> w<span class="token punctuation">,</span> h<span class="token punctuation">;</span>
    <span class="token keyword">int</span> num <span class="token operator">=</span> contours<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> num<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">approxPolyDP</span><span class="token punctuation">(</span><span class="token function">Mat</span><span class="token punctuation">(</span>contours<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> contours_poly<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        boundRect<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">boundingRect</span><span class="token punctuation">(</span><span class="token function">Mat</span><span class="token punctuation">(</span>contours_poly<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        x <span class="token operator">=</span> boundRect<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">;</span>
        y <span class="token operator">=</span> boundRect<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">;</span>
        w <span class="token operator">=</span> boundRect<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>width<span class="token punctuation">;</span>
        h <span class="token operator">=</span> boundRect<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>height<span class="token punctuation">;</span>
        <span class="token comment">//\u7ED8\u5236</span>
        <span class="token function">rectangle</span><span class="token punctuation">(</span>resFrame<span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span>x <span class="token operator">+</span> w<span class="token punctuation">,</span> y <span class="token operator">+</span> h<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> resFrame<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Mat frame<span class="token punctuation">;</span>

    Mat temp<span class="token punctuation">;</span>
    Mat res<span class="token punctuation">;</span>
    <span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    VideoCapture <span class="token function">cap</span><span class="token punctuation">(</span><span class="token string">&quot;Resources/test_video.mp4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>cap<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>frame<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        num<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span><span class="token comment">//\u5982\u679C\u4E3A\u7B2C\u4E00\u5E27\u5219\u628A\u5F53\u524D\u5E27\u4F20\u5165(\u5373\u4E0D\u4EA7\u751F\u6548\u679C)</span>

            res <span class="token operator">=</span> <span class="token function">moveCheck</span><span class="token punctuation">(</span>frame<span class="token punctuation">,</span> frame<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span>
        <span class="token punctuation">{</span><span class="token comment">//\u4ECE\u7B2C\u4E8C\u5E27\u5F00\u59CB\u624D\u6709\u5DEE\u5E27</span>
            res <span class="token operator">=</span> <span class="token function">moveCheck</span><span class="token punctuation">(</span>temp<span class="token punctuation">,</span> frame<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>
        temp <span class="token operator">=</span> frame<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u6B64\u5904\u6CE8\u610F\u8981\u8C03\u7528.clone\u6DF1\u62F7\u8D1D,\u5426\u5219\u4F1A\u51FA\u73B0\u4E24\u4E2A\u753B\u9762\u4E00\u6837\u7684\u60C5\u51B5</span>
        <span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;frame&quot;</span><span class="token punctuation">,</span> frame<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;res&quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u9A6C\u8D5B\u514B\u539F\u7406\u4E4B\u7B80\u5355\u63D0\u9AD8\u56FE\u50CF\u7B97\u6CD5\u6027\u80FD" tabindex="-1"><a class="header-anchor" href="#\u9A6C\u8D5B\u514B\u539F\u7406\u4E4B\u7B80\u5355\u63D0\u9AD8\u56FE\u50CF\u7B97\u6CD5\u6027\u80FD" aria-hidden="true">#</a> \u9A6C\u8D5B\u514B\u539F\u7406\u4E4B\u7B80\u5355\u63D0\u9AD8\u56FE\u50CF\u7B97\u6CD5\u6027\u80FD</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">//      \u7A0B\u5E8F\u63CF\u8FF0\uFF1A\u6765\u81EA\u4E00\u672C\u56FD\u5916OpenCV2\u4E66\u7C4D\u7684\u793A\u4F8B-\u904D\u5386\u56FE\u50CF\u50CF\u7D20\u768414\u79CD\u65B9\u6CD5</span>
<span class="token comment">//------------------------------------------------------------------------------------------------</span>

<span class="token comment">/*------------------------------------------------------------------------------------------*\\
This file contains material supporting chapter 2 of the cookbook:
Computer Vision Programming using the OpenCV Library.
by Robert Laganiere, Packt Publishing, 2011.

This program is free software; permission is hereby granted to use, copy, modify,
and distribute this source code, or portions thereof, for any purpose, without fee,
subject to the restriction that the copyright notice may not be removed
or altered from any source or altered source distribution.
The software is released on an as-is basis and without any warranties of any kind.
In particular, the software is not guaranteed to be fault-tolerant or free from failure.
The author disclaims all warranties with regard to this software, any use,
and any consequent failure, is purely the responsibility of the user.

Copyright (C) 2010-2011 Robert Laganiere, www.laganiere.name
\\*------------------------------------------------------------------------------------------*/</span>

<span class="token comment">//---------------------------------\u3010\u5934\u6587\u4EF6\u3001\u547D\u540D\u7A7A\u95F4\u5305\u542B\u90E8\u5206\u3011-----------------------------</span>
<span class="token comment">//      \u63CF\u8FF0\uFF1A\u5305\u542B\u7A0B\u5E8F\u6240\u4F7F\u7528\u7684\u5934\u6587\u4EF6\u548C\u547D\u540D\u7A7A\u95F4</span>
<span class="token comment">//-------------------------------------------------------------------------------------------------</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/core/core.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/highgui/highgui.hpp&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token comment">//---------------------------------\u3010\u5B8F\u5B9A\u4E49\u90E8\u5206\u3011---------------------------------------------</span>
<span class="token comment">//      \u63CF\u8FF0\uFF1A\u5305\u542B\u7A0B\u5E8F\u6240\u4F7F\u7528\u5B8F\u5B9A\u4E49</span>
<span class="token comment">//-------------------------------------------------------------------------------------------------</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">NTESTS</span> <span class="token expression"><span class="token number">14</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">NITERATIONS</span> <span class="token expression"><span class="token number">20</span></span></span>

<span class="token comment">//----------------------------------------- \u3010\u65B9\u6CD5\u4E00\u3011-------------------------------------------</span>
<span class="token comment">//      \u8BF4\u660E\uFF1A\u5229\u7528.ptr \u548C []</span>
<span class="token comment">//-------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> <span class="token function">colorReduce0</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> image<span class="token punctuation">,</span> <span class="token keyword">int</span> div <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">int</span> nl <span class="token operator">=</span> image<span class="token punctuation">.</span>rows<span class="token punctuation">;</span> <span class="token comment">//\u884C\u6570</span>
    <span class="token keyword">int</span> nc <span class="token operator">=</span> image<span class="token punctuation">.</span>cols <span class="token operator">*</span> image<span class="token punctuation">.</span><span class="token function">channels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//\u6BCF\u884C\u5143\u7D20\u7684\u603B\u5143\u7D20\u6570\u91CF</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> nl<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>

        uchar<span class="token operator">*</span> data <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">ptr</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nc<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>

            <span class="token comment">//-------------\u5F00\u59CB\u5904\u7406\u6BCF\u4E2A\u50CF\u7D20-------------------</span>

            data<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">/</span> div <span class="token operator">*</span> div <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>

            <span class="token comment">//-------------\u7ED3\u675F\u50CF\u7D20\u5904\u7406------------------------</span>

        <span class="token punctuation">}</span> <span class="token comment">//\u5355\u884C\u5904\u7406\u7ED3\u675F</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//-----------------------------------\u3010\u65B9\u6CD5\u4E8C\u3011-------------------------------------------------</span>
<span class="token comment">//      \u8BF4\u660E\uFF1A\u5229\u7528 .ptr \u548C * ++</span>
<span class="token comment">//-------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> <span class="token function">colorReduce1</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> image<span class="token punctuation">,</span> <span class="token keyword">int</span> div <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">int</span> nl <span class="token operator">=</span> image<span class="token punctuation">.</span>rows<span class="token punctuation">;</span> <span class="token comment">//\u884C\u6570</span>
    <span class="token keyword">int</span> nc <span class="token operator">=</span> image<span class="token punctuation">.</span>cols <span class="token operator">*</span> image<span class="token punctuation">.</span><span class="token function">channels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//\u6BCF\u884C\u5143\u7D20\u7684\u603B\u5143\u7D20\u6570\u91CF</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> nl<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>

        uchar<span class="token operator">*</span> data <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">ptr</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nc<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>

            <span class="token comment">//-------------\u5F00\u59CB\u5904\u7406\u6BCF\u4E2A\u50CF\u7D20-------------------</span>

            <span class="token operator">*</span>data<span class="token operator">++</span> <span class="token operator">=</span> <span class="token operator">*</span>data <span class="token operator">/</span> div <span class="token operator">*</span> div <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>

            <span class="token comment">//-------------\u7ED3\u675F\u50CF\u7D20\u5904\u7406------------------------</span>

        <span class="token punctuation">}</span> <span class="token comment">//\u5355\u884C\u5904\u7406\u7ED3\u675F</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//-----------------------------------------\u3010\u65B9\u6CD5\u4E09\u3011-------------------------------------------</span>
<span class="token comment">//      \u8BF4\u660E\uFF1A\u5229\u7528.ptr \u548C * ++ \u4EE5\u53CA\u6A21\u64CD\u4F5C</span>
<span class="token comment">//-------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> <span class="token function">colorReduce2</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> image<span class="token punctuation">,</span> <span class="token keyword">int</span> div <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">int</span> nl <span class="token operator">=</span> image<span class="token punctuation">.</span>rows<span class="token punctuation">;</span> <span class="token comment">//\u884C\u6570</span>
    <span class="token keyword">int</span> nc <span class="token operator">=</span> image<span class="token punctuation">.</span>cols <span class="token operator">*</span> image<span class="token punctuation">.</span><span class="token function">channels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//\u6BCF\u884C\u5143\u7D20\u7684\u603B\u5143\u7D20\u6570\u91CF</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> nl<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>

        uchar<span class="token operator">*</span> data <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">ptr</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nc<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>

            <span class="token comment">//-------------\u5F00\u59CB\u5904\u7406\u6BCF\u4E2A\u50CF\u7D20-------------------</span>

            <span class="token keyword">int</span> v <span class="token operator">=</span> <span class="token operator">*</span>data<span class="token punctuation">;</span>
            <span class="token operator">*</span>data<span class="token operator">++</span> <span class="token operator">=</span> v <span class="token operator">-</span> v <span class="token operator">%</span> div <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>

            <span class="token comment">//-------------\u7ED3\u675F\u50CF\u7D20\u5904\u7406------------------------</span>

        <span class="token punctuation">}</span> <span class="token comment">//\u5355\u884C\u5904\u7406\u7ED3\u675F</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//----------------------------------------\u3010\u65B9\u6CD5\u56DB\u3011---------------------------------------------</span>
<span class="token comment">//      \u8BF4\u660E\uFF1A\u5229\u7528.ptr \u548C * ++ \u4EE5\u53CA\u4F4D\u64CD\u4F5C</span>
<span class="token comment">//----------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> <span class="token function">colorReduce3</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> image<span class="token punctuation">,</span> <span class="token keyword">int</span> div <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">int</span> nl <span class="token operator">=</span> image<span class="token punctuation">.</span>rows<span class="token punctuation">;</span> <span class="token comment">//\u884C\u6570</span>
    <span class="token keyword">int</span> nc <span class="token operator">=</span> image<span class="token punctuation">.</span>cols <span class="token operator">*</span> image<span class="token punctuation">.</span><span class="token function">channels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//\u6BCF\u884C\u5143\u7D20\u7684\u603B\u5143\u7D20\u6570\u91CF</span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u63A9\u7801\u503C</span>
    uchar mask <span class="token operator">=</span> <span class="token number">0xFF</span> <span class="token operator">&lt;&lt;</span> n<span class="token punctuation">;</span> <span class="token comment">// e.g. \u5BF9\u4E8E div=16, mask= 0xF0</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> nl<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        uchar<span class="token operator">*</span> data <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">ptr</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nc<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token comment">//------------\u5F00\u59CB\u5904\u7406\u6BCF\u4E2A\u50CF\u7D20-------------------</span>

            <span class="token operator">*</span>data<span class="token operator">++</span> <span class="token operator">=</span> <span class="token operator">*</span>data <span class="token operator">&amp;</span> mask <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>

            <span class="token comment">//-------------\u7ED3\u675F\u50CF\u7D20\u5904\u7406------------------------</span>
        <span class="token punctuation">}</span>  <span class="token comment">//\u5355\u884C\u5904\u7406\u7ED3\u675F</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//----------------------------------------\u3010\u65B9\u6CD5\u4E94\u3011----------------------------------------------</span>
<span class="token comment">//      \u8BF4\u660E\uFF1A\u5229\u7528\u6307\u9488\u7B97\u672F\u8FD0\u7B97</span>
<span class="token comment">//---------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> <span class="token function">colorReduce4</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> image<span class="token punctuation">,</span> <span class="token keyword">int</span> div <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">int</span> nl <span class="token operator">=</span> image<span class="token punctuation">.</span>rows<span class="token punctuation">;</span> <span class="token comment">//\u884C\u6570</span>
    <span class="token keyword">int</span> nc <span class="token operator">=</span> image<span class="token punctuation">.</span>cols <span class="token operator">*</span> image<span class="token punctuation">.</span><span class="token function">channels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//\u6BCF\u884C\u5143\u7D20\u7684\u603B\u5143\u7D20\u6570\u91CF</span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> step <span class="token operator">=</span> image<span class="token punctuation">.</span>step<span class="token punctuation">;</span> <span class="token comment">//\u6709\u6548\u5BBD\u5EA6</span>
                           <span class="token comment">//\u63A9\u7801\u503C</span>
    uchar mask <span class="token operator">=</span> <span class="token number">0xFF</span> <span class="token operator">&lt;&lt;</span> n<span class="token punctuation">;</span> <span class="token comment">// e.g. \u5BF9\u4E8E div=16, mask= 0xF0</span>

                            <span class="token comment">//\u83B7\u53D6\u6307\u5411\u56FE\u50CF\u7F13\u51B2\u533A\u7684\u6307\u9488</span>
    uchar<span class="token operator">*</span> data <span class="token operator">=</span> image<span class="token punctuation">.</span>data<span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> nl<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nc<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>

            <span class="token comment">//-------------\u5F00\u59CB\u5904\u7406\u6BCF\u4E2A\u50CF\u7D20-------------------</span>

            <span class="token operator">*</span><span class="token punctuation">(</span>data <span class="token operator">+</span> i<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token operator">*</span>data <span class="token operator">&amp;</span> mask <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>

            <span class="token comment">//-------------\u7ED3\u675F\u50CF\u7D20\u5904\u7406------------------------</span>

        <span class="token punctuation">}</span> <span class="token comment">//\u5355\u884C\u5904\u7406\u7ED3\u675F</span>

        data <span class="token operator">+=</span> step<span class="token punctuation">;</span>  <span class="token comment">// next line</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//---------------------------------------\u3010\u65B9\u6CD5\u516D\u3011----------------------------------------------</span>
<span class="token comment">//      \u8BF4\u660E\uFF1A\u5229\u7528 .ptr \u548C * ++\u4EE5\u53CA\u4F4D\u8FD0\u7B97\u3001image.cols * image.channels()</span>
<span class="token comment">//-------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> <span class="token function">colorReduce5</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> image<span class="token punctuation">,</span> <span class="token keyword">int</span> div <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">int</span> nl <span class="token operator">=</span> image<span class="token punctuation">.</span>rows<span class="token punctuation">;</span> <span class="token comment">//\u884C\u6570</span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u63A9\u7801\u503C</span>
    uchar mask <span class="token operator">=</span> <span class="token number">0xFF</span> <span class="token operator">&lt;&lt;</span> n<span class="token punctuation">;</span> <span class="token comment">// e.g. \u4F8B\u5982div=16, mask= 0xF0</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> nl<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>

        uchar<span class="token operator">*</span> data <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">ptr</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> image<span class="token punctuation">.</span>cols <span class="token operator">*</span> image<span class="token punctuation">.</span><span class="token function">channels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>

            <span class="token comment">//-------------\u5F00\u59CB\u5904\u7406\u6BCF\u4E2A\u50CF\u7D20-------------------</span>

            <span class="token operator">*</span>data<span class="token operator">++</span> <span class="token operator">=</span> <span class="token operator">*</span>data <span class="token operator">&amp;</span> mask <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>

            <span class="token comment">//-------------\u7ED3\u675F\u50CF\u7D20\u5904\u7406------------------------</span>

        <span class="token punctuation">}</span> <span class="token comment">//\u5355\u884C\u5904\u7406\u7ED3\u675F</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// -------------------------------------\u3010\u65B9\u6CD5\u4E03\u3011----------------------------------------------</span>
<span class="token comment">//      \u8BF4\u660E\uFF1A\u5229\u7528.ptr \u548C * ++ \u4EE5\u53CA\u4F4D\u8FD0\u7B97(continuous)</span>
<span class="token comment">//-------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> <span class="token function">colorReduce6</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> image<span class="token punctuation">,</span> <span class="token keyword">int</span> div <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">int</span> nl <span class="token operator">=</span> image<span class="token punctuation">.</span>rows<span class="token punctuation">;</span> <span class="token comment">//\u884C\u6570</span>
    <span class="token keyword">int</span> nc <span class="token operator">=</span> image<span class="token punctuation">.</span>cols <span class="token operator">*</span> image<span class="token punctuation">.</span><span class="token function">channels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//\u6BCF\u884C\u5143\u7D20\u7684\u603B\u5143\u7D20\u6570\u91CF</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>image<span class="token punctuation">.</span><span class="token function">isContinuous</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//\u65E0\u586B\u5145\u50CF\u7D20</span>
        nc <span class="token operator">=</span> nc <span class="token operator">*</span> nl<span class="token punctuation">;</span>
        nl <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">// \u4E3A\u4E00\u7EF4\u6570\u5217</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u63A9\u7801\u503C</span>
    uchar mask <span class="token operator">=</span> <span class="token number">0xFF</span> <span class="token operator">&lt;&lt;</span> n<span class="token punctuation">;</span> <span class="token comment">// e.g. \u6BD4\u5982div=16, mask= 0xF0</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> nl<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        uchar<span class="token operator">*</span> data <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">ptr</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nc<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token comment">//-------------\u5F00\u59CB\u5904\u7406\u6BCF\u4E2A\u50CF\u7D20-------------------</span>

            <span class="token operator">*</span>data<span class="token operator">++</span> <span class="token operator">=</span> <span class="token operator">*</span>data <span class="token operator">&amp;</span> mask <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>

            <span class="token comment">//-------------\u7ED3\u675F\u50CF\u7D20\u5904\u7406------------------------</span>

        <span class="token punctuation">}</span> <span class="token comment">//\u5355\u884C\u5904\u7406\u7ED3\u675F</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//------------------------------------\u3010\u65B9\u6CD5\u516B\u3011------------------------------------------------</span>
<span class="token comment">//      \u8BF4\u660E\uFF1A\u5229\u7528 .ptr \u548C * ++ \u4EE5\u53CA\u4F4D\u8FD0\u7B97 (continuous+channels)</span>
<span class="token comment">//-------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> <span class="token function">colorReduce7</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> image<span class="token punctuation">,</span> <span class="token keyword">int</span> div <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">int</span> nl <span class="token operator">=</span> image<span class="token punctuation">.</span>rows<span class="token punctuation">;</span> <span class="token comment">//\u884C\u6570</span>
    <span class="token keyword">int</span> nc <span class="token operator">=</span> image<span class="token punctuation">.</span>cols<span class="token punctuation">;</span> <span class="token comment">//\u5217\u6570</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>image<span class="token punctuation">.</span><span class="token function">isContinuous</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//\u65E0\u586B\u5145\u50CF\u7D20</span>
        nc <span class="token operator">=</span> nc <span class="token operator">*</span> nl<span class="token punctuation">;</span>
        nl <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">// \u4E3A\u4E00\u7EF4\u6570\u7EC4</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u63A9\u7801\u503C</span>
    uchar mask <span class="token operator">=</span> <span class="token number">0xFF</span> <span class="token operator">&lt;&lt;</span> n<span class="token punctuation">;</span> <span class="token comment">// e.g. \u6BD4\u5982div=16, mask= 0xF0</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> nl<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        uchar<span class="token operator">*</span> data <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">ptr</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nc<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token comment">//-------------\u5F00\u59CB\u5904\u7406\u6BCF\u4E2A\u50CF\u7D20-------------------</span>

            <span class="token operator">*</span>data<span class="token operator">++</span> <span class="token operator">=</span> <span class="token operator">*</span>data <span class="token operator">&amp;</span> mask <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token operator">*</span>data<span class="token operator">++</span> <span class="token operator">=</span> <span class="token operator">*</span>data <span class="token operator">&amp;</span> mask <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token operator">*</span>data<span class="token operator">++</span> <span class="token operator">=</span> <span class="token operator">*</span>data <span class="token operator">&amp;</span> mask <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>

            <span class="token comment">//-------------\u7ED3\u675F\u50CF\u7D20\u5904\u7406------------------------</span>

        <span class="token punctuation">}</span> <span class="token comment">//\u5355\u884C\u5904\u7406\u7ED3\u675F</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// -----------------------------------\u3010\u65B9\u6CD5\u4E5D\u3011 ------------------------------------------------</span>
<span class="token comment">//      \u8BF4\u660E\uFF1A\u5229\u7528Mat_ iterator</span>
<span class="token comment">//-------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> <span class="token function">colorReduce8</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> image<span class="token punctuation">,</span> <span class="token keyword">int</span> div <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u83B7\u53D6\u8FED\u4EE3\u5668</span>
    Mat_<span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>iterator it <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">begin</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Mat_<span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>iterator itend <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">end</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> it <span class="token operator">!=</span> itend<span class="token punctuation">;</span> <span class="token operator">++</span>it<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">//-------------\u5F00\u59CB\u5904\u7406\u6BCF\u4E2A\u50CF\u7D20-------------------</span>

        <span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">/</span> div <span class="token operator">*</span> div <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">/</span> div <span class="token operator">*</span> div <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">/</span> div <span class="token operator">*</span> div <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>

        <span class="token comment">//-------------\u7ED3\u675F\u50CF\u7D20\u5904\u7406------------------------</span>
    <span class="token punctuation">}</span><span class="token comment">//\u5355\u884C\u5904\u7406\u7ED3\u675F</span>
<span class="token punctuation">}</span>

<span class="token comment">//-------------------------------------\u3010\u65B9\u6CD5\u5341\u3011-----------------------------------------------</span>
<span class="token comment">//      \u8BF4\u660E\uFF1A\u5229\u7528Mat_ iterator\u4EE5\u53CA\u4F4D\u8FD0\u7B97</span>
<span class="token comment">//-------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> <span class="token function">colorReduce9</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> image<span class="token punctuation">,</span> <span class="token keyword">int</span> div <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// div\u5FC5\u987B\u662F2\u7684\u5E42</span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u63A9\u7801\u503C</span>
    uchar mask <span class="token operator">=</span> <span class="token number">0xFF</span> <span class="token operator">&lt;&lt;</span> n<span class="token punctuation">;</span> <span class="token comment">// e.g. \u6BD4\u5982 div=16, mask= 0xF0</span>

                            <span class="token comment">// \u83B7\u53D6\u8FED\u4EE3\u5668</span>
    Mat_<span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>iterator it <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">begin</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Mat_<span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>iterator itend <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">end</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u626B\u63CF\u6240\u6709\u5143\u7D20</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> it <span class="token operator">!=</span> itend<span class="token punctuation">;</span> <span class="token operator">++</span>it<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>

        <span class="token comment">//-------------\u5F00\u59CB\u5904\u7406\u6BCF\u4E2A\u50CF\u7D20-------------------</span>

        <span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;</span> mask <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&amp;</span> mask <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">&amp;</span> mask <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>

        <span class="token comment">//-------------\u7ED3\u675F\u50CF\u7D20\u5904\u7406------------------------</span>
    <span class="token punctuation">}</span><span class="token comment">//\u5355\u884C\u5904\u7406\u7ED3\u675F</span>
<span class="token punctuation">}</span>

<span class="token comment">//------------------------------------\u3010\u65B9\u6CD5\u5341\u4E00\u3011---------------------------------------------</span>
<span class="token comment">//      \u8BF4\u660E\uFF1A\u5229\u7528Mat Iterator_</span>
<span class="token comment">//-------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> <span class="token function">colorReduce10</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> image<span class="token punctuation">,</span> <span class="token keyword">int</span> div <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">//\u83B7\u53D6\u8FED\u4EE3\u5668</span>
    Mat_<span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span> cimage <span class="token operator">=</span> image<span class="token punctuation">;</span>
    Mat_<span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>iterator it <span class="token operator">=</span> cimage<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Mat_<span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>iterator itend <span class="token operator">=</span> cimage<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> it <span class="token operator">!=</span> itend<span class="token punctuation">;</span> it<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">//-------------\u5F00\u59CB\u5904\u7406\u6BCF\u4E2A\u50CF\u7D20-------------------</span>

        <span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">/</span> div <span class="token operator">*</span> div <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">/</span> div <span class="token operator">*</span> div <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">/</span> div <span class="token operator">*</span> div <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>

        <span class="token comment">//-------------\u7ED3\u675F\u50CF\u7D20\u5904\u7406------------------------</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//--------------------------------------\u3010\u65B9\u6CD5\u5341\u4E8C\u3011--------------------------------------------</span>
<span class="token comment">//      \u8BF4\u660E\uFF1A\u5229\u7528\u52A8\u6001\u5730\u5740\u8BA1\u7B97\u914D\u5408at</span>
<span class="token comment">//-------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> <span class="token function">colorReduce11</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> image<span class="token punctuation">,</span> <span class="token keyword">int</span> div <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">int</span> nl <span class="token operator">=</span> image<span class="token punctuation">.</span>rows<span class="token punctuation">;</span> <span class="token comment">//\u884C\u6570</span>
    <span class="token keyword">int</span> nc <span class="token operator">=</span> image<span class="token punctuation">.</span>cols<span class="token punctuation">;</span> <span class="token comment">//\u5217\u6570</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> nl<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nc<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>

            <span class="token comment">//-------------\u5F00\u59CB\u5904\u7406\u6BCF\u4E2A\u50CF\u7D20-------------------</span>

            image<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>j<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>j<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">/</span> div <span class="token operator">*</span> div <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
            image<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>j<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>j<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">/</span> div <span class="token operator">*</span> div <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
            image<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>j<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>j<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">/</span> div <span class="token operator">*</span> div <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>

            <span class="token comment">//-------------\u7ED3\u675F\u50CF\u7D20\u5904\u7406------------------------</span>

        <span class="token punctuation">}</span> <span class="token comment">//\u5355\u884C\u5904\u7406\u7ED3\u675F</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//----------------------------------\u3010\u65B9\u6CD5\u5341\u4E09\u3011-----------------------------------------------</span>
<span class="token comment">//      \u8BF4\u660E\uFF1A\u5229\u7528\u56FE\u50CF\u7684\u8F93\u5165\u4E0E\u8F93\u51FA</span>
<span class="token comment">//-------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> <span class="token function">colorReduce12</span><span class="token punctuation">(</span><span class="token keyword">const</span> Mat<span class="token operator">&amp;</span> image<span class="token punctuation">,</span> <span class="token comment">//\u8F93\u5165\u56FE\u50CF</span>
    Mat<span class="token operator">&amp;</span> result<span class="token punctuation">,</span>      <span class="token comment">// \u8F93\u51FA\u56FE\u50CF</span>
    <span class="token keyword">int</span> div <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">int</span> nl <span class="token operator">=</span> image<span class="token punctuation">.</span>rows<span class="token punctuation">;</span> <span class="token comment">//\u884C\u6570</span>
    <span class="token keyword">int</span> nc <span class="token operator">=</span> image<span class="token punctuation">.</span>cols<span class="token punctuation">;</span> <span class="token comment">//\u5217\u6570</span>

                         <span class="token comment">//\u51C6\u5907\u597D\u521D\u59CB\u5316\u540E\u7684Mat\u7ED9\u8F93\u51FA\u56FE\u50CF</span>
    result<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>image<span class="token punctuation">.</span>rows<span class="token punctuation">,</span> image<span class="token punctuation">.</span>cols<span class="token punctuation">,</span> image<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u521B\u5EFA\u65E0\u50CF\u7D20\u586B\u5145\u7684\u56FE\u50CF</span>
    nc <span class="token operator">=</span> nc <span class="token operator">*</span> nl<span class="token punctuation">;</span>
    nl <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">//\u5355\u7EF4\u6570\u7EC4</span>

    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u63A9\u7801\u503C</span>
    uchar mask <span class="token operator">=</span> <span class="token number">0xFF</span> <span class="token operator">&lt;&lt;</span> n<span class="token punctuation">;</span> <span class="token comment">// e.g.\u6BD4\u5982div=16, mask= 0xF0</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> nl<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        uchar<span class="token operator">*</span> data <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">ptr</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> uchar<span class="token operator">*</span> idata <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">ptr</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nc<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token comment">//-------------\u5F00\u59CB\u5904\u7406\u6BCF\u4E2A\u50CF\u7D20-------------------</span>

            <span class="token operator">*</span>data<span class="token operator">++</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>idata<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> mask <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token operator">*</span>data<span class="token operator">++</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>idata<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> mask <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token operator">*</span>data<span class="token operator">++</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>idata<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> mask <span class="token operator">+</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>

            <span class="token comment">//-------------\u7ED3\u675F\u50CF\u7D20\u5904\u7406------------------------</span>

        <span class="token punctuation">}</span> <span class="token comment">//\u5355\u884C\u5904\u7406\u7ED3\u675F</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//--------------------------------------\u3010\u65B9\u6CD5\u5341\u56DB\u3011-------------------------------------------</span>
<span class="token comment">//      \u8BF4\u660E\uFF1A\u5229\u7528\u64CD\u4F5C\u7B26\u91CD\u8F7D</span>
<span class="token comment">//-------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> <span class="token function">colorReduce13</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> image<span class="token punctuation">,</span> <span class="token keyword">int</span> div <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u63A9\u7801\u503C</span>
    uchar mask <span class="token operator">=</span> <span class="token number">0xFF</span> <span class="token operator">&lt;&lt;</span> n<span class="token punctuation">;</span> <span class="token comment">// e.g. \u6BD4\u5982div=16, mask= 0xF0</span>

                            <span class="token comment">//\u8FDB\u884C\u8272\u5F69\u8FD8\u539F</span>
    image <span class="token operator">=</span> <span class="token punctuation">(</span>image <span class="token operator">&amp;</span> <span class="token function">Scalar</span><span class="token punctuation">(</span>mask<span class="token punctuation">,</span> mask<span class="token punctuation">,</span> mask<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">Scalar</span><span class="token punctuation">(</span>div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> div <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u9A6C\u8D5B\u514B\u539F\u7406\u4E4B\u7B80\u5355\u63D0\u9AD8\u56FE\u50CF\u7B97\u6CD5\u6027\u80FD\uFF08\u989C\u8272\u7A7A\u95F4\u7F29\u51CF\u548C\u8BA1\u65F6\u51FD\u6570\uFF09</span>

<span class="token comment">//-----------------------------------\u3010main( )\u51FD\u6570\u3011--------------------------------------------</span>
<span class="token comment">//      \u63CF\u8FF0\uFF1A\u63A7\u5236\u53F0\u5E94\u7528\u7A0B\u5E8F\u7684\u5165\u53E3\u51FD\u6570\uFF0C\u6211\u4EEC\u7684\u7A0B\u5E8F\u4ECE\u8FD9\u91CC\u5F00\u59CB</span>
<span class="token comment">//-------------------------------------------------------------------------------------------------</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    int64 t<span class="token punctuation">[</span>NTESTS<span class="token punctuation">]</span><span class="token punctuation">,</span> tinit<span class="token punctuation">;</span>
    Mat image0<span class="token punctuation">;</span>
    Mat image1<span class="token punctuation">;</span>
    Mat image2<span class="token punctuation">;</span>

    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">&quot;color 4F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    string path <span class="token operator">=</span>  <span class="token string">&quot;Resources/test.png&quot;</span><span class="token punctuation">;</span>

    image0 <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>image0<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot; could not image &quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u65F6\u95F4\u503C\u8BBE\u4E3A0</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> NTESTS<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        t<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token comment">// \u591A\u6B21\u91CD\u590D\u6D4B\u8BD5</span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> NITERATIONS<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> k <span class="token operator">&lt;&lt;</span> <span class="token string">&quot; of &quot;</span> <span class="token operator">&lt;&lt;</span> n <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

        image1 <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u3010\u65B9\u6CD5\u4E00\u3011\u5229\u7528.ptr \u548C []</span>
        tinit <span class="token operator">=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">colorReduce0</span><span class="token punctuation">(</span>image1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> tinit<span class="token punctuation">;</span>

        <span class="token comment">//\u3010\u65B9\u6CD5\u4E8C\u3011\u5229\u7528 .ptr \u548C * ++</span>
        image1 <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tinit <span class="token operator">=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">colorReduce1</span><span class="token punctuation">(</span>image1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> tinit<span class="token punctuation">;</span>

        <span class="token comment">//\u3010\u65B9\u6CD5\u4E09\u3011\u5229\u7528.ptr \u548C * ++ \u4EE5\u53CA\u6A21\u64CD\u4F5C</span>
        image1 <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tinit <span class="token operator">=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">colorReduce2</span><span class="token punctuation">(</span>image1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> tinit<span class="token punctuation">;</span>

        <span class="token comment">//\u3010\u65B9\u6CD5\u56DB\u3011 \u5229\u7528.ptr \u548C * ++ \u4EE5\u53CA\u4F4D\u64CD\u4F5C</span>
        image1 <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tinit <span class="token operator">=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">colorReduce3</span><span class="token punctuation">(</span>image1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> tinit<span class="token punctuation">;</span>

        <span class="token comment">//\u3010\u65B9\u6CD5\u4E94\u3011 \u5229\u7528\u6307\u9488\u7684\u7B97\u672F\u8FD0\u7B97</span>
        image1 <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tinit <span class="token operator">=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">colorReduce4</span><span class="token punctuation">(</span>image1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> tinit<span class="token punctuation">;</span>

        <span class="token comment">//\u3010\u65B9\u6CD5\u516D\u3011\u5229\u7528 .ptr \u548C * ++\u4EE5\u53CA\u4F4D\u8FD0\u7B97\u3001image.cols * image.channels()</span>
        image1 <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tinit <span class="token operator">=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">colorReduce5</span><span class="token punctuation">(</span>image1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> tinit<span class="token punctuation">;</span>

        <span class="token comment">//\u3010\u65B9\u6CD5\u4E03\u3011\u5229\u7528.ptr \u548C * ++ \u4EE5\u53CA\u4F4D\u8FD0\u7B97(continuous)</span>
        image1 <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tinit <span class="token operator">=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">colorReduce6</span><span class="token punctuation">(</span>image1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> tinit<span class="token punctuation">;</span>

        <span class="token comment">//\u3010\u65B9\u6CD5\u516B\u3011\u5229\u7528 .ptr \u548C * ++ \u4EE5\u53CA\u4F4D\u8FD0\u7B97 (continuous+channels)</span>
        image1 <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tinit <span class="token operator">=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">colorReduce7</span><span class="token punctuation">(</span>image1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> tinit<span class="token punctuation">;</span>

        <span class="token comment">//\u3010\u65B9\u6CD5\u4E5D\u3011 \u5229\u7528Mat_ iterator</span>
        image1 <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tinit <span class="token operator">=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">colorReduce8</span><span class="token punctuation">(</span>image1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> tinit<span class="token punctuation">;</span>

        <span class="token comment">//\u3010\u65B9\u6CD5\u5341\u3011 \u5229\u7528Mat_ iterator\u4EE5\u53CA\u4F4D\u8FD0\u7B97</span>
        image1 <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tinit <span class="token operator">=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">colorReduce9</span><span class="token punctuation">(</span>image1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> tinit<span class="token punctuation">;</span>

        <span class="token comment">//\u3010\u65B9\u6CD5\u5341\u4E00\u3011\u5229\u7528Mat Iterator_</span>
        image1 <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tinit <span class="token operator">=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">colorReduce10</span><span class="token punctuation">(</span>image1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> tinit<span class="token punctuation">;</span>

        <span class="token comment">//\u3010\u65B9\u6CD5\u5341\u4E8C\u3011 \u5229\u7528\u52A8\u6001\u5730\u5740\u8BA1\u7B97\u914D\u5408at</span>
        image1 <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tinit <span class="token operator">=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">colorReduce11</span><span class="token punctuation">(</span>image1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> tinit<span class="token punctuation">;</span>

        <span class="token comment">//\u3010\u65B9\u6CD5\u5341\u4E09\u3011 \u5229\u7528\u56FE\u50CF\u7684\u8F93\u5165\u4E0E\u8F93\u51FA</span>
        image1 <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tinit <span class="token operator">=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Mat result<span class="token punctuation">;</span>
        <span class="token function">colorReduce12</span><span class="token punctuation">(</span>image1<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> tinit<span class="token punctuation">;</span>
        image2 <span class="token operator">=</span> result<span class="token punctuation">;</span>

        <span class="token comment">//\u3010\u65B9\u6CD5\u5341\u56DB\u3011 \u5229\u7528\u64CD\u4F5C\u7B26\u91CD\u8F7D</span>
        image1 <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tinit <span class="token operator">=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">colorReduce13</span><span class="token punctuation">(</span>image1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> tinit<span class="token punctuation">;</span>

        <span class="token comment">//------------------------------</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//\u8F93\u51FA\u56FE\u50CF</span>
    <span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;\u539F\u59CB\u56FE\u50CF&quot;</span><span class="token punctuation">,</span> image0<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;\u7ED3\u679C&quot;</span><span class="token punctuation">,</span> image2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;\u56FE\u50CF\u7ED3\u679C&quot;</span><span class="token punctuation">,</span> image1<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// \u8F93\u51FA\u5E73\u5747\u6267\u884C\u65F6\u95F4</span>
    cout <span class="token operator">&lt;&lt;</span> endl <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;-------------------------------------------&quot;</span> <span class="token operator">&lt;&lt;</span> endl <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\\n\u3010\u65B9\u6CD5\u4E00\u3011\u5229\u7528.ptr \u548C []\u7684\u65B9\u6CD5\u6240\u7528\u65F6\u95F4\u4E3A &quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1000.</span> <span class="token operator">*</span> t<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token function">getTickFrequency</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> n <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;ms&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\\n\u3010\u65B9\u6CD5\u4E8C\u3011\u5229\u7528 .ptr \u548C * ++ \u7684\u65B9\u6CD5\u6240\u7528\u65F6\u95F4\u4E3A&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1000.</span> <span class="token operator">*</span> t<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token function">getTickFrequency</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> n <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;ms&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\\n\u3010\u65B9\u6CD5\u4E09\u3011\u5229\u7528.ptr \u548C * ++ \u4EE5\u53CA\u6A21\u64CD\u4F5C\u7684\u65B9\u6CD5\u6240\u7528\u65F6\u95F4\u4E3A&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1000.</span> <span class="token operator">*</span> t<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token function">getTickFrequency</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> n <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;ms&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\\n\u3010\u65B9\u6CD5\u56DB\u3011\u5229\u7528.ptr \u548C * ++ \u4EE5\u53CA\u4F4D\u64CD\u4F5C\u7684\u65B9\u6CD5\u6240\u7528\u65F6\u95F4\u4E3A&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1000.</span> <span class="token operator">*</span> t<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token function">getTickFrequency</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> n <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;ms&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\\n\u3010\u65B9\u6CD5\u4E94\u3011\u5229\u7528\u6307\u9488\u7B97\u672F\u8FD0\u7B97\u7684\u65B9\u6CD5\u6240\u7528\u65F6\u95F4\u4E3A&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1000.</span> <span class="token operator">*</span> t<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token function">getTickFrequency</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> n <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;ms&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\\n\u3010\u65B9\u6CD5\u516D\u3011\u5229\u7528 .ptr \u548C * ++\u4EE5\u53CA\u4F4D\u8FD0\u7B97\u3001channels()\u7684\u65B9\u6CD5\u6240\u7528\u65F6\u95F4\u4E3A&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1000.</span> <span class="token operator">*</span> t<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token function">getTickFrequency</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> n <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;ms&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\\n\u3010\u65B9\u6CD5\u4E03\u3011\u5229\u7528.ptr \u548C * ++ \u4EE5\u53CA\u4F4D\u8FD0\u7B97(continuous)\u7684\u65B9\u6CD5\u6240\u7528\u65F6\u95F4\u4E3A&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1000.</span> <span class="token operator">*</span> t<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token function">getTickFrequency</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> n <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;ms&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\\n\u3010\u65B9\u6CD5\u516B\u3011\u5229\u7528 .ptr \u548C * ++ \u4EE5\u53CA\u4F4D\u8FD0\u7B97 (continuous+channels)\u7684\u65B9\u6CD5\u6240\u7528\u65F6\u95F4\u4E3A&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1000.</span> <span class="token operator">*</span> t<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token function">getTickFrequency</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> n <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;ms&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\\n\u3010\u65B9\u6CD5\u4E5D\u3011\u5229\u7528Mat_ iterator \u7684\u65B9\u6CD5\u6240\u7528\u65F6\u95F4\u4E3A&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1000.</span> <span class="token operator">*</span> t<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token function">getTickFrequency</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> n <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;ms&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\\n\u3010\u65B9\u6CD5\u5341\u3011\u5229\u7528Mat_ iterator\u4EE5\u53CA\u4F4D\u8FD0\u7B97\u7684\u65B9\u6CD5\u6240\u7528\u65F6\u95F4\u4E3A&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1000.</span> <span class="token operator">*</span> t<span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token function">getTickFrequency</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> n <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;ms&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\\n\u3010\u65B9\u6CD5\u5341\u4E00\u3011\u5229\u7528Mat Iterator_\u7684\u65B9\u6CD5\u6240\u7528\u65F6\u95F4\u4E3A&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1000.</span> <span class="token operator">*</span> t<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token function">getTickFrequency</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> n <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;ms&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\\n\u3010\u65B9\u6CD5\u5341\u4E8C\u3011\u5229\u7528\u52A8\u6001\u5730\u5740\u8BA1\u7B97\u914D\u5408at \u7684\u65B9\u6CD5\u6240\u7528\u65F6\u95F4\u4E3A&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1000.</span> <span class="token operator">*</span> t<span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token function">getTickFrequency</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> n <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;ms&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\\n\u3010\u65B9\u6CD5\u5341\u4E09\u3011\u5229\u7528\u56FE\u50CF\u7684\u8F93\u5165\u4E0E\u8F93\u51FA\u7684\u65B9\u6CD5\u6240\u7528\u65F6\u95F4\u4E3A&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1000.</span> <span class="token operator">*</span> t<span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token function">getTickFrequency</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> n <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;ms&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\\n\u3010\u65B9\u6CD5\u5341\u56DB\u3011\u5229\u7528\u64CD\u4F5C\u7B26\u91CD\u8F7D\u7684\u65B9\u6CD5\u6240\u7528\u65F6\u95F4\u4E3A&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1000.</span> <span class="token operator">*</span> t<span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token function">getTickFrequency</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> n <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;ms&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

    <span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u56FE\u50CF\u5904\u7406\u4E4B\u7EBF\u6027\u6EE4\u6CE2" tabindex="-1"><a class="header-anchor" href="#\u56FE\u50CF\u5904\u7406\u4E4B\u7EBF\u6027\u6EE4\u6CE2" aria-hidden="true">#</a> \u56FE\u50CF\u5904\u7406\u4E4B\u7EBF\u6027\u6EE4\u6CE2</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">//---------------------------------\u3010\u5934\u6587\u4EF6\u3001\u547D\u540D\u7A7A\u95F4\u5305\u542B\u90E8\u5206\u3011-------------------------------</span>
<span class="token comment">//      \u63CF\u8FF0\uFF1A\u5305\u542B\u7A0B\u5E8F\u6240\u4F7F\u7528\u7684\u5934\u6587\u4EF6\u548C\u547D\u540D\u7A7A\u95F4</span>
<span class="token comment">//------------------------------------------------------------------------------------------------</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/core/core.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/highgui/highgui.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgproc/imgproc.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>
<span class="token comment">//-----------------------------------\u3010\u5168\u5C40\u53D8\u91CF\u58F0\u660E\u90E8\u5206\u3011--------------------------------------</span>
<span class="token comment">//  \u63CF\u8FF0\uFF1A\u5168\u5C40\u53D8\u91CF\u58F0\u660E</span>
<span class="token comment">//-----------------------------------------------------------------------------------------------</span>
Mat g_srcImage<span class="token punctuation">,</span> g_dstImage1<span class="token punctuation">,</span> g_dstImage2<span class="token punctuation">,</span> g_dstImage3<span class="token punctuation">;</span><span class="token comment">//\u5B58\u50A8\u56FE\u7247\u7684Mat\u7C7B\u578B</span>
<span class="token keyword">int</span> g_nBoxFilterValue <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>  <span class="token comment">//\u65B9\u6846\u6EE4\u6CE2\u53C2\u6570\u503C</span>
<span class="token keyword">int</span> g_nMeanBlurValue <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>  <span class="token comment">//\u5747\u503C\u6EE4\u6CE2\u53C2\u6570\u503C</span>
<span class="token keyword">int</span> g_nGaussianBlurValue <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>  <span class="token comment">//\u9AD8\u65AF\u6EE4\u6CE2\u53C2\u6570\u503C</span>
                               <span class="token comment">//-----------------------------------\u3010\u5168\u5C40\u51FD\u6570\u58F0\u660E\u90E8\u5206\u3011--------------------------------------</span>
                               <span class="token comment">//   \u63CF\u8FF0\uFF1A\u5168\u5C40\u51FD\u6570\u58F0\u660E</span>
                               <span class="token comment">//-----------------------------------------------------------------------------------------------</span>
                               <span class="token comment">//\u56DB\u4E2A\u8F68\u8FF9\u6761\u7684\u56DE\u8C03\u51FD\u6570</span>
<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">on_BoxFilter</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//\u5747\u503C\u6EE4\u6CE2</span>
<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">on_MeanBlur</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//\u5747\u503C\u6EE4\u6CE2</span>
<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">on_GaussianBlur</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">//\u9AD8\u65AF\u6EE4\u6CE2</span>
<span class="token comment">//-----------------------------------\u3010main( )\u51FD\u6570\u3011--------------------------------------------</span>
<span class="token comment">//  \u63CF\u8FF0\uFF1A\u63A7\u5236\u53F0\u5E94\u7528\u7A0B\u5E8F\u7684\u5165\u53E3\u51FD\u6570\uFF0C\u6211\u4EEC\u7684\u7A0B\u5E8F\u4ECE\u8FD9\u91CC\u5F00\u59CB</span>
<span class="token comment">//-----------------------------------------------------------------------------------------------</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">//\u6539\u53D8console\u5B57\u4F53\u989C\u8272</span>
    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">&quot;color 5F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// \u8F7D\u5165\u539F\u56FE</span>
    string path <span class="token operator">=</span> <span class="token string">&quot;Resources/test.png&quot;</span><span class="token punctuation">;</span>
    g_srcImage <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>g_srcImage<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;\u6587\u4EF6\u8BFB\u53D6\u9519\u8BEF \\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token comment">//\u514B\u9686\u539F\u56FE\u5230\u4E09\u4E2AMat\u7C7B\u578B\u4E2D</span>
    g_dstImage1 <span class="token operator">=</span> g_srcImage<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    g_dstImage2 <span class="token operator">=</span> g_srcImage<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    g_dstImage3 <span class="token operator">=</span> g_srcImage<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u663E\u793A\u539F\u56FE</span>
    <span class="token function">namedWindow</span><span class="token punctuation">(</span><span class="token string">&quot;\u3010&lt;0&gt;\u539F\u56FE\u7A97\u53E3\u3011&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;\u3010&lt;0&gt;\u539F\u56FE\u7A97\u53E3\u3011&quot;</span><span class="token punctuation">,</span> g_srcImage<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//=================\u3010&lt;1&gt;\u65B9\u6846\u6EE4\u6CE2\u3011==================</span>
    <span class="token comment">//\u521B\u5EFA\u7A97\u53E3</span>
    <span class="token function">namedWindow</span><span class="token punctuation">(</span><span class="token string">&quot;\u3010&lt;1&gt;\u65B9\u6846\u6EE4\u6CE2\u3011&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u521B\u5EFA\u8F68\u8FF9\u6761</span>
    <span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">&quot;\u5185\u6838\u503C\uFF1A&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u3010&lt;1&gt;\u65B9\u6846\u6EE4\u6CE2\u3011&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>g_nBoxFilterValue<span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> on_BoxFilter<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">on_BoxFilter</span><span class="token punctuation">(</span>g_nBoxFilterValue<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//================================================</span>
    <span class="token comment">//=================\u3010&lt;2&gt;\u5747\u503C\u6EE4\u6CE2\u3011==================</span>
    <span class="token comment">//\u521B\u5EFA\u7A97\u53E3</span>
    <span class="token function">namedWindow</span><span class="token punctuation">(</span><span class="token string">&quot;\u3010&lt;2&gt;\u5747\u503C\u6EE4\u6CE2\u3011&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u521B\u5EFA\u8F68\u8FF9\u6761</span>
    <span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">&quot;\u5185\u6838\u503C\uFF1A&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u3010&lt;2&gt;\u5747\u503C\u6EE4\u6CE2\u3011&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>g_nMeanBlurValue<span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> on_MeanBlur<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">on_MeanBlur</span><span class="token punctuation">(</span>g_nMeanBlurValue<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//================================================</span>
    <span class="token comment">//=================\u3010&lt;3&gt;\u9AD8\u65AF\u6EE4\u6CE2\u3011=====================</span>
    <span class="token comment">//\u521B\u5EFA\u7A97\u53E3</span>
    <span class="token function">namedWindow</span><span class="token punctuation">(</span><span class="token string">&quot;\u3010&lt;3&gt;\u9AD8\u65AF\u6EE4\u6CE2\u3011&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u521B\u5EFA\u8F68\u8FF9\u6761</span>
    <span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">&quot;\u5185\u6838\u503C\uFF1A&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u3010&lt;3&gt;\u9AD8\u65AF\u6EE4\u6CE2\u3011&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>g_nGaussianBlurValue<span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> on_GaussianBlur<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">on_GaussianBlur</span><span class="token punctuation">(</span>g_nGaussianBlurValue<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//================================================</span>
    <span class="token comment">//\u8F93\u51FA\u4E00\u4E9B\u5E2E\u52A9\u4FE1\u606F</span>
    cout <span class="token operator">&lt;&lt;</span> endl <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\\t\u8FD0\u884C\u6210\u529F\uFF0C\u8BF7\u8C03\u6574\u6EDA\u52A8\u6761\u89C2\u5BDF\u56FE\u50CF\u6548\u679C~\\n\\n&quot;</span>
        <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\\t\u6309\u4E0B\u201Cq\u201D\u952E\u65F6\uFF0C\u7A0B\u5E8F\u9000\u51FA\u3002\\n&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">//\u6309\u4E0B\u201Cq\u201D\u952E\u65F6\uFF0C\u7A0B\u5E8F\u9000\u51FA</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">(</span><span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token char">&#39;q&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//-----------------------------\u3010on_BoxFilter( )\u51FD\u6570\u3011------------------------------------</span>
<span class="token comment">//  \u63CF\u8FF0\uFF1A\u65B9\u6846\u6EE4\u6CE2\u64CD\u4F5C\u7684\u56DE\u8C03\u51FD\u6570</span>
<span class="token comment">//-----------------------------------------------------------------------------------------------</span>
<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">on_BoxFilter</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">//\u65B9\u6846\u6EE4\u6CE2\u64CD\u4F5C</span>
    <span class="token function">boxFilter</span><span class="token punctuation">(</span>g_srcImage<span class="token punctuation">,</span> g_dstImage1<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token function">Size</span><span class="token punctuation">(</span>g_nBoxFilterValue <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> g_nBoxFilterValue <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u663E\u793A\u7A97\u53E3</span>
    <span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;\u3010&lt;1&gt;\u65B9\u6846\u6EE4\u6CE2\u3011&quot;</span><span class="token punctuation">,</span> g_dstImage1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//-----------------------------\u3010on_MeanBlur( )\u51FD\u6570\u3011------------------------------------</span>
<span class="token comment">//  \u63CF\u8FF0\uFF1A\u5747\u503C\u6EE4\u6CE2\u64CD\u4F5C\u7684\u56DE\u8C03\u51FD\u6570</span>
<span class="token comment">//-----------------------------------------------------------------------------------------------</span>
<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">on_MeanBlur</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">//\u5747\u503C\u6EE4\u6CE2\u64CD\u4F5C</span>
    <span class="token function">blur</span><span class="token punctuation">(</span>g_srcImage<span class="token punctuation">,</span> g_dstImage2<span class="token punctuation">,</span> <span class="token function">Size</span><span class="token punctuation">(</span>g_nMeanBlurValue <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> g_nMeanBlurValue <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u663E\u793A\u7A97\u53E3</span>
    <span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;\u3010&lt;2&gt;\u5747\u503C\u6EE4\u6CE2\u3011&quot;</span><span class="token punctuation">,</span> g_dstImage2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//-----------------------------\u3010ContrastAndBright( )\u51FD\u6570\u3011------------------------------------</span>
<span class="token comment">//  \u63CF\u8FF0\uFF1A\u9AD8\u65AF\u6EE4\u6CE2\u64CD\u4F5C\u7684\u56DE\u8C03\u51FD\u6570</span>
<span class="token comment">//-----------------------------------------------------------------------------------------------</span>
<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">on_GaussianBlur</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">//\u9AD8\u65AF\u6EE4\u6CE2\u64CD\u4F5C</span>
    <span class="token function">GaussianBlur</span><span class="token punctuation">(</span>g_srcImage<span class="token punctuation">,</span> g_dstImage3<span class="token punctuation">,</span> <span class="token function">Size</span><span class="token punctuation">(</span>g_nGaussianBlurValue <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> g_nGaussianBlurValue <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u663E\u793A\u7A97\u53E3</span>
    <span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">&quot;\u3010&lt;3&gt;\u9AD8\u65AF\u6EE4\u6CE2\u3011&quot;</span><span class="token punctuation">,</span> g_dstImage3<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,57),h={href:"https://gitee.com/zmmlet/study-note/tree/master/C++/opencv",target:"_blank",rel:"noopener noreferrer"};function y(w,q){const a=e("ExternalLinkIcon");return c(),i("div",null,[u,n("ul",null,[k,r,n("li",null,[n("a",d,[s("opencv4.5"),t(a)]),s(" \u548C \u5BF9\u5E94\u6587\u6863\u4E0B\u8F7D")])]),m,n("p",null,[s("\u4E3A\u4EBA\u8138\u6A21\u578B\u8BAD\u7EC3\u6A21\u5757\u5728 opencv_contrib \u6A21\u5757\u4E2D\uFF0C\u56E0\u6B64\u60F3\u8981\u8BAD\u7EC3\u4EBA\u8138\u6A21\u578B\u5FC5\u987B\u4F7F\u7528 opencv_contrib \u6A21\u5757\uFF0Copencv_contrib \u6A21\u5757\u7248\u672C\u5FC5\u987B\u4E0E opencv \u5E93\u7248\u672C\u76F8\u5BF9\u5E94 \u4EBA\u8138\u6A21\u578B\u8BAD\u7EC3\u6A21\u5757 "),n("a",v,[s("https://github.com/opencv/opencv_contrib/tags"),t(a)])]),b,n("p",null,[s("Cmaker \u7F16\u8BD1\u5DE5\u5177 "),n("a",g,[s("https://cmake.org/download/"),t(a)])]),f,n("p",null,[s("opencv \u5B66\u4E60 Demo \u4EE3\u7801\u4E0B\u8F7D "),n("a",h,[s("Demo \u4EE3\u7801\u4E0B\u8F7D"),t(a)])])])}const R=o(l,[["render",y],["__file","OpenCV\u7B14\u8BB0.html.vue"]]);export{R as default};
